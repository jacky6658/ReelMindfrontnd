<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>è¨‚é–± ReelMindï½œä»˜è²»å³ä½¿ç”¨ï¼Œç„¡å…è²»é«”é©—</title>
<meta name="description" content="ReelMind å–®ä¸€è¨‚é–±åˆ¶ï¼šAI é¡§å•ã€AI ä¸€éµç”Ÿæˆã€IP äººè¨­è¦åŠƒèˆ‡å‰µä½œè€…è³‡æ–™åº«ã€‚ä»˜è²»å³ä½¿ç”¨ï¼Œç„¡å…è²»é«”é©—ã€‚æ”¯æ´ä¿¡ç”¨å¡ã€LINE Payã€Apple Pay ç­‰å¤šç¨®æ”¯ä»˜æ–¹å¼ã€‚">
<meta name="theme-color" content="#2563EB" />
<!-- Favicon: ä½¿ç”¨ SVG data URIï¼Œé¿å… 404 éŒ¯èª¤ -->
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EğŸ¬%3C/text%3E%3C/svg%3E" />
<!-- HTTP å¿«å–æ¨™é ­ -->
<meta http-equiv="Cache-Control" content="public, max-age=3600">
<meta http-equiv="Expires" content="3600">
<style>
:root{
  --bg:#F8FAFC; --ink:#0F172A; --sub:#475569; --line:#E2E8F0; --card:#FFFFFF;
  --blue:#2563EB; --blue-deep:#1D4ED8; --ok:#16A34A; --warn:#F59E0B; --red:#DC2626;
  --shadow:0 16px 40px rgba(2,6,23,.08); --r:16px;
}
*{box-sizing:border-box} html,body{margin:0;background:var(--bg);color:var(--ink);-webkit-font-smoothing:antialiased}
body{font-family:ui-sans-serif,system-ui,-apple-system,"Noto Sans TC","PingFang TC",Segoe UI,Roboto,Arial}
a{text-decoration:none;color:inherit}
.wrap{width:100%} .safe{max-width:1120px;margin:0 auto;padding:0 16px}
.hero{padding:56px 0 24px;background:
  radial-gradient(900px 320px at 90% -10%, rgba(37,99,235,.12), transparent 60%),
  radial-gradient(600px 260px at 8% -10%, rgba(59,130,246,.10), transparent 60%);
  border-bottom:1px solid var(--line)}
.h1{font-size:32px;line-height:1.2;margin:0 0 6px}
.typewriter-cursor{color:var(--blue);animation:blink 1s infinite}
@keyframes blink{0%,50%{opacity:1}51%,100%{opacity:0}}
@keyframes discountBlink{0%,45%{opacity:1;transform:scale(1)}50%,55%{opacity:0.3;transform:scale(0.95)}60%,100%{opacity:1;transform:scale(1)}}
.lead{color:var(--sub);margin:0}
.badge{display:inline-flex;gap:8px;align-items:center;background:#E0F2FE;color:#075985;padding:8px 12px;border-radius:999px;font-weight:800;font-size:12px;margin-bottom:10px}
.notice{display:flex;gap:8px;align-items:center;color:#0F172A;background:#FEF3C7;border:1px solid #FDE68A;border-radius:12px;padding:8px 12px;margin-top:12px;font-weight:700}
.grid{display:grid;gap:16px}
@media(min-width:980px){.cols-2{grid-template-columns:1.1fr 1fr}}
@media(max-width:980px){.grid[style*="grid-template-columns: repeat(3, 1fr)"]{grid-template-columns:1fr !important}}
.card{background:var(--card);border-radius:var(--r);box-shadow:var(--shadow);border:1px solid var(--line)}
.card .body{padding:18px;min-height:100%;position:relative;overflow:visible!important}
.card a.btn{position:relative!important;z-index:10000!important;pointer-events:auto!important;cursor:pointer!important}
.card .body > a.btn{position:relative!important;z-index:10000!important;pointer-events:auto!important;cursor:pointer!important;display:inline-flex!important}
.monthly-btn{position:relative!important;z-index:10000!important;pointer-events:auto!important;cursor:pointer!important;overflow:visible!important}
.h2{font-size:22px;font-weight:900;margin:0 0 8px}
.h3{font-size:18px;font-weight:900;margin:0 0 6px}
.hr{height:1px;background:linear-gradient(90deg,transparent,var(--line),transparent);margin:12px 0}
.sub{color:var(--sub)}
.list{padding-left:18px;margin:8px 0} .list li{margin:6px 0;color:var(--sub)}
.kv{display:flex;align-items:center;gap:8px}
.price{font-size:34px;font-weight:900}
.switch{display:flex;gap:8px;background:#F1F5F9;border:1px solid #E2E8F0;border-radius:999px;padding:6px}
.switch button{height:40px;padding:0 14px;border-radius:999px;border:none;font-weight:800;color:#334155;background:transparent;cursor:pointer}
.switch button.active{background:var(--card);box-shadow:0 6px 16px rgba(2,6,23,.08)}
.row{display:flex;gap:10px;flex-wrap:wrap}
.input{width:100%;height:44px;border:1px solid #CBD5E1;border-radius:10px;padding:10px 12px;font-size:14px}
.select{width:100%;height:44px;border:1px solid #CBD5E1;border-radius:10px;padding:10px 12px;background:#fff}
.textarea{width:100%;min-height:88px;border:1px solid #CBD5E1;border-radius:12px;padding:12px}
.btn{display:inline-flex;align-items:center;justify-content:center;height:48px;padding:0 18px;border-radius:999px;font-weight:900;cursor:pointer}
.btn.blue{background:var(--blue);color:#fff}.btn.blue:hover{background:var(--blue-deep)}
.btn.ghost{border:1px solid #CBD5E1;background:#fff;color:#334155}
.payrow{display:grid;gap:10px}
.paybtn{width:100%;height:48px;border:1px solid #CBD5E1;border-radius:12px;background:#fff;display:flex;align-items:center;justify-content:center;font-weight:800;gap:8px;cursor:pointer}
.sum{background:#0B1220;color:#E5E7EB;border-radius:14px;padding:12px}
.sum .line{display:flex;justify-content:space-between;margin:6px 0}
.faq{background:#FFF;border:1px solid var(--line);border-radius:16px;padding:14px}
.ft{padding:24px 0;color:#64748B;text-align:center;border-top:1px solid var(--line);font-size:14px}
.small{font-size:12px;color:#64748B}

/* å‹•ç•«æ•ˆæœ */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

/* Hero å€å¡Šå‹•ç•« */
.hero {
  animation: fadeInUp 0.8s ease-out;
}

.hero .badge {
  animation: fadeIn 0.6s ease-out 0.2s both;
}

.hero .h1 {
  animation: fadeInUp 0.8s ease-out 0.3s both;
}

.hero .lead {
  animation: fadeInUp 0.8s ease-out 0.4s both;
}

/* å¡ç‰‡å‹•ç•« */
.card {
  animation: fadeInUp 0.8s ease-out both;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 24px 60px rgba(2,6,23,.12);
}

/* ä¸‰å¼µå¡ç‰‡åˆ†åˆ¥å‹•ç•« */
.card:nth-child(1) {
  animation: none !important; /* ç§»é™¤æœˆè²»æ–¹æ¡ˆå¡ç‰‡å‹•ç•« */
  opacity: 1 !important;
  transform: none !important;
}

.card:nth-child(2) {
  animation-delay: 0.4s;
}

.card:nth-child(3) {
  animation-delay: 0.6s;
}

/* å¹´è²»æ–¹æ¡ˆç‰¹æ®Šå‹•ç•« */
.card[style*="border: 2px solid var(--blue)"] {
  animation: scaleIn 0.8s ease-out 0.4s both;
}

.card[style*="border: 2px solid var(--blue)"]:hover {
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 30px 70px rgba(37,99,235,.25);
}

/* æ¨™ç±¤å‹•ç•« - å·²ç§»é™¤ï¼Œé¿å…èˆ‡ translateX(-50%) è¡çªå°è‡´æ¨™ç±¤ä½ç½®ç§»å‹• */
/* .card[style*="border: 2px solid var(--blue)"] > div[style*="position: absolute"] {
  animation: pulse 2s ease-in-out infinite;
  animation-delay: 1s;
} */

/* æŒ‰éˆ•å‹•ç•« */
.btn {
  transition: all 0.3s ease;
  position: relative;
  cursor: pointer;
  pointer-events: auto;
  z-index: 10;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border-radius: 999px;
}

/* ç¢ºä¿æŒ‰éˆ•å¯é»æ“Šï¼Œç§»é™¤å¯èƒ½é˜»æ“‹çš„å½å…ƒç´  */
.btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
  z-index: -1;
  pointer-events: none;
}

.btn:hover::before {
  width: 300px;
  height: 300px;
}

/* æœˆè²»æ–¹æ¡ˆæŒ‰éˆ•ç‰¹æ®Šè™•ç† - ç§»é™¤æ‰€æœ‰å‹•ç•«æ•ˆæœï¼Œç¢ºä¿å¯é»æ“Š */
.monthly-btn {
  position: relative !important;
  z-index: 10000 !important;
  pointer-events: auto !important;
  cursor: pointer !important;
  overflow: visible !important;
  animation: none !important;
  transition: background 0.3s ease, transform 0.3s ease !important;
}

/* å®Œå…¨ç§»é™¤æœˆè²»æŒ‰éˆ•çš„ ::before å½å…ƒç´ å‹•ç•« */
.monthly-btn::before {
  display: none !important;
  pointer-events: none !important;
  content: none !important;
}

/* ç¢ºä¿æœˆè²»æŒ‰éˆ•å…§å®¹å¯é»æ“Š */
.monthly-btn > * {
  position: relative !important;
  z-index: 10001 !important;
  pointer-events: auto !important;
}

/* æœˆè²»æŒ‰éˆ• hover æ•ˆæœï¼ˆç°¡åŒ–ç‰ˆï¼Œç„¡å‹•ç•«ï¼‰ */
.monthly-btn:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 8px 20px rgba(37,99,235,.3) !important;
  background: var(--blue-deep) !important;
}

/* æŠ˜æ‰£æ–‡å­—é–ƒçˆå‹•ç•« */
.discount-badge {
  display: inline-block;
  font-weight: 900;
  color: var(--red);
  animation: discountBlink 2s ease-in-out infinite;
  text-shadow: 0 0 8px rgba(220,38,38,0.5);
}

.btn > * {
  position: relative;
  z-index: 1;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(37,99,235,.3);
}

.btn:active {
  transform: translateY(0);
}

/* åƒ¹æ ¼æ•¸å­—å‹•ç•« */
.price {
  animation: fadeInUp 0.6s ease-out both;
  transition: color 0.3s ease;
}

/* åˆ—è¡¨é …ç›®å‹•ç•« */
.list li {
  opacity: 0;
  animation: fadeInUp 0.5s ease-out both;
}

.list li:nth-child(1) { animation-delay: 0.1s; }
.list li:nth-child(2) { animation-delay: 0.2s; }
.list li:nth-child(3) { animation-delay: 0.3s; }
.list li:nth-child(4) { animation-delay: 0.4s; }
.list li:nth-child(5) { animation-delay: 0.5s; }

/* CTA å€å¡Šå‹•ç•« */
.safe[style*="margin-top:24px; text-align: center"] {
  animation: fadeInUp 0.8s ease-out 0.8s both;
}

/* FAQ å€å¡Šå‹•ç•« */
.faq {
  animation: fadeInUp 0.8s ease-out 1s both;
}

/* Footer å‹•ç•« */
.ft {
  animation: fadeIn 0.6s ease-out 1.2s both;
}

/* éŸ¿æ‡‰å¼ï¼šæ‰‹æ©Ÿç‰ˆæ¸›å°‘å‹•ç•«å»¶é² */
@media (max-width: 768px) {
  .card {
    animation-delay: 0s !important;
  }
  
  .list li {
    animation-delay: 0s !important;
  }
}

/* è¼‰å…¥å®Œæˆå¾Œçš„å¾®å‹•ç•« */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.card[style*="border: 2px solid var(--blue)"]::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  animation: shimmer 3s infinite;
}
/* å°èˆªæ¬„æ¨£å¼ */
.subscription-navbar {
  background: var(--card);
  border-bottom: 1px solid var(--line);
  padding: 16px 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  position: sticky;
  top: 0;
  z-index: 100;
}

.subscription-navbar-left {
  display: flex;
  align-items: center;
  gap: 24px;
}

.subscription-navbar-title {
  font-size: 24px;
  font-weight: 600;
  color: var(--ink);
  cursor: pointer;
  text-decoration: none;
}

.subscription-navbar-right {
  display: flex;
  align-items: center;
  gap: 16px;
}

.subscription-user-info {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s;
}

.subscription-user-info:hover {
  background: #f1f5f9;
}

.subscription-user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}

.subscription-user-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--ink);
}

.subscription-logout-btn {
  padding: 8px 16px;
  background: #ef4444;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}

.subscription-logout-btn:hover {
  background: #dc2626;
}

.subscription-back-btn {
  padding: 8px 16px;
  background: transparent;
  color: var(--ink);
  border: 1px solid var(--line);
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  transition: all 0.2s;
}

.subscription-back-btn:hover {
  background: #f1f5f9;
  border-color: var(--blue);
}

@media (max-width: 768px) {
  .subscription-navbar {
    padding: 12px 16px;
    flex-wrap: wrap;
  }
  
  .subscription-navbar-title {
    font-size: 20px;
  }
  
  .subscription-user-name {
    display: none;
  }
}
</style>
</head>
<body>

<!-- å°èˆªæ¬„ -->
<nav class="subscription-navbar">
  <div class="subscription-navbar-left">
    <a href="index.html" class="subscription-navbar-title">ReelMind</a>
  </div>
  <div class="subscription-navbar-right" id="subscriptionNavbarRight">
    <a href="index.html" class="subscription-back-btn">â† è¿”å›é¦–é </a>
    <!-- ç™»å…¥ç”¨æˆ¶è³‡è¨Šå’Œç™»å‡ºæŒ‰éˆ•ï¼ˆå‹•æ…‹é¡¯ç¤ºï¼‰ -->
    <div id="subscriptionUserInfo" style="display: none;" class="subscription-user-info" onclick="window.location.href='userDB.html'">
      <img id="subscriptionUserAvatar" class="subscription-user-avatar" src="" alt="ç”¨æˆ¶é ­åƒ" style="display: none;">
      <span id="subscriptionUserName" class="subscription-user-name"></span>
    </div>
    <button id="subscriptionLogoutBtn" class="subscription-logout-btn" style="display: none;" onclick="handleSubscriptionLogout()">ç™»å‡º</button>
  </div>
</nav>

<!-- HERO -->
<header class="hero wrap" id="subscription-section">
  <div class="safe" style="text-align: center;">
    <h1 class="h1" id="typewriter-title">ç”¨ AI æ™ºèƒ½é«”ï¼Œæ‰“é€ ä½ çš„çˆ†æ¬¾çŸ­å½±éŸ³</h1>
    <p class="lead">æ¯å¤©ä¸åˆ° NT$66ï¼Œå…¨å¹´ AI å¹«ä½ å¸³è™Ÿå®šä½ã€ç”Ÿæˆéˆæ„Ÿé¸é¡Œèˆ‡çˆ†æ¬¾è…³æœ¬</p>
  </div>
</header>

<main class="wrap" style="padding:28px 0">
  <div class="safe grid" style="grid-template-columns: repeat(3, 1fr); gap: 16px;">

    <!-- ç¬¬ä¸€ï¼šå¹´è²»æ–¹æ¡ˆ -->
    <section class="card">
      <div class="body" style="text-align: center; display: flex; flex-direction: column; height: 100%;">
        <div style="flex: 1;">
          <h2 class="h2">å¹´è²»æ–¹æ¡ˆ</h2>
          <div class="price" style="color: var(--ink); font-size: 34px; font-weight: 900;">NT$399å…ƒ<span style="font-size: 0.6em;">/æœˆ</span></div>
          <div class="sub" style="margin: 8px 0; color: var(--ink);">
            <div style="font-size: 14px; font-weight: 500;">ä»¥å¹´è¨ˆè²»</div>
          </div>
          <div class="hr"></div>
          <div class="sub" style="margin: 12px 0; font-weight: 600;">ä¸€æ¬¡ä»˜æ¬¾ã€è‡ªå‹•çºŒç´„ã€å¯éš¨æ™‚å–æ¶ˆ</div>
          <ul class="list" style="text-align: left; margin: 16px 0;">
            <li>ä¸€éµç”Ÿæˆ(ç„¡é™åˆ¶æ¬¡æ•¸)</li>
            <li>å‰µä½œè€…è³‡æ–™åº«(PDF / CSV ä¸‹è¼‰)</li>
            <li>å®¢æœæ”¯æ´</li>
          </ul>
          <div class="hr"></div>
        </div>
        <a href="#" onclick="handleSubscriptionClick('yearly'); return false;" class="btn blue" style="width: 100%; margin-top: auto; display: inline-flex; justify-content: center; text-decoration: none;">ç«‹å³è³¼è²·</a>
      </div>
    </section>

    <!-- ç¬¬äºŒï¼šæ°¸ä¹…ä½¿ç”¨æ–¹æ¡ˆï¼ˆå„ªå…ˆæ¨å»£ï¼‰ -->
    <section class="card" style="border: 2px solid var(--blue); box-shadow: 0 20px 50px rgba(37,99,235,.15); position: relative;">
      <div style="position: absolute; top: -12px; left: 50%; right: auto; transform: translateX(-50%); background: var(--blue); color: white; padding: 4px 16px; border-radius: 999px; font-size: 12px; font-weight: 900; white-space: nowrap; display: inline-block;">ğŸ”¥ æœ€å¤šäººé¸æ“‡</div>
      <div class="body" style="text-align: center; display: flex; flex-direction: column; height: 100%;">
        <div style="flex: 1;">
          <h2 class="h2">æ°¸ä¹…ä½¿ç”¨æ–¹æ¡ˆ</h2>
          <div class="price" style="color: var(--blue); margin: 16px 0;">NT$9,900</div>
          <div class="sub" style="margin-bottom: 16px;">ä¸€æ¬¡è³¼è²·ï¼Œæ°¸ä¹…ä½¿ç”¨</div>
          <div class="hr"></div>
          <ul class="list" style="text-align: left; margin: 16px 0;">
            <li>IPäººè¨­è¦åŠƒ(åŒ…å«å¥—ç”¨è¨­å®šèˆ‡AIçŸ­å½±éŸ³é¡§å•æ·±åº¦å°è«‡ï¼Œè‡ªå‹•ç”Ÿæˆå¸³è™Ÿå®šä½ã€14å¤©é¸é¡Œè¦åŠƒã€ä»Šæ—¥è…³æœ¬ï¼Œæ”¯æ´æ­·å²è¨˜éŒ„ç®¡ç†èˆ‡è‡ªç”±æ­é…è¨­å®š)</li>
            <li>ä¸€éµç”Ÿæˆ(ç„¡é™åˆ¶æ¬¡æ•¸)</li>
            <li>å‰µä½œè€…è³‡æ–™åº«(PDF / CSV ä¸‹è¼‰)</li>
            <li>å®¢æœæ”¯æ´</li>
          </ul>
          <div class="hr"></div>
          <div class="small" style="margin-top: 0; text-align: center; margin-bottom: 12px;">ä¸€æ¬¡ä»˜æ¬¾ï¼Œçµ‚èº«ä½¿ç”¨ï¼Œç„¡éœ€çºŒè²»</div>
        </div>
        <a href="#" onclick="handleSubscriptionClick('lifetime'); return false;" class="btn blue monthly-btn" style="width: 100%; margin-top: auto; display: inline-flex; justify-content: center; text-decoration: none; position: relative; z-index: 10000 !important; cursor: pointer !important; pointer-events: auto !important; background: var(--blue) !important; color: white !important; padding: 12px 24px; border-radius: 999px; font-weight: 900;">ç«‹å³å‡ç´š æ°¸ä¹…ä½¿ç”¨æ–¹æ¡ˆ</a>
      </div>
    </section>

    <!-- å³ï¼šå®¢è£½åŒ–æ–¹æ¡ˆ -->
    <section class="card">
      <div class="body" style="text-align: center; display: flex; flex-direction: column; height: 100%;">
        <div style="flex: 1;">
          <h2 class="h2">å®¢è£½åŒ–æ–¹æ¡ˆ</h2>
          <div class="price" style="color: var(--ink); margin: 16px 0; font-size: 20px;">å®¢è£½å ±åƒ¹</div>
          <div class="sub" style="margin-bottom: 16px;">å“ç‰Œï¼åœ˜éšŠåˆä½œæ•´åˆæ–¹æ¡ˆ</div>
          <div class="hr"></div>
          <ul class="list" style="text-align: left; margin: 16px 0;">
            <li>å°ˆå±¬æ•´åˆæœå‹™</li>
            <li>åœ˜éšŠè¼”å°æ”¯æ´</li>
            <li>å®¢è£½åŒ–åŠŸèƒ½é–‹ç™¼</li>
            <li>å„ªå…ˆæŠ€è¡“æ”¯æ´</li>
          </ul>
          <div class="hr"></div>
          <div class="small" style="margin-top: 0; text-align: center; margin-bottom: 12px;">å°ˆå±¬æ•´åˆæœå‹™èˆ‡åœ˜éšŠè¼”å°</div>
        </div>
        <a href="contact.html" class="btn blue" style="width: 100%; margin-top: auto; display: inline-flex; justify-content: center; text-decoration: none;">è¯ç¹«æˆ‘å€‘</a>
      </div>
    </section>

  </div>

  <!-- FAQ / æ¢æ¬¾ -->
  <div class="safe" style="margin-top:18px">
    <section class="faq" id="terms">
      <h2 class="h2">å¸¸è¦‹å•é¡Œèˆ‡æ¢æ¬¾</h2>
      <p><b>Qï¼šä»˜æ¬¾å¾Œå¤šä¹…å¯ä»¥é–‹å§‹ä½¿ç”¨ï¼Ÿ</b><br/>Aï¼šå®Œæˆä»˜æ¬¾å¾Œç³»çµ±æœƒè‡ªå‹•é–‹é€šï¼Œç«‹å³å¯ç™»å…¥ä¸¦ä½¿ç”¨å…¨éƒ¨åŠŸèƒ½ã€‚ç„¡éœ€ç­‰å¾…äººå·¥å¯©æ ¸ã€‚</p>
      <p><b>Qï¼šä»˜æ¬¾æ˜¯å¦å®‰å…¨ï¼Ÿ</b><br/>Aï¼šæ‰€æœ‰ä»˜æ¬¾çš†é€éç¶ ç•Œé‡‘æµï¼ˆECPayï¼‰æˆ–å®˜æ–¹åˆä½œæ”¯ä»˜ç®¡é“ï¼Œæ¡ç”¨ SSL åŠ å¯†é€£ç·šï¼Œç¢ºä¿äº¤æ˜“å®‰å…¨ã€‚</p>
      <p><b>Qï¼šå¯ä»¥ä½¿ç”¨å“ªäº›ä»˜æ¬¾æ–¹å¼ï¼Ÿ</b><br/>Aï¼šç›®å‰æ”¯æ´ä¿¡ç”¨å¡ã€è½‰å¸³ã€å°ç£é‡‘æµä»˜æ¬¾åŠæµ·å¤–ä¿¡ç”¨å¡æ”¯ä»˜ï¼ˆVisaã€Masterã€JCBï¼‰ã€‚</p>
      <p><b>Qï¼šå¯ä»¥å¤šäººå…±ç”¨å¸³è™Ÿå—ï¼Ÿ</b><br/>Aï¼šç‚ºä¿éšœå®‰å…¨èˆ‡ä½¿ç”¨ç´€éŒ„ï¼Œæ¯å€‹å¸³è™Ÿåƒ…é™ä¸€äººä½¿ç”¨ã€‚å¦‚éœ€åœ˜éšŠç‰ˆæœ¬ï¼Œè«‹æ´½è©¢å®¢è£½åŒ–æ–¹æ¡ˆã€‚</p>
      <p><b>Qï¼šä¸åŒæ–¹æ¡ˆçš„åŠŸèƒ½å·®åœ¨å“ªè£¡ï¼Ÿ</b><br/>Aï¼šåŠŸèƒ½å®Œå…¨ç›¸åŒï¼Œåƒ…ä»˜æ¬¾é€±æœŸä¸åŒã€‚å¹´ä»˜æ–¹æ¡ˆå¯äº« 20% æŠ˜æ‰£èˆ‡å„ªå…ˆå®¢æœæ”¯æ´ã€‚</p>
      <p><b>Qï¼šè¨‚é–±åŒ…å«å“ªäº›åŠŸèƒ½ï¼Ÿ</b><br/>Aï¼šAI é¡§å•ã€AI ä¸€éµç”Ÿæˆã€IP äººè¨­è¦åŠƒèˆ‡å‰µä½œè€…è³‡æ–™åº«ï¼›ä¸åˆ†ç­‰ç´šã€åŠŸèƒ½å®Œæ•´ã€‚</p>
      <p><b>Qï¼šå¦‚ä½•é–‹ç«‹ç™¼ç¥¨ï¼Ÿ</b><br/>Aï¼šä»˜æ¬¾å¾Œå°‡æ–¼ 3â€“5 å€‹å·¥ä½œæ—¥å¯„é€é›»å­ç™¼ç¥¨è‡³ä½ çš„ä¿¡ç®±ã€‚</p>
      <p><b>Qï¼šå¦‚ä½•å–æ¶ˆè¨‚é–±ï¼Ÿ</b><br/>Aï¼šå¯æ–¼ä¸‹æœŸå‰éš¨æ™‚å–æ¶ˆï¼Œä¸å¦æ”¶çºŒç´„æ‰‹çºŒè²»ã€‚</p>
      <p class="small" style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--line);">
        <strong>â€» æ‰€æœ‰æ–¹æ¡ˆçš†ç‚ºä¸€æ¬¡æ€§ä»˜æ¬¾ä¸¦è‡ªå‹•çºŒç´„ï¼Œå¯æ–¼ä¸‹æœŸå‰éš¨æ™‚å–æ¶ˆï¼Œä¸å¦æ”¶çºŒç´„æ‰‹çºŒè²»ã€‚</strong><br/>
        é€€è²»æ”¿ç­–ï¼šæ•¸ä½æœå‹™ä¸€ç¶“å•Ÿç”¨æ•ä¸é€€æ¬¾ï¼ˆæ³•è¦å¦æœ‰è¦å®šè€…é™¤å¤–ï¼‰ã€‚è‹¥æ‰£æ¬¾æˆ–é–‹é€šç™¼ç”Ÿå•é¡Œï¼Œè«‹ä¾†ä¿¡ <a href="mailto:aiagent168168@gmail.com">aiagent168168@gmail.com</a>ã€‚
      </p>
    </section>
  </div>
</main>

<footer class="ft">Â© 2025 ReelMind Â· AI çŸ­å½±éŸ³ï½œAI è…³æœ¬ç”Ÿæˆï½œAI é¡§å•ï½œIP äººè¨­è¦åŠƒ Â· å°ç£</footer>

<script>
  // åƒ¹æ ¼è¨­å®šï¼ˆå¦‚æœªä¾†èª¿æ•´ï¼Œæ”¹é€™è£¡å³å¯ï¼‰
  const price = { lifetime: 9900, yearly: 4788 };
  let current = 'lifetime';

  function format(n){ return 'NT$' + n.toLocaleString('zh-Hant-TW'); }

  function setPlan(p){
    current = p;
    // é€™äº›å…ƒç´ åœ¨æ–°çš„ä¸‰å¡ç‰‡å¸ƒå±€ä¸­ä¸å­˜åœ¨ï¼Œæ‰€ä»¥åªæ›´æ–° current è®Šæ•¸
    // å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨é€™è£¡æ·»åŠ å…¶ä»–é‚è¼¯
  }

  // å¾ URL åƒæ•¸è®€å–æ–¹æ¡ˆ
  function getUrlParam(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
  }

  // Toast é€šçŸ¥å‡½æ•¸ï¼ˆå¦‚æœ common.js æœªè¼‰å…¥ï¼Œä½¿ç”¨é™ç´šæ–¹æ¡ˆï¼‰
  function showToast(message, duration = 3000) {
    if (window.ReelMindCommon && window.ReelMindCommon.showToast) {
      window.ReelMindCommon.showToast(message, duration);
      return;
    }
    // é™ç´šæ–¹æ¡ˆï¼šå‰µå»ºç°¡å–®çš„ toast
    let toastEl = document.getElementById('toast');
    if (!toastEl) {
      toastEl = document.createElement('div');
      toastEl.id = 'toast';
      toastEl.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #1f2937;
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 10000;
        display: none;
        opacity: 0;
        transition: opacity 0.3s;
        max-width: 400px;
        word-wrap: break-word;
      `;
      document.body.appendChild(toastEl);
    }
    toastEl.textContent = message;
    toastEl.style.display = 'block';
    toastEl.style.opacity = '1';
    setTimeout(() => {
      toastEl.style.opacity = '0';
      setTimeout(() => {
        toastEl.style.display = 'none';
      }, 300);
    }, duration);
  }

  async function checkout(){
    // ç™»å…¥æª¢æŸ¥ï¼šæœªç™»å…¥å…ˆå°å›ç™»å…¥ç•«é¢
    try {
      var token = localStorage.getItem('ipPlanningToken') || '';
      if (!token) {
        showToast('è«‹å…ˆç™»å…¥å¾Œå†è¨‚é–±', 3000);
        setTimeout(() => {
          try { window.location.href = '/' + '#login'; } catch(_) {}
        }, 1500);
        return;
      }
    } catch(_) {}

    // æª¢æŸ¥è¡¨å–®å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼ˆsubscription.html ä¸­æ²’æœ‰è¡¨å–®ï¼Œè¡¨å–®åœ¨ checkout.htmlï¼‰
    const nameEl = document.getElementById('name');
    const emailEl = document.getElementById('email');
    if (!nameEl || !emailEl) {
      // å¦‚æœè¡¨å–®ä¸å­˜åœ¨ï¼Œé€™å€‹å‡½æ•¸ä¸æ‡‰è©²åœ¨ subscription.html ä¸­è¢«èª¿ç”¨
      console.warn('checkout å‡½æ•¸åœ¨ subscription.html ä¸­ä¸æ‡‰è©²è¢«èª¿ç”¨');
      return;
    }

    // æ”¶é›†è¨‚å–®è³‡æ–™
    const plan = current;
    const payload = {
      plan,
      amount: price[plan],
      name: nameEl.value.trim(),
      email: emailEl.value.trim(),
      phone: document.getElementById('phone')?.value.trim() || '',
      invoiceType: document.getElementById('invoiceType')?.value || 'personal',
      vat: document.getElementById('vat')?.value.trim() || '',
      note: document.getElementById('note')?.value.trim() || ''
    };
    
    // å‰ç«¯ç°¡å–®æª¢æŸ¥
    if(!payload.name || !payload.email){
      showToast('è«‹å¡«å¯«å§“åèˆ‡é›»å­ä¿¡ç®±', 3000);
      return;
    }
    
    // é©—è­‰ Email æ ¼å¼
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(payload.email)) {
      showToast('è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­ä¿¡ç®±', 3000);
      return;
    }
    
    // å¦‚æœé¸æ“‡å…¬å¸ç™¼ç¥¨ï¼Œæª¢æŸ¥çµ±ç·¨
    if (payload.invoiceType === 'company' && !payload.vat) {
      showToast('é¸æ“‡å…¬å¸ç™¼ç¥¨æ™‚ï¼Œè«‹å¡«å¯«çµ±ä¸€ç·¨è™Ÿ', 3000);
      return;
    }
    
    // é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹
    const checkoutBtn = document.querySelector('.btn.blue');
    const originalText = checkoutBtn.textContent;
    checkoutBtn.disabled = true;
    checkoutBtn.textContent = 'è™•ç†ä¸­...';
    
    try {
      // èª¿ç”¨å¾Œç«¯ API å»ºç«‹è¨‚å–®
      const response = await fetch('https://aivideobackend.zeabur.app/api/payment/checkout', {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
      });
      
      if (response.ok) {
        // å¾Œç«¯è¿”å› HTML è¡¨å–®ï¼Œç›´æ¥é¡¯ç¤ºï¼ˆæœƒè‡ªå‹•æäº¤åˆ° ECPayï¼‰
        const html = await response.text();
        document.body.innerHTML = html;
      } else {
        const errorData = await response.json().catch(() => ({ error: 'å»ºç«‹è¨‚å–®å¤±æ•—' }));
        showToast(errorData.error || 'å»ºç«‹è¨‚å–®å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦', 4000);
        checkoutBtn.disabled = false;
        checkoutBtn.textContent = originalText;
      }
    } catch (error) {
      console.error('ä»˜æ¬¾éŒ¯èª¤:', error);
      showToast('ä»˜æ¬¾è™•ç†å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦', 4000);
      checkoutBtn.disabled = false;
      checkoutBtn.textContent = originalText;
    }
  }

  function pay(kind){
    // æ‰€æœ‰æ”¯ä»˜æ–¹å¼éƒ½ä½¿ç”¨ checkout()ï¼ŒECPay æœƒè®“ç”¨æˆ¶è‡ªè¡Œé¸æ“‡ä»˜æ¬¾æ–¹å¼
    checkout();
  }

  // åˆå§‹åŒ–ï¼šå¾ URL åƒæ•¸è®€å–æ–¹æ¡ˆï¼Œå¦‚æœæ²’æœ‰å‰‡é è¨­ç‚ºæ°¸ä¹…ä½¿ç”¨
  const urlPlan = getUrlParam('plan');
  const initialPlan = urlPlan === 'yearly' ? 'yearly' : (urlPlan === 'lifetime' ? 'lifetime' : 'lifetime');
  setPlan(initialPlan);

  // æ·»åŠ æ»¾å‹•åˆ°å°æ‡‰å¡ç‰‡çš„å‹•ç•«
  if (urlPlan) {
    setTimeout(() => {
      const targetCard = document.querySelector(`a[href="checkout.html?plan=${urlPlan}"]`)?.closest('.card');
      if (targetCard) {
        targetCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
        // æ·»åŠ é«˜äº®æ•ˆæœ
        targetCard.style.transition = 'all 0.5s ease';
        targetCard.style.transform = 'scale(1.05)';
        setTimeout(() => {
          targetCard.style.transform = 'scale(1)';
        }, 500);
      }
    }, 1000);
  }
  
  // è™•ç†ä»˜æ¬¾çµæœé é¢
  // è™•ç†æˆæ¬Šé€£çµï¼šå¦‚æœåœ¨ subscription.html é é¢æª¢æ¸¬åˆ° ?token=xxxï¼Œè·³è½‰åˆ° index.html è™•ç†
  (function() {
    const urlParams = new URLSearchParams(window.location.search);
    const token = urlParams.get('token');
    if (token) {
      // æª¢æ¸¬åˆ°æˆæ¬Šé€£çµï¼Œè·³è½‰åˆ° index.html è™•ç†
      const currentToken = localStorage.getItem('ipPlanningToken');
      if (!currentToken) {
        // æœªç™»å…¥ï¼Œè·³è½‰åˆ° index.html çš„ç™»å…¥é 
        window.location.href = `/#login?activation_token=${token}`;
      } else {
        // å·²ç™»å…¥ï¼Œè·³è½‰åˆ° index.html è™•ç†æˆæ¬Š
        window.location.href = `/?token=${token}`;
      }
      return; // åœæ­¢åŸ·è¡Œå¾ŒçºŒä»£ç¢¼
    }
  })();

  window.addEventListener('DOMContentLoaded', async function() {
    const urlParams = new URLSearchParams(window.location.search);
    const status = urlParams.get('status');
    const orderId = urlParams.get('order_id');
    const message = urlParams.get('message');
    
    if (status === 'success') {
      showPaymentSuccess(orderId);
    } else if (status === 'pending') {
      // å–è™ŸæˆåŠŸå¾…ä»˜æ¬¾ï¼ˆATM/è¶…å•†ï¼‰
      await showPaymentPending(orderId);
    } else if (status === 'failed' || status === 'error') {
      showPaymentError(message || 'ä»˜æ¬¾å¤±æ•—');
    }
  });
  
  // é¡¯ç¤ºå–è™ŸæˆåŠŸå¾…ä»˜æ¬¾é é¢
  async function showPaymentPending(orderId) {
    if (!orderId) {
      showPaymentError('è¨‚å–®ç·¨è™Ÿä¸å­˜åœ¨');
      return;
    }
    
    try {
      // æŸ¥è©¢è¨‚å–®è©³æƒ…
      const token = localStorage.getItem('ipPlanningToken') || '';
      const response = await fetch(`https://aivideobackend.zeabur.app/api/user/orders`, {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      });
      
      if (response.ok) {
        const data = await response.json();
        const order = data.orders?.find(o => o.order_id === orderId);
        
        if (order) {
          const paymentMethod = order.payment_method || '';
          const paymentCode = order.payment_code || '';
          const bankCode = order.bank_code || '';
          const expireDate = order.expire_date || '';
          
          // éš±è—åŸæœ‰å…§å®¹
          const mainContent = document.querySelector('.safe.grid');
          if (mainContent) {
            mainContent.style.display = 'none';
          }
          
          // é¡¯ç¤ºå–è™ŸæˆåŠŸè¨Šæ¯
          let paymentInfoHTML = '';
          if (paymentMethod === 'ATM') {
            paymentInfoHTML = `
              <div style="background: #f8f9fa; padding: 24px; border-radius: 8px; margin: 24px 0;">
                <h3 class="h3" style="margin-bottom: 16px;">ATM è½‰å¸³è³‡è¨Š</h3>
                ${bankCode ? `<p class="sub" style="margin-bottom: 8px;"><strong>éŠ€è¡Œä»£ç¢¼ï¼š</strong>${bankCode}</p>` : ''}
                ${paymentCode ? `<p class="sub" style="margin-bottom: 8px;"><strong>è™›æ“¬å¸³è™Ÿï¼š</strong><code style="background: white; padding: 4px 8px; border-radius: 4px; font-size: 1.1em;">${paymentCode}</code></p>` : ''}
                ${expireDate ? `<p class="small" style="color: var(--red); margin-top: 16px;">âš ï¸ è«‹æ–¼ ${expireDate} å‰å®Œæˆè½‰å¸³</p>` : ''}
              </div>
            `;
          } else if (paymentMethod === 'CVS' || paymentMethod === 'BARCODE') {
            paymentInfoHTML = `
              <div style="background: #f8f9fa; padding: 24px; border-radius: 8px; margin: 24px 0;">
                <h3 class="h3" style="margin-bottom: 16px;">è¶…å•†ä»£ç¢¼</h3>
                ${paymentCode ? `<p class="sub" style="margin-bottom: 8px;"><strong>ä»˜æ¬¾ä»£ç¢¼ï¼š</strong><code style="background: white; padding: 4px 8px; border-radius: 4px; font-size: 1.1em;">${paymentCode}</code></p>` : ''}
                ${expireDate ? `<p class="small" style="color: var(--red); margin-top: 16px;">âš ï¸ è«‹æ–¼ ${expireDate} å‰è‡³è¶…å•†å®Œæˆä»˜æ¬¾</p>` : ''}
                <p class="small" style="margin-top: 16px;">è«‹è‡³ 7-11ã€å…¨å®¶ã€èŠçˆ¾å¯Œã€OK è¶…å•†ç­‰é–€å¸‚ï¼Œä½¿ç”¨å¤šåª’é«”æ©Ÿå°è¼¸å…¥ä»£ç¢¼å®Œæˆä»˜æ¬¾</p>
              </div>
            `;
          }
          
          const pendingHTML = `
            <div class="safe" style="margin-top: 40px;">
              <section class="card">
                <div class="body" style="text-align: center; padding: 40px 20px;">
                  <div style="font-size: 64px; margin-bottom: 20px;">â³</div>
                  <h2 class="h2" style="color: var(--warning); margin-bottom: 12px;">å–è™ŸæˆåŠŸï¼Œå¾…ä»˜æ¬¾</h2>
                  <p class="sub" style="margin-bottom: 24px;">è«‹ä¾ç…§ä¸‹æ–¹è³‡è¨Šå®Œæˆä»˜æ¬¾ï¼Œä»˜æ¬¾å®Œæˆå¾Œç³»çµ±å°‡è‡ªå‹•é–‹é€šæ‚¨çš„å¸³è™Ÿ</p>
                  ${orderId ? `<p class="small" style="margin-bottom: 24px;">è¨‚å–®ç·¨è™Ÿï¼š${orderId}</p>` : ''}
                  ${paymentInfoHTML}
                  <div class="row" style="justify-content: center; gap: 12px; margin-top: 24px;">
                    <button class="btn blue" onclick="window.location.href='/'">è¿”å›é¦–é </button>
                    <button class="btn ghost" onclick="checkOrderStatus('${orderId}')">æª¢æŸ¥ä»˜æ¬¾ç‹€æ…‹</button>
                  </div>
                  <p class="small" style="margin-top: 24px;">
                    å¦‚æœ‰å•é¡Œï¼Œè«‹è¯ç¹«å®¢æœï¼š<a href="mailto:aiagent168168@gmail.com">aiagent168168@gmail.com</a>
                  </p>
                </div>
              </section>
            </div>
          `;
          
          const container = document.querySelector('.wrap');
          if (container) {
            container.insertAdjacentHTML('beforeend', pendingHTML);
          }
        } else {
          showPaymentError('æ‰¾ä¸åˆ°è¨‚å–®è³‡è¨Š');
        }
      } else {
        showPaymentError('ç„¡æ³•æŸ¥è©¢è¨‚å–®è³‡è¨Š');
      }
    } catch (error) {
      console.error('æŸ¥è©¢è¨‚å–®å¤±æ•—:', error);
      showPaymentError('æŸ¥è©¢è¨‚å–®å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
    }
  }
  
  // æª¢æŸ¥è¨‚å–®ä»˜æ¬¾ç‹€æ…‹
  async function checkOrderStatus(orderId) {
    try {
      const token = localStorage.getItem('ipPlanningToken') || '';
      const response = await fetch(`https://aivideobackend.zeabur.app/api/user/orders`, {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      });
      
      if (response.ok) {
        const data = await response.json();
        const order = data.orders?.find(o => o.order_id === orderId);
        
        if (order) {
          if (order.payment_status === 'paid') {
            alert('ä»˜æ¬¾æˆåŠŸï¼æ‚¨çš„å¸³è™Ÿå·²é–‹é€š');
            window.location.href = '/';
          } else {
            alert('å°šæœªå®Œæˆä»˜æ¬¾ï¼Œè«‹å®Œæˆä»˜æ¬¾å¾Œå†è©¦');
          }
        } else {
          alert('æ‰¾ä¸åˆ°è¨‚å–®è³‡è¨Š');
        }
      } else {
        alert('ç„¡æ³•æŸ¥è©¢è¨‚å–®ç‹€æ…‹');
      }
    } catch (error) {
      console.error('æª¢æŸ¥è¨‚å–®ç‹€æ…‹å¤±æ•—:', error);
      alert('æª¢æŸ¥è¨‚å–®ç‹€æ…‹å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
    }
  }
  
  function showPaymentSuccess(orderId) {
    // éš±è—åŸæœ‰å…§å®¹
    const mainContent = document.querySelector('.safe.grid');
    if (mainContent) {
      mainContent.style.display = 'none';
    }
    
    // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
    const successHTML = `
      <div class="safe" style="margin-top: 40px;">
        <section class="card">
          <div class="body" style="text-align: center; padding: 40px 20px;">
            <div style="font-size: 64px; margin-bottom: 20px;">âœ…</div>
            <h2 class="h2" style="color: var(--ok); margin-bottom: 12px;">ä»˜æ¬¾æˆåŠŸï¼</h2>
            <p class="sub" style="margin-bottom: 24px;">æ„Ÿè¬æ‚¨çš„è¨‚é–±ï¼Œæ‚¨çš„å¸³è™Ÿå·²é–‹é€šä½¿ç”¨æ¬Šé™</p>
            ${orderId ? `<p class="small" style="margin-bottom: 24px;">è¨‚å–®ç·¨è™Ÿï¼š${orderId}</p>` : ''}
            <div class="row" style="justify-content: center; gap: 12px;">
              <button class="btn blue" onclick="window.location.href='/'">é–‹å§‹ä½¿ç”¨</button>
              <button class="btn ghost" onclick="window.location.href='/subscription.html'">æŸ¥çœ‹è¨‚å–®</button>
            </div>
          </div>
        </section>
      </div>
    `;
    
    const container = document.querySelector('.wrap');
    if (container) {
      container.insertAdjacentHTML('beforeend', successHTML);
    }
  }
  
  function showPaymentError(message) {
    // éš±è—åŸæœ‰å…§å®¹
    const mainContent = document.querySelector('.safe.grid');
    if (mainContent) {
      mainContent.style.display = 'none';
    }
    
    // é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
    const errorHTML = `
      <div class="safe" style="margin-top: 40px;">
        <section class="card">
          <div class="body" style="text-align: center; padding: 40px 20px;">
            <div style="font-size: 64px; margin-bottom: 20px;">âŒ</div>
            <h2 class="h2" style="color: var(--red); margin-bottom: 12px;">ä»˜æ¬¾å¤±æ•—</h2>
            <p class="sub" style="margin-bottom: 24px;">${message}</p>
            <div class="row" style="justify-content: center; gap: 12px;">
              <button class="btn blue" onclick="window.location.href='/subscription.html'">é‡æ–°ä»˜æ¬¾</button>
              <button class="btn ghost" onclick="window.location.href='/'">è¿”å›é¦–é </button>
            </div>
            <p class="small" style="margin-top: 24px;">
              å¦‚æœ‰å•é¡Œï¼Œè«‹è¯ç¹«å®¢æœï¼š<a href="mailto:aiagent168168@gmail.com">aiagent168168@gmail.com</a>
            </p>
          </div>
        </section>
      </div>
    `;
    
    const container = document.querySelector('.wrap');
    if (container) {
      container.insertAdjacentHTML('beforeend', errorHTML);
    }
  }
  
  // æ‰“å­—æ©Ÿæ•ˆæœ
  function initTypewriter() {
    const titleElement = document.getElementById('typewriter-title');
    if (!titleElement) return;
    
    const text = 'ç”¨ AI æ™ºèƒ½é«”ï¼Œæ‰“é€ ä½ çš„çˆ†æ¬¾çŸ­å½±éŸ³';
    let index = 0;
    let showCursor = true;
    
    // å…ˆä¿å­˜åŸå§‹æ–‡å­—ï¼Œç„¶å¾Œæ¸…ç©ºæ¨™é¡Œå…§å®¹é–‹å§‹æ‰“å­—æ•ˆæœ
    const originalText = titleElement.textContent || text;
    titleElement.textContent = '';
    titleElement.innerHTML = '<span class="typewriter-cursor">|</span>';
    
    function typeChar() {
      if (index < text.length) {
        const cursor = showCursor ? '<span class="typewriter-cursor">|</span>' : '';
        titleElement.innerHTML = text.substring(0, index + 1) + cursor;
        index++;
        setTimeout(typeChar, 100); // æ¯å€‹å­—å…ƒé–“éš” 100ms
      } else {
        // æ‰“å­—å®Œæˆå¾Œï¼Œè®“å…‰æ¨™é–ƒçˆå¹¾æ¬¡å¾Œæ¶ˆå¤±
        let blinkCount = 0;
        const blinkInterval = setInterval(() => {
          showCursor = !showCursor;
          titleElement.innerHTML = text + (showCursor ? '<span class="typewriter-cursor">|</span>' : '');
          blinkCount++;
          if (blinkCount >= 6) {
            clearInterval(blinkInterval);
            titleElement.textContent = text; // æœ€çµ‚ç§»é™¤å…‰æ¨™
          }
        }, 500);
      }
    }
    
    // å»¶é²é–‹å§‹ï¼Œè®“é é¢å…ˆè¼‰å…¥
    setTimeout(typeChar, 300);
  }
  
  // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–æ‰“å­—æ©Ÿæ•ˆæœ
  document.addEventListener('DOMContentLoaded', function() {
    initTypewriter();
    
    // å¼·åˆ¶ç¢ºä¿æœˆä»˜æ–¹æ¡ˆæŒ‰éˆ•å¯é»æ“Š
    const monthlyBtn = document.querySelector('.monthly-btn');
    if (monthlyBtn) {
      // å¼·åˆ¶è¨­ç½®æ¨£å¼ï¼Œç¢ºä¿æŒ‰éˆ•å¯é»æ“Š
      monthlyBtn.style.pointerEvents = 'auto';
      monthlyBtn.style.cursor = 'pointer';
      monthlyBtn.style.zIndex = '10000';
      monthlyBtn.style.position = 'relative';
      monthlyBtn.style.overflow = 'visible';
      
      // ç§»é™¤å¯èƒ½é˜»æ“‹é»æ“Šçš„å½å…ƒç´ 
      const style = document.createElement('style');
      style.textContent = `
        .monthly-btn::before {
          display: none !important;
          pointer-events: none !important;
        }
        .monthly-btn {
          overflow: visible !important;
        }
      `;
      document.head.appendChild(style);
      
      // æ·»åŠ é»æ“Šäº‹ä»¶ç›£è½å™¨ä½œç‚ºå‚™ç”¨ï¼ˆä½¿ç”¨ capture éšæ®µç¢ºä¿å„ªå…ˆè§¸ç™¼ï¼‰
      monthlyBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        // èª¿ç”¨ handleSubscriptionClick é€²è¡Œç™»å…¥æª¢æŸ¥
        handleSubscriptionClick('lifetime');
        return false;
      }, true);
      
      // ç¢ºä¿æŒ‰éˆ•åœ¨å‹•ç•«å®Œæˆå¾Œä»ç„¶å¯é»æ“Š
      setTimeout(() => {
        monthlyBtn.style.pointerEvents = 'auto';
        monthlyBtn.style.cursor = 'pointer';
      }, 1000);
    }
  });
  
  // æª¢æŸ¥ç™»å…¥ç‹€æ…‹ä¸¦é¡¯ç¤ºç”¨æˆ¶è³‡è¨Šå’Œç™»å‡ºæŒ‰éˆ•
  (function() {
    const token = localStorage.getItem('ipPlanningToken');
    const userStr = localStorage.getItem('ipPlanningUser');
    
    if (token && userStr) {
      try {
        const user = JSON.parse(userStr);
        const userInfo = document.getElementById('subscriptionUserInfo');
        const userAvatar = document.getElementById('subscriptionUserAvatar');
        const userName = document.getElementById('subscriptionUserName');
        const logoutBtn = document.getElementById('subscriptionLogoutBtn');
        
        if (userInfo && userName) {
          userName.textContent = user.name || user.email || 'ç”¨æˆ¶';
          userInfo.style.display = 'flex';
        }
        
        if (userAvatar && user.picture) {
          userAvatar.src = user.picture;
          userAvatar.style.display = 'block';
        }
        
        if (logoutBtn) {
          logoutBtn.style.display = 'block';
        }
      } catch (e) {
        console.warn('ç„¡æ³•è§£æç”¨æˆ¶è³‡æ–™:', e);
      }
    }
  })();
  
  // è™•ç†è¨‚é–±æŒ‰éˆ•é»æ“Š
  async function handleSubscriptionClick(plan) {
    console.log('Subscription button clicked:', plan);
    
    // æª¢æŸ¥ç™»å…¥ç‹€æ…‹
    const token = localStorage.getItem('ipPlanningToken');
    const loggedIn = !!token;
    
    if (!loggedIn) {
      // æœªç™»å…¥ï¼šå¿…é ˆå…ˆç™»å…¥æ‰èƒ½è¨‚é–±
      alert('è«‹å…ˆç™»å…¥å¾Œå†è¨‚é–±æœå‹™ï¼');
      window.location.href = 'index.html#login';
      return;
    }
    
    // å·²ç™»å…¥ï¼šä½¿ç”¨ API å‹•æ…‹å»ºç«‹è¨‚å–®ï¼ˆè‡ªå‹•æˆæ¬Šï¼‰
    // å°å‘åˆ° checkout.html å¡«å¯«ä»˜æ¬¾è³‡è¨Š
    window.location.href = `checkout.html?plan=${plan}`;
  }
  
  // è™•ç†ç™»å‡º
  function handleSubscriptionLogout() {
    // æ¸…é™¤æ‰€æœ‰ç™»å…¥ç›¸é—œçš„ localStorage
    localStorage.removeItem('ipPlanningToken');
    localStorage.removeItem('ipPlanningRefreshToken');
    localStorage.removeItem('ipPlanningUser');
    localStorage.removeItem('ipPlanningTokenUpdated');
    localStorage.removeItem('subscriptionStatus');
    
    // æ¸…é™¤ CSRF Token ç·©å­˜
    if (window.Api && window.Api.clearCsrfToken) {
      window.Api.clearCsrfToken();
    }
    
    // è·³è½‰åˆ°é¦–é 
    window.location.href = 'index.html';
  }
</script>

</body>
</html>
