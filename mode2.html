<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    
    <!-- Primary SEO Meta Tags -->
    <title>AIé¡§å• - ReelMind AI çŸ­å½±éŸ³æ™ºèƒ½é«” | AI çŸ­å½±éŸ³å‰µä½œæŒ‡å° Ã— ç­–ç•¥å»ºè­° Ã— å°ˆæ¥­é¡§å•</title>
    <meta name="title" content="AIé¡§å• - ReelMind AI çŸ­å½±éŸ³æ™ºèƒ½é«” | AI çŸ­å½±éŸ³å‰µä½œæŒ‡å° Ã— ç­–ç•¥å»ºè­° Ã— å°ˆæ¥­é¡§å•" />
    <meta name="description" content="ReelMind AI é¡§å•åŠŸèƒ½ï¼šé€éæ·±åº¦å°è©±ç²å¾—å°ˆæ¥­çš„çŸ­å½±éŸ³å‰µä½œæŒ‡å°ã€å¸³è™Ÿå®šä½ç­–ç•¥ã€é¸é¡Œå»ºè­°ã€è…³æœ¬å‰µä½œæŒ‡å°ã€‚æ”¯æ´ IGã€TikTokã€YouTube Shortsã€‚" />
    <meta name="keywords" content="AIçŸ­å½±éŸ³,AIé¡§å•,çŸ­å½±éŸ³å‰µä½œæŒ‡å°,å¸³è™Ÿå®šä½ç­–ç•¥,AIçŸ­å½±éŸ³å¹³å°" />
    <meta name="author" content="ReelMind AI" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="zh-Hant" />
    <link rel="canonical" href="https://reelmind.aijob.com.tw/mode2.html" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://reelmind.aijob.com.tw/mode2.html" />
    <meta property="og:title" content="AIé¡§å• - ReelMind AI çŸ­å½±éŸ³æ™ºèƒ½é«”" />
    <meta property="og:description" content="é€éæ·±åº¦å°è©±ç²å¾—å°ˆæ¥­çš„çŸ­å½±éŸ³å‰µä½œæŒ‡å°ã€å¸³è™Ÿå®šä½ç­–ç•¥ã€é¸é¡Œå»ºè­°ã€‚" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="AIé¡§å• - ReelMind AI çŸ­å½±éŸ³æ™ºèƒ½é«”" />
    <meta name="twitter:description" content="é€éæ·±åº¦å°è©±ç²å¾—å°ˆæ¥­çš„çŸ­å½±éŸ³å‰µä½œæŒ‡å°ã€å¸³è™Ÿå®šä½ç­–ç•¥ã€é¸é¡Œå»ºè­°ã€‚" />
    
    <!-- HTTP å¿«å–æ¨™é ­ -->
    <meta http-equiv="Cache-Control" content="public, max-age=3600">
    <meta http-equiv="Expires" content="3600">
    
    <!-- Favicon: ReelMind Logo -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="assets/images/android-chrome-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="assets/images/android-chrome-512x512.png" />
    <link rel="shortcut icon" href="assets/images/favicon.ico" />
    
    <!-- Markdown å’Œèªæ³•é«˜äº®å‡½å¼åº« -->
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    
    <!-- Font Awesome åœ–æ¨™åº« -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <!-- CSS æ–‡ä»¶ -->
    <link rel="stylesheet" href="assets/css/variables.css" />
    <link rel="stylesheet" href="assets/css/animations.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    
    <!-- Mode2ï¼ˆAIé¡§å•ï¼‰å°ˆç”¨æ¨£å¼ï¼ˆå¾ index.html æå–ï¼‰ -->
    <style>
      /* ===== å°èˆªæ¬„æ¨£å¼ï¼ˆé›»è…¦ç‰ˆå’Œæ‰‹æ©Ÿç‰ˆï¼‰ ===== */
      .top-navbar {
        background: var(--navbar-bg);
        border-bottom: 1px solid var(--border-color);
        padding: 16px 24px;
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        box-shadow: 0 1px 3px var(--shadow);
        padding-top: calc(16px + var(--safe-area-inset-top, 0px));
        min-height: 60px;
        position: sticky;
        top: 0;
        z-index: 100;
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }
      
      .navbar-left {
        display: flex;
        align-items: center;
        gap: 24px;
        justify-content: flex-start;
      }
      
      .navbar-title {
        font-size: 30px;
        font-weight: 600;
        color: var(--text-primary);
        text-align: center;
        transition: color 0.3s ease;
        justify-self: center;
      }
      
      .clickable-title {
        cursor: pointer;
        transition: color 0.2s ease;
      }
      
      .clickable-title:hover {
        color: #3b82f6;
      }
      
      .navbar-tabs {
        display: flex;
        gap: 8px;
      }
      
      .navbar-tab {
        padding: 8px 16px;
        border: none;
        background: transparent;
        color: var(--text-secondary);
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
        text-decoration: none;
      }
      
      .navbar-tab.active {
        background: var(--button-bg);
        color: var(--button-text);
      }
      
      .navbar-tab:hover:not(.active) {
        background: var(--bg-tertiary);
      }
      
      .navbar-right {
        display: flex;
        align-items: center;
        gap: 16px;
        justify-content: flex-end;
      }
      
      .user-info {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--text-secondary);
        font-size: 14px;
        transition: color 0.3s ease;
        cursor: pointer;
        padding: 8px 12px;
        border-radius: 8px;
        transition: background 0.2s;
      }
      
      .user-info:hover {
        background: #f3f4f6;
      }
      
      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        border: 2px solid #e5ecef;
        object-fit: cover;
        object-position: center;
      }
      
      .user-name {
        font-size: 14px;
        font-weight: 500;
        color: #374151;
      }
      
      .auth-buttons {
        display: flex;
        gap: 8px;
      }
      
      .login-btn, .logout-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .login-btn {
        background: #3b82f6;
        color: white;
      }
      
      .login-btn:hover {
        background: #2563eb;
      }
      
      .logout-btn {
        background: #ef4444;
        color: white;
      }
      
      .logout-btn:hover {
        background: #dc2626;
      }
      
      /* æ‰‹æ©Ÿç‰ˆæŠ½å±œæŒ‰éˆ• */
      .mobile-drawer-toggle {
        display: none;
        background: none;
        border: none;
        font-size: 24px;
        color: var(--text-primary);
        cursor: pointer;
        padding: 8px;
        margin-right: 12px;
        border-radius: 4px;
        transition: background-color 0.2s;
      }
      
      .mobile-drawer-toggle:hover {
        background-color: #f3f4f6;
      }
      
      .hamburger-icon {
        display: block;
      }
      
      .mobile-drawer-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
      }
      
      .mobile-drawer {
        position: fixed;
        top: 0;
        left: -300px;
        width: 280px;
        height: 100%;
        background: white;
        z-index: 1000;
        transition: left 0.3s ease;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
      }
      
      .mobile-drawer.open {
        left: 0;
      }
      
      .mobile-drawer-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #e5e7eb;
        background: #f8fafc;
      }
      
      .mobile-drawer-header h3 {
        margin: 0;
        font-size: 18px;
        font-weight: 600;
        color: #1f2937;
      }
      
      .mobile-drawer-close {
        background: none;
        border: none;
        font-size: 20px;
        color: #6b7280;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: background-color 0.2s;
      }
      
      .mobile-drawer-close:hover {
        background-color: #e5e7eb;
      }
      
      .mobile-drawer-content {
        padding: 20px 0;
      }
      
      .mobile-drawer-item {
        display: flex;
        align-items: center;
        padding: 16px 20px;
        color: #374151;
        text-decoration: none;
        transition: background-color 0.2s;
        border-left: 3px solid transparent;
      }
      
      .mobile-drawer-item:hover {
        background-color: #f8fafc;
        color: #1f2937;
      }
      
      .mobile-drawer-item.active {
        background-color: #eff6ff;
        color: #3b82f6;
        border-left-color: #3b82f6;
      }
      
      .mobile-drawer-icon {
        font-size: 20px;
        margin-right: 12px;
        width: 24px;
        text-align: center;
      }
      
      .mobile-drawer-text {
        font-size: 16px;
        font-weight: 500;
      }
      
      /* æ¡Œé¢ç‰ˆæ¨£å¼ - éš±è—æ‰‹æ©Ÿç‰ˆæŠ½å±œ */
      @media (min-width: 769px) {
        .mobile-drawer-toggle {
          display: none !important;
        }
        
        .mobile-drawer {
          display: none !important;
        }
        
        .mobile-drawer-overlay {
          display: none !important;
        }
      }
      
      /* éŸ¿æ‡‰å¼è¨­è¨ˆ - æ‰‹æ©Ÿç‰ˆ */
      /* ===== é›»è…¦ç‰ˆï¼ˆæ¡Œé¢ç‰ˆï¼‰ï¼šå›ºå®šé é¢ï¼Œåªè®“å°è©±æ¡†å¯æ»¾å‹• ===== */
      @media (min-width: 769px) {
        /* å›ºå®šé é¢èƒŒæ™¯ï¼Œä¸å…è¨±æ»¾å‹• */
        html, body {
          height: 100vh !important;
          overflow: hidden !important;
          margin: 0 !important;
          padding: 0 !important;
        }
        
        /* ä¸»å…§å®¹å€åŸŸå›ºå®šé«˜åº¦ï¼Œä½¿ç”¨ flex å¸ƒå±€ */
        .mode2-page {
          position: fixed !important;
          top: 60px !important; /* å°èˆªæ¬„é«˜åº¦ */
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          height: calc(100vh - 60px) !important;
          overflow: hidden !important;
          display: flex !important;
          flex-direction: column !important;
          box-sizing: border-box !important;
        }
        
        /* èŠå¤©è¨Šæ¯å€åŸŸå¯æ»¾å‹• */
        #chatMessages {
          flex: 1 1 auto !important;
          overflow-y: auto !important;
          overflow-x: hidden !important;
          -webkit-overflow-scrolling: touch;
          overscroll-behavior: contain;
          min-height: 0 !important;
          padding-bottom: 10px;
        }
        
        /* è¼¸å…¥å€åŸŸå›ºå®šåœ¨åº•éƒ¨ï¼Œå¾€ä¸Šç§»å‹•æ›´å¤š */
        .input-row {
          display: flex !important;
          flex-direction: column !important;
          flex-shrink: 0 !important;
          flex-grow: 0 !important;
          padding: 10px 24px !important;
          margin: 0 !important;
          visibility: visible !important;
          opacity: 1 !important;
          height: auto !important;
          min-height: auto !important;
          max-height: none !important;
          z-index: 100 !important;
          position: relative !important;
          background: transparent !important;
          width: 100% !important;
          box-sizing: border-box !important;
        }
      }
      
      @media (max-width: 768px) {
        /* å›ºå®šé é¢èƒŒæ™¯ï¼Œä¸å…è¨±æ»¾å‹• */
        html, body {
          height: 100vh !important;
          overflow: hidden !important;
          position: fixed !important;
          width: 100% !important;
        }
        
        /* é ‚éƒ¨å°èˆªæ¬„æ‰‹æ©Ÿç‰ˆ */
        .top-navbar {
          padding: 12px 16px;
          padding-top: calc(12px + var(--safe-area-inset-top, 0px));
          flex-wrap: wrap;
          gap: 12px;
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          z-index: 1000;
        }
        
        .navbar-left {
          gap: 16px;
          flex: 1;
          min-width: 0;
        }
        
        .navbar-title {
          font-size: 25px;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          text-align: center;
        }
        
        .top-navbar {
          grid-template-columns: auto 1fr auto;
        }
        
        .navbar-tabs {
          display: none; /* æ‰‹æ©Ÿç‰ˆéš±è—æ¨™ç±¤ï¼Œæ”¹ç”¨åº•éƒ¨å°èˆª */
        }
        
        .navbar-right {
          gap: 8px;
        }
        
        .user-info {
          padding: 6px 12px;
          font-size: 14px;
        }
        
        .user-avatar {
          width: 28px !important;
          height: 28px !important;
        }
        
        .user-name {
          font-size: 14px;
        }
        
        .login-btn, .logout-btn {
          padding: 8px 16px;
          font-size: 14px;
        }
        
        /* æ‰‹æ©Ÿç‰ˆæŠ½å±œæŒ‰éˆ•é¡¯ç¤º */
        .mobile-drawer-toggle {
          display: block !important;
        }
        
        /* ä¸»å…§å®¹å€åŸŸç‚ºå›ºå®šé é¦–ç•™å‡ºç©ºé–“ï¼Œå›ºå®šé«˜åº¦ */
        .mode2-page {
          padding-top: 80px;
          height: 100vh !important;
          overflow: hidden !important;
          display: flex !important;
          flex-direction: column !important;
        }
        
        /* èŠå¤©å®¹å™¨å›ºå®šé«˜åº¦ï¼Œåªè®“è¨Šæ¯å€åŸŸå¯æ»¾å‹• */
        .chat-container {
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        }
        
        /* èŠå¤©è¨Šæ¯å€åŸŸå¯æ»¾å‹• */
        #chatMessages {
          flex: 1;
          overflow-y: auto !important;
          overflow-x: hidden !important;
          -webkit-overflow-scrolling: touch;
          overscroll-behavior: contain;
        }
      }
      
      /* ===== Mode2ï¼šAIé¡§å•æ¨¡å¼æ¨£å¼ ===== */
      .mode2-page {
        width: 100% !important;
        max-width: 100vw !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
        margin: 0 !important;
        padding: 0 !important;
        display: flex !important;
        flex-direction: column !important;
        /* é›»è…¦ç‰ˆå’Œæ‰‹æ©Ÿç‰ˆçš„é«˜åº¦ç”±åª’é«”æŸ¥è©¢æ§åˆ¶ */
      }
      
      /* èªªæ˜æŒ‰éˆ• */
      .instructions-toggle-btn {
        position: fixed;
        top: 90px;
        left: 20px;
        background: #3b82f6;
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 14px;
        font-weight: 500;
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        transition: all 0.2s ease;
        z-index: 1000;
      }
      
      .instructions-toggle-btn:hover {
        background: #2563eb;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
      }
      
      .btn-icon {
        font-size: 16px;
      }
      
      .btn-text {
        font-size: 13px;
      }
      
      /* æŠ½å±œèƒŒæ™¯é®ç½© */
      .drawer-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }
      
      .drawer-overlay.show {
        opacity: 1;
        visibility: visible;
      }
      
      /* èªªæ˜æŠ½å±œ */
      .instructions-drawer {
        position: fixed;
        top: 80px;
        right: -400px;
        width: 400px;
        height: calc(100vh - 80px);
        background: white;
        box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
        transition: right 0.3s ease;
        z-index: 1001;
        display: flex;
        flex-direction: column;
      }
      
      .instructions-drawer.open {
        right: 0;
      }
      
      .drawer-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #e5e7eb;
        background: #f8fafc;
      }
      
      .drawer-header h3 {
        margin: 0;
        font-size: 18px;
        color: #1f2937;
      }
      
      .drawer-close-btn {
        background: none;
        border: none;
        font-size: 20px;
        color: #6b7280;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s;
      }
      
      .drawer-close-btn:hover {
        background: #e5e7eb;
        color: #374151;
      }
      
      .drawer-content {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        color: #374151;
        line-height: 1.6;
      }
      
      .drawer-content p {
        margin: 0 0 16px 0;
      }
      
      .drawer-content ul {
        margin: 0 0 16px 0;
        padding-left: 20px;
      }
      
      .drawer-content li {
        margin-bottom: 8px;
      }
      
      /* æ­¥é©ŸæŒ‡å—æ¨£å¼ */
      .step-guide {
        margin: 16px 0;
      }
      
      .step {
        display: flex;
        align-items: flex-start;
        margin-bottom: 16px;
        padding: 12px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        border-left: 4px solid #4f46e5;
      }
      
      .step-number {
        width: 32px;
        height: 32px;
        background: #4f46e5;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 14px;
        margin-right: 12px;
        flex-shrink: 0;
      }
      
      .step-content {
        flex: 1;
      }
      
      .step-content strong {
        color: #1f2937;
        font-size: 14px;
        display: block;
        margin-bottom: 4px;
      }
      
      .step-content p, .step-content br {
        color: #6b7280;
        font-size: 13px;
        margin: 0;
        line-height: 1.4;
      }
      
      /* èŠå¤©è¨Šæ¯å€åŸŸ */
      #chatMessages {
        flex: 1;
        overflow-y: auto;
        padding: 20px 24px 16px 24px !important; /* å¢åŠ ä¸Šé‚Šè·ï¼Œé¿å…è¢«é é¦–æ“‹åˆ° */
        padding-top: 30px !important; /* é€²ä¸€æ­¥å¢åŠ ä¸Šé‚Šè·ï¼Œç¢ºä¿ç”¨æˆ¶æ¶ˆæ¯ä¸è¢«æ“‹ä½ */
        margin: 0;
        background: transparent;
        border: none;
        border-radius: 0;
        min-height: 0;
        height: auto;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
      }
      
      /* Mode2 è¨Šæ¯æ¡†æ¨£å¼ */
      #chatMessages .message.user {
        display: flex !important;
        flex-direction: row !important;
        align-items: flex-start !important;
        justify-content: flex-end !important;
        margin-bottom: 16px !important;
        margin-top: 8px !important; /* å¢åŠ ä¸Šé‚Šè·ï¼Œç¢ºä¿ä¸è¢«å…¶ä»–å…ƒç´ æ“‹ä½ */
        background: transparent !important;
        margin-left: auto !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
        position: relative !important;
        z-index: 100 !important; /* æé«˜ z-indexï¼Œç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
      }
      
      #chatMessages .message.user .message-content {
        flex: 1 !important;
        background: #dbeafe !important;
        padding: 20px 40px !important;
        padding-left: 50px !important;
        border-radius: 12px !important;
        border: 1px solid #3b82f6 !important;
        color: #1e40af !important;
        line-height: 1.6 !important;
        text-align: right !important;
        margin-right: 12px !important;
        margin-left: 0 !important;
        order: 1 !important;
        font-size: 16px !important;
        box-sizing: border-box !important;
        color: #000000 !important;
        font-size: 14px !important;
        line-height: 1.5 !important;
        min-width: 200px !important;
        position: relative !important;
        z-index: 101 !important; /* æé«˜ z-indexï¼Œç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
        max-width: calc(100% - 50px) !important; /* ç¢ºä¿ä¸æœƒè¶…å‡ºå®¹å™¨ */
      }
      
      #chatMessages .message.user .message-avatar {
        width: 32px !important;
        height: 32px !important;
        border-radius: 50% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        flex-shrink: 0 !important;
        margin-right: 0 !important;
        margin-left: 0 !important;
        background: #3b82f6 !important;
        color: white !important;
        overflow: hidden !important;
        order: 2 !important;
      }
      
      #chatMessages .message.user .message-avatar img {
        width: 100% !important;
        height: 100% !important;
        border-radius: 50% !important;
        object-fit: cover !important;
        display: block !important;
      }
      
      #chatMessages .message.user .message-avatar:has(img) {
        background: transparent !important;
      }
      
      /* Mode2 AI è¨Šæ¯å®¹å™¨æ¨£å¼ */
      #chatMessages .message.ai,
      #chatMessages .message.assistant {
        display: flex !important;
        margin-bottom: 16px !important;
        align-items: flex-start !important;
        background: transparent !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
        position: relative !important;
        z-index: 5 !important;
      }
      
      /* Mode2 AI å°è©±æ³¡æ³¡å…§å®¹æ¨£å¼ */
      #chatMessages .message.ai .message-content,
      #chatMessages .message.assistant .message-content {
        flex: 1 !important;
        background: #f8fafc !important;
        padding: 20px 40px !important;
        border-radius: 12px !important;
        border: 1px solid #e5e7eb !important;
        color: #1f2937 !important;
        margin-left: 12px !important;
        font-size: 16px !important;
        line-height: 1.6 !important;
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji" !important;
        text-align: left !important;
        box-sizing: border-box !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        white-space: pre-wrap !important; /* ä¿ç•™æ›è¡Œç¬¦ */
        color: #0c4a6e !important;
        background: #f0f9ff !important;
        font-size: 14px !important;
        line-height: 1.5 !important;
        position: relative !important;
        z-index: 6 !important;
      }
      
      /* Mode2 AI é ­åƒæ¨£å¼ */
      #chatMessages .message.ai .message-avatar,
      #chatMessages .message.assistant .message-avatar {
        width: 32px !important;
        height: 32px !important;
        border-radius: 50% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-size: 16px !important;
        margin-right: 12px !important;
        flex-shrink: 0 !important;
        background: #10a37f !important;
        color: white !important;
      }
      
      /* Mode2 AI å°è©±æ³¡æ³¡æ®µè½æ¨£å¼ */
      #chatMessages .message.ai .message-content p,
      #chatMessages .message.assistant .message-content p {
        margin: 0 0 6px 0 !important;
        line-height: 1.4 !important;
      }
      
      #chatMessages .message.ai .message-content p:first-child,
      #chatMessages .message.assistant .message-content p:first-child {
        margin-top: 0 !important;
      }
      
      #chatMessages .message.ai .message-content p:last-child,
      #chatMessages .message.assistant .message-content p:last-child {
        margin-bottom: 0 !important;
      }
      
      /* Mode2 AI å°è©±æ³¡æ³¡åˆ—è¡¨æ¨£å¼ */
      #chatMessages .message.ai .message-content ul,
      #chatMessages .message.assistant .message-content ul {
        margin: 8px 0 !important;
        padding-left: 20px !important;
      }
      
      #chatMessages .message.ai .message-content li,
      #chatMessages .message.assistant .message-content li {
        margin: 4px 0 !important;
      }
      
      /* Mode2 typing-indicator æ¨£å¼ */
      #chatMessages .typing-indicator {
        display: flex !important;
        align-items: center !important;
        font-style: italic !important;
        color: #6b7280 !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      #chatMessages .typing-dots {
        display: flex !important;
        margin-left: 10px !important;
      }
      
      #chatMessages .typing-dot {
        width: 6px !important;
        height: 6px !important;
        margin: 0 2px !important;
        background-color: #3b82f6 !important;
        border-radius: 50% !important;
        animation: dot-flashing 1s infinite alternate !important;
      }
      
      #chatMessages .typing-dot:nth-child(2) {
        animation-delay: 0.2s !important;
      }
      
      #chatMessages .typing-dot:nth-child(3) {
        animation-delay: 0.4s !important;
      }
      
      @keyframes dot-flashing {
        0% {
          opacity: 0.3;
        }
        100% {
          opacity: 1;
        }
      }
      
      /* è¼¸å…¥å€åŸŸ */
      .input-row {
        background: transparent;
        border: none;
        padding: 8px 24px 16px 24px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        position: static !important;
        bottom: auto !important;
        left: auto !important;
        right: auto !important;
        z-index: auto !important;
        min-height: auto !important;
        box-shadow: none !important;
        margin: 0 !important;
        height: auto !important;
        border-radius: 0 !important;
        max-height: none !important;
        flex-shrink: 0 !important;
        width: 100% !important;
        box-sizing: border-box !important;
      }
      
      .input-container {
        display: flex;
        gap: 12px;
        align-items: flex-end;
        width: 100%;
        flex-direction: row !important;
      }
      
      .input-wrapper {
        position: relative;
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 120px;
        background: #ffffff;
        border: 1px solid #d1d5db;
        border-radius: 12px;
        padding: 12px;
        gap: 8px;
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }
      
      .input-wrapper:focus-within {
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }
      
      .input-row-inner {
        display: flex;
        gap: 12px;
        align-items: flex-end;
        flex: 1;
      }
      
      .chat-input {
        flex: 1;
        min-height: 44px;
        max-height: 100px;
        padding: 10px 12px;
        border: 1px solid transparent;
        background: transparent;
        border-radius: 8px;
        font-size: 14px;
        resize: vertical;
        outline: none;
        line-height: 1.5;
      }
      
      .chat-input:focus {
        border-color: #3b82f6;
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
      }
      
      .send-btn {
        height: 44px;
        min-width: 44px;
        border-radius: 8px;
        background: #3b82f6;
        color: #ffffff;
        border: none;
        padding: 0 18px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: background-color 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .send-btn:hover:not(:disabled) {
        background: #2563eb;
      }
      
      .send-btn:disabled {
        background: #9ca3af;
        cursor: not-allowed;
      }
      
      /* å¿«é€ŸæŒ‰éˆ• */
      .quick-buttons {
        position: relative;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        padding: 8px 0 0 0;
        margin: 0;
        border-top: 1px solid #e5e7eb;
        background: transparent;
      }
      
      .quick-btn {
        background: transparent;
        border: 1px solid #d1d5db;
        color: #374151;
        padding: 6px 12px;
        border-radius: 16px;
        font-size: 13px;
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;
      }
      
      .quick-btn:hover {
        background: #3b82f6;
        border-color: #3b82f6;
        color: white;
      }
      
      /* æ‰‹æ©Ÿç‰ˆæ¨£å¼ */
      @media (max-width: 768px) {
        .instructions-toggle-btn {
          top: 75px;
          left: 15px;
          padding: 6px 12px;
          font-size: 12px;
        }
        
        .btn-text {
          display: none;
        }
        
        .instructions-drawer {
          width: 100%;
          right: -100%;
          top: 60px;
          height: calc(100vh - 60px);
        }
        
        #chatMessages {
          padding: 16px 12px;
          padding-top: 80px !important; /* æ‰‹æ©Ÿç‰ˆå¢åŠ ä¸Šé‚Šè· */
        }
        
        #chatMessages .message.user .message-content {
          padding: 15px 20px !important;
          padding-left: 30px !important;
          font-size: 14px !important;
          max-width: calc(100% - 40px) !important; /* æ‰‹æ©Ÿç‰ˆä¹Ÿç¢ºä¿ä¸è¶…å‡ºå®¹å™¨ */
          z-index: 101 !important; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
        }
        
        #chatMessages .message.ai .message-content,
        #chatMessages .message.assistant .message-content {
          padding: 15px 20px !important;
          font-size: 14px !important;
        }
        
        #chatMessages .message.user .message-avatar,
        #chatMessages .message.ai .message-avatar,
        #chatMessages .message.assistant .message-avatar {
          width: 28px !important;
          height: 28px !important;
          font-size: 14px !important;
        }
        
        .input-row {
          padding: 8px 12px 16px 12px;
        }
      }
    </style>
    
    <!-- å…±äº« JavaScriptï¼ˆå¿…é ˆæŒ‰é †åºè¼‰å…¥ï¼Œçµ±ä¸€ä½¿ç”¨ defer å±¬æ€§ï¼‰ -->
    <script defer src="assets/js/config.js?v=20251126"></script>
    <script defer src="assets/js/security.js?v=20251120"></script>
    <script defer src="assets/js/auth.js?v=20251120"></script>
    <script defer src="assets/js/api.js?v=20251120"></script>
    <script defer src="assets/js/common.js?v=20251126"></script>
  </head>
  <body class="mode2 fig1">
    <!-- å°èˆªæ¬„ -->
    <div class="top-navbar">
      <div class="navbar-left">
        <button class="mobile-drawer-toggle" onclick="toggleMobileDrawer()">
          <span class="hamburger-icon">â˜°</span>
        </button>
        <div class="navbar-tabs">
          <a href="index.html" class="navbar-tab">é¦–é </a>
          <a href="mode1.html" class="navbar-tab">IPäººè¨­è¦åŠƒ</a>
          <a href="mode3.html" class="navbar-tab">ä¸€éµç”Ÿæˆ</a>
          <a href="index.html#forum" class="navbar-tab">è«–å£‡ä»‹ç´¹</a>
          <a href="index.html#guide" class="navbar-tab">å¯¦æˆ°æŒ‡å—</a>
          <a href="userDB.html" id="userDBTab" class="navbar-tab" style="display:none;">å‰µä½œè€…è³‡æ–™åº«</a>
        </div>
      </div>
      <div class="navbar-title clickable-title" onclick="window.location.href='index.html'">ReelMind</div>
      <div class="navbar-right">
        <div class="user-info" id="userInfo" style="display: none;" onclick="window.location.href='userDB.html'">
          <img id="userAvatar" class="user-avatar" src="" alt="ç”¨æˆ¶é ­åƒ" style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover;">
          <span id="userName" class="user-name"></span>
        </div>
        <div class="auth-buttons" id="authButtons" style="display: none;">
          <button id="loginBtn" class="login-btn" onclick="goToLogin()" style="padding: 8px 16px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer;">ğŸ” ç™»å…¥</button>
        </div>
      </div>
    </div>

    <!-- æ‰‹æ©Ÿç‰ˆæŠ½å±œ -->
    <div class="mobile-drawer-overlay" id="mobileDrawerOverlay" onclick="closeMobileDrawer()"></div>
    <div class="mobile-drawer" id="mobileDrawer">
      <div class="mobile-drawer-header">
        <h3>é¸å–®</h3>
        <button class="mobile-drawer-close" onclick="closeMobileDrawer()">âœ•</button>
      </div>
      <div class="mobile-drawer-content">
        <a href="index.html" class="mobile-drawer-item">
          <span class="mobile-drawer-icon"><i class="fas fa-home"></i></span>
          <span class="mobile-drawer-text">é¦–é </span>
        </a>
        <a href="mode1.html" class="mobile-drawer-item">
          <span class="mobile-drawer-icon"><i class="fas fa-user-tie"></i></span>
          <span class="mobile-drawer-text">IPäººè¨­è¦åŠƒ</span>
        </a>
        <a href="mode3.html" class="mobile-drawer-item">
          <span class="mobile-drawer-icon"><i class="fas fa-magic"></i></span>
          <span class="mobile-drawer-text">ä¸€éµç”Ÿæˆ</span>
        </a>
        <a href="index.html#forum" class="mobile-drawer-item" onclick="window.location.href='index.html#forum'; closeMobileDrawer(); return false;">
          <span class="mobile-drawer-icon"><i class="fas fa-comments"></i></span>
          <span class="mobile-drawer-text">è«–å£‡ä»‹ç´¹</span>
        </a>
        <a href="index.html#guide" class="mobile-drawer-item" onclick="window.location.href='index.html#guide'; closeMobileDrawer(); return false;">
          <span class="mobile-drawer-icon"><i class="fas fa-book-open"></i></span>
          <span class="mobile-drawer-text">å¯¦æˆ°æŒ‡å—</span>
        </a>
        <a href="userDB.html" id="userDBMobileTab" class="mobile-drawer-item" style="display:none;">
          <span class="mobile-drawer-icon"><i class="fas fa-database"></i></span>
          <span class="mobile-drawer-text">å‰µä½œè€…è³‡æ–™åº«</span>
        </a>
      </div>
    </div>

    <!-- Mode2 é é¢å…§å®¹ï¼ˆAIé¡§å•ï¼‰ -->
    <div class="mode2-page">
      <!-- èªªæ˜æŒ‰éˆ• -->
      <div class="instructions-toggle-btn" onclick="toggleInstructionsDrawer()">
        <span class="btn-icon">ğŸ“‹</span>
        <span class="btn-text">ä½¿ç”¨èªªæ˜</span>
      </div>
      
      <!-- èªªæ˜æŠ½å±œèƒŒæ™¯é®ç½© -->
      <div id="drawerOverlay" class="drawer-overlay" onclick="toggleInstructionsDrawer()"></div>
      
      <!-- èªªæ˜æŠ½å±œ -->
      <div id="instructionsDrawer" class="instructions-drawer">
        <div class="drawer-header">
          <h3>å¦‚ä½•ä½¿ç”¨ AI çŸ­å½±éŸ³é¡§å• ğŸš€</h3>
          <button class="drawer-close-btn" onclick="toggleInstructionsDrawer()">âœ•</button>
        </div>
        <div class="drawer-content">
          <p><strong>ğŸ¯ AIçŸ­å½±éŸ³é¡§å•æ¨¡å¼</strong></p>
          <p>é€éèˆ‡AIæ·±åº¦å°è©±ï¼Œç²å¾—å°ˆæ¥­çš„çŸ­å½±éŸ³å‰µä½œæŒ‡å°å’Œç­–ç•¥å»ºè­°ã€‚</p>
          
          <p><strong>ğŸš€ æ“ä½œæ­¥é©Ÿï¼š</strong></p>
          <div class="step-guide">
            <div class="step">
              <div class="step-number">1</div>
              <div class="step-content">
                <strong>æè¿°éœ€æ±‚</strong><br>
                å‘Šè¨´AIä½ çš„ç›®æ¨™ã€å—çœ¾ã€å…§å®¹æ–¹å‘æˆ–é‡åˆ°çš„å•é¡Œ
              </div>
            </div>
            <div class="step">
              <div class="step-number">2</div>
              <div class="step-content">
                <strong>æ·±åº¦å°è©±</strong><br>
                èˆ‡AIé€²è¡Œå¤šè¼ªå°è©±ï¼Œæ·±å…¥æ¢è¨å‰µä½œç­–ç•¥å’ŒåŸ·è¡Œæ–¹æ¡ˆ
              </div>
            </div>
            <div class="step">
              <div class="step-number">3</div>
              <div class="step-content">
                <strong>ç²å¾—å»ºè­°</strong><br>
                AIæä¾›å°ˆæ¥­çš„å¸³è™Ÿå®šä½ã€é¸é¡Œå»ºè­°ã€è…³æœ¬å‰µä½œæŒ‡å°
              </div>
            </div>
            <div class="step">
              <div class="step-number">4</div>
              <div class="step-content">
                <strong>æŒçºŒå„ªåŒ–</strong><br>
                æ ¹æ“šAIå»ºè­°èª¿æ•´å…§å®¹ï¼Œç›´åˆ°é”åˆ°ç†æƒ³æ•ˆæœ
              </div>
            </div>
          </div>
          
          <p><strong>ğŸ’¡ å°ˆæ¥­æœå‹™ï¼š</strong></p>
          <ul>
            <li>ğŸ¯ å¸³è™Ÿå®šä½ç­–ç•¥åˆ†æ</li>
            <li>ğŸ“ å…§å®¹é¸é¡Œå»ºè­°</li>
            <li>âœï¸ è…³æœ¬å‰µä½œæŒ‡å°</li>
            <li>ğŸ“Š æ•¸æ“šåˆ†æè§£è®€</li>
            <li>ğŸš€ çˆ†æ¬¾å…§å®¹ç­–ç•¥</li>
            <li>ğŸ‘¥ å—çœ¾åˆ†ææ´å¯Ÿ</li>
          </ul>
          
          <p><strong>ğŸ’¬ ä½¿ç”¨æŠ€å·§ï¼š</strong></p>
          <p>â€¢ è©³ç´°æè¿°ä½ çš„èƒŒæ™¯å’Œç›®æ¨™<br>
          â€¢ æå‡ºå…·é«”å•é¡Œç²å¾—ç²¾æº–å»ºè­°<br>
          â€¢ å¤šè¼ªå°è©±æ·±å…¥æ¢è¨ç´°ç¯€<br>
          â€¢ å–„ç”¨å¿«é€ŸæŒ‰éˆ•å¿«é€Ÿé–‹å§‹å°è©±</p>
          
          <p><strong>ğŸ“‹ è…³æœ¬çµæ§‹é¸æ“‡ï¼š</strong></p>
          <p>ç•¶ä½ è«‹ AI æä¾›è…³æœ¬å»ºè­°æ™‚ï¼ŒAI æœƒä¸»å‹•è©¢å•ä½ æƒ³è¦çš„è…³æœ¬çµæ§‹ï¼Œæˆ–æä¾›å¤šç¨®çµæ§‹é¸é …ä¾›ä½ é¸æ“‡ï¼š</p>
          <ul>
            <li><strong>A. æ¨™æº–è¡ŒéŠ·ä¸‰æ®µå¼</strong>ï¼šHook â†’ Value â†’ CTAï¼Œé©åˆç”¢å“æ¨å»£</li>
            <li><strong>B. å•é¡Œâ†’è§£æ±ºâ†’è­‰æ˜</strong>ï¼šæ•™è‚²/å»ºç«‹ä¿¡ä»»ï¼Œé©åˆæ•™å­¸å…§å®¹</li>
            <li><strong>C. Beforeâ†’After</strong>ï¼šè¦–è¦ºåå·®/çˆ†é‡ï¼Œé©åˆæ•ˆæœå±•ç¤º</li>
            <li><strong>D. æ•™å­¸çŸ¥è­˜å‹</strong>ï¼šè¿·æ€â†’åŸç†â†’è¦é»â†’è¡Œå‹•ï¼Œé©åˆçŸ¥è­˜ç§‘æ™®</li>
            <li><strong>E. æ•…äº‹æ•˜äº‹å‹</strong>ï¼šèµ·â†’æ‰¿â†’è½‰â†’åˆï¼Œé©åˆå€‹äººå“ç‰Œ</li>
          </ul>
        </div>
      </div>
      
      <!-- èŠå¤©è¨Šæ¯å€åŸŸ -->
      <div id="chatMessages" class="chat-messages">
        <!-- èŠå¤©è¨Šæ¯å°‡åœ¨é€™è£¡å‹•æ…‹æ’å…¥ -->
      </div>
      
      <!-- è¼¸å…¥å€åŸŸ -->
      <div class="input-row">
        <div class="input-container">
          <!-- è¼¸å…¥æ¡†åŒ…è£å™¨ï¼ˆç”¨æ–¼æ”¾ç½®å¿«é€ŸæŒ‰éˆ•ï¼‰ -->
          <div class="input-wrapper">
            <!-- è¼¸å…¥æ¡†å’Œç™¼é€æŒ‰éˆ•åœ¨åŒä¸€è¡Œ -->
            <div class="input-row-inner">
              <textarea id="messageInput" class="chat-input" placeholder="å‘AIé¡§å•æå•..." rows="1"></textarea>
              <button id="sendBtn" class="send-btn" disabled>
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
            <!-- å¿«é€ŸæŒ‰éˆ•å€åŸŸ - æ”¾åœ¨è¼¸å…¥æ¡†å…§åº•éƒ¨ -->
            <div class="quick-buttons" id="quickButtons">
              <button class="quick-btn" data-text="è…³æœ¬çµæ§‹æœ‰å“ªäº›">è…³æœ¬çµæ§‹æœ‰å“ªäº›</button>
              <button class="quick-btn" data-text="ç”Ÿæˆè…³æœ¬">ç”Ÿæˆè…³æœ¬</button>
              <button class="quick-btn" data-text="è¦åŠƒä¸€é€±è…³æœ¬">è¦åŠƒä¸€é€±è…³æœ¬</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Mode2 å°ˆç”¨ JavaScript -->
    <script>
      // API_BASE_URL å·²åœ¨ config.js ä¸­å®šç¾©ç‚ºå…¨å±€è®Šæ•¸
      // é€™è£¡ç›´æ¥ä½¿ç”¨ window.APP_CONFIGï¼Œé¿å…é‡è¤‡è²æ˜
      const API_URL = window.APP_CONFIG?.API_BASE || 'https://api.aijob.com.tw';
      let ipPlanningToken = localStorage.getItem('ipPlanningToken') || '';
      let ipPlanningUser = JSON.parse(localStorage.getItem('ipPlanningUser') || 'null');
      let isSending = false;

      // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
      document.addEventListener('DOMContentLoaded', async function() {
        // æª¢æŸ¥ç™»å…¥ç‹€æ…‹
        if (window.Auth && window.Auth.getToken()) {
          ipPlanningToken = window.Auth.getToken();
        }
        
        // å¾ localStorage æˆ– common.js ç²å–ç”¨æˆ¶è³‡è¨Š
        if (window.ReelMindCommon && window.ReelMindCommon.getUser) {
          ipPlanningUser = window.ReelMindCommon.getUser();
        } else {
          const userStr = localStorage.getItem('ipPlanningUser');
          ipPlanningUser = userStr ? JSON.parse(userStr) : null;
        }
        
        // æª¢æŸ¥èªè­‰å’Œè¨‚é–±ç‹€æ…‹
        if (window.ReelMindCommon && window.ReelMindCommon.checkFeatureAccess) {
          const canAccess = await window.ReelMindCommon.checkFeatureAccess();
          if (!canAccess) {
            return; // checkFeatureAccess å·²ç¶“è™•ç†äº†è·³è½‰
          }
        }
        
        // æ›´æ–°ç”¨æˆ¶è³‡è¨Šé¡¯ç¤º
        updateUserInfo();
        
        // åˆå§‹åŒ–èŠå¤©åŠŸèƒ½
        initChatGPTFeatures();
      });

      // æ›´æ–°ç”¨æˆ¶è³‡è¨Šé¡¯ç¤º
      function updateUserInfo() {
        const userInfo = document.getElementById('userInfo');
        const authButtons = document.getElementById('authButtons');
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const userDBTab = document.getElementById('userDBTab');
        const userDBMobileTab = document.getElementById('userDBMobileTab');
        
        if (ipPlanningUser && ipPlanningToken) {
          if (userInfo) {
            userInfo.style.display = 'flex';
            if (userAvatar && ipPlanningUser.picture) {
              userAvatar.src = ipPlanningUser.picture;
            }
            if (userName) {
              userName.textContent = ipPlanningUser.name || ipPlanningUser.email || 'ç”¨æˆ¶';
            }
          }
          if (authButtons) {
            authButtons.style.display = 'none';
          }
          if (userDBTab) {
            userDBTab.style.display = 'block';
          }
          if (userDBMobileTab) {
            userDBMobileTab.style.display = 'block';
          }
        } else {
          if (userInfo) {
            userInfo.style.display = 'none';
          }
          if (authButtons) {
            authButtons.style.display = 'flex';
          }
          if (userDBTab) {
            userDBTab.style.display = 'none';
          }
          if (userDBMobileTab) {
            userDBMobileTab.style.display = 'none';
          }
        }
      }

      // è·³è½‰åˆ°ç™»å…¥é é¢
      async function goToLogin() {
        if (window.ReelMindCommon && window.ReelMindCommon.goToLogin) {
          await window.ReelMindCommon.goToLogin();
        } else {
          window.location.href = 'index.html';
        }
      }

      // æ‰‹æ©Ÿç‰ˆæŠ½å±œåˆ‡æ›
      function toggleMobileDrawer() {
        const drawer = document.getElementById('mobileDrawer');
        const overlay = document.getElementById('mobileDrawerOverlay');
        
        if (drawer && overlay) {
          const isOpen = drawer.classList.contains('open');
          
          if (isOpen) {
            closeMobileDrawer();
          } else {
            openMobileDrawer();
          }
        }
      }

      function openMobileDrawer() {
        const drawer = document.getElementById('mobileDrawer');
        const overlay = document.getElementById('mobileDrawerOverlay');
        
        if (drawer && overlay) {
          drawer.classList.add('open');
          overlay.style.display = 'block';
          document.body.style.overflow = 'hidden';
        }
      }

      function closeMobileDrawer() {
        const drawer = document.getElementById('mobileDrawer');
        const overlay = document.getElementById('mobileDrawerOverlay');
        
        if (drawer && overlay) {
          drawer.classList.remove('open');
          overlay.style.display = 'none';
          document.body.style.overflow = '';
        }
      }

      // åˆ‡æ›èªªæ˜æŠ½å±œ
      function toggleInstructionsDrawer() {
        const drawer = document.getElementById('instructionsDrawer');
        const overlay = document.getElementById('drawerOverlay');
        
        if (drawer && overlay) {
          const isOpen = drawer.classList.contains('open');
          
          if (isOpen) {
            drawer.classList.remove('open');
            overlay.classList.remove('show');
          } else {
            drawer.classList.add('open');
            overlay.classList.add('show');
          }
        }
      }

      // åˆå§‹åŒ– ChatGPT é¢¨æ ¼åŠŸèƒ½
      function initChatGPTFeatures() {
        try {
          // åˆå§‹åŒ– Markdown æ¸²æŸ“å™¨
          if (typeof initMarkdownRenderer === 'function') {
            initMarkdownRenderer();
          }
        
          // è¨­ç½®è¼¸å…¥æ¡†äº‹ä»¶ç›£è½å™¨
          const messageInput = document.getElementById('messageInput');
          const sendBtn = document.getElementById('sendBtn');
          
          if (messageInput) {
            // è‡ªå‹•èª¿æ•´é«˜åº¦
            messageInput.addEventListener('input', autoResizeTextarea);
            
            // éµç›¤äº‹ä»¶ï¼šEnterç™¼é€ï¼ŒShift+Enteræ›è¡Œ
            messageInput.addEventListener('keydown', (e) => {
              // ç¢ºä¿ç©ºç™½éµä¸æœƒè§¸ç™¼ä»»ä½•æœƒéš±è—å¿«é€ŸæŒ‰éˆ•çš„é‚è¼¯
              if (e.key === ' ') {
                // ç©ºç™½éµæ­£å¸¸è¼¸å…¥ï¼Œä¸åšä»»ä½•è™•ç†
                return;
              }
              
              if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                if (!sendBtn.disabled && !isSending) {
                  handleSendMessage();
                }
              }
            });
          }
          
          if (sendBtn) {
            sendBtn.addEventListener('click', handleSendMessage);
          }
          
          // å¿«é€ŸæŒ‰éˆ•äº‹ä»¶
          const quickButtons = document.getElementById('quickButtons');
          if (quickButtons) {
            quickButtons.addEventListener('click', (e) => {
              if (e.target.classList.contains('quick-btn')) {
                const text = e.target.getAttribute('data-text');
                if (text && messageInput) {
                  messageInput.value = text;
                  autoResizeTextarea();
                  handleSendMessage();
                }
              }
            });
          }
        } catch (error) {
          console.error('åˆå§‹åŒ– ChatGPT åŠŸèƒ½éŒ¯èª¤:', error);
        }
      }

      // è™•ç†ç™¼é€è¨Šæ¯
      async function handleSendMessage() {
        const messageInput = document.getElementById('messageInput');
        if (!messageInput || isSending) return;
        
        const message = messageInput.value.trim();
        if (!message) return;
        
        isSending = true;
        await sendMessage(message);
        isSending = false;
      }

      // å‰µå»ºè¨Šæ¯å…ƒç´ 
      function createMessage(role, content) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${role}`;
        
        const avatarDiv = document.createElement('div');
        avatarDiv.className = 'message-avatar';
        
        if (role === 'user') {
          // å˜—è©¦è¼‰å…¥Googleç”¨æˆ¶é ­åƒ
          const userAvatarImg = document.getElementById('userAvatar');
          if (userAvatarImg && userAvatarImg.src && userAvatarImg.src !== '') {
            const img = document.createElement('img');
            img.src = userAvatarImg.src;
            img.alt = 'ç”¨æˆ¶é ­åƒ';
            img.style.width = '100%';
            img.style.height = '100%';
            img.style.borderRadius = '50%';
            img.style.objectFit = 'cover';
            avatarDiv.appendChild(img);
          } else {
            avatarDiv.textContent = 'ğŸ‘¤';
          }
        } else {
          avatarDiv.textContent = 'ğŸ¤–';
        }
        
        const contentDiv = document.createElement('div');
        contentDiv.className = 'message-content';
        
        if (role === 'assistant' && content) {
          if (window.safeRenderMarkdown) {
            contentDiv.innerHTML = window.safeRenderMarkdown(content);
          } else if (typeof marked !== 'undefined') {
            contentDiv.innerHTML = marked.parse(content);
          } else {
            contentDiv.textContent = content;
          }
          // å°ä»£ç¢¼å¡Šé€²è¡Œèªæ³•é«˜äº®
          if (typeof hljs !== 'undefined') {
            contentDiv.querySelectorAll('pre code').forEach((block) => {
              hljs.highlightElement(block);
            });
          }
        } else if (role === 'user') {
          contentDiv.textContent = content;
        }
        
        messageDiv.appendChild(avatarDiv);
        messageDiv.appendChild(contentDiv);
        
        return messageDiv;
      }

      // å‰µå»ºè¼‰å…¥å‹•ç•«
      function createTypingIndicator() {
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message assistant';
        
        const avatarDiv = document.createElement('div');
        avatarDiv.className = 'message-avatar';
        avatarDiv.textContent = 'ğŸ¤–';
        
        const contentDiv = document.createElement('div');
        contentDiv.className = 'message-content';
        contentDiv.innerHTML = `
          <div class="typing-indicator">
            <span>AIæ­£åœ¨æ€è€ƒä¸­</span>
            <div class="typing-dots">
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
            </div>
          </div>
        `;
        
        messageDiv.appendChild(avatarDiv);
        messageDiv.appendChild(contentDiv);
        
        return messageDiv;
      }

      // è‡ªå‹•èª¿æ•´è¼¸å…¥æ¡†é«˜åº¦
      function autoResizeTextarea() {
        const textarea = document.getElementById('messageInput');
        if (textarea) {
          textarea.style.height = 'auto';
          textarea.style.height = Math.min(textarea.scrollHeight, 200) + 'px';
          
          // æ›´æ–°ç™¼é€æŒ‰éˆ•ç‹€æ…‹
          const sendBtn = document.getElementById('sendBtn');
          if (sendBtn) {
            sendBtn.disabled = textarea.value.trim() === '';
          }
        }
      }

      // ç™¼é€è¨Šæ¯ï¼ˆæ•´åˆåŸæœ‰å¾Œç«¯å’ŒLLMè¨­å®šï¼‰
      async function sendMessage(message) {
        if (!message || !message.trim()) return;
        
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const quickButtons = document.getElementById('quickButtons');
        
        // æ·»åŠ ç”¨æˆ¶è¨Šæ¯
        const userMessage = createMessage('user', message);
        chatMessages.appendChild(userMessage);
        
        // è¨˜éŒ„é•·æœŸè¨˜æ†¶ï¼ˆç”¨æˆ¶è¨Šæ¯ï¼‰
        if (window.recordConversationMessage) {
          try { 
            await window.recordConversationMessage('ai_advisor', 'user', message); 
          } catch (error) {
            console.error('é•·æœŸè¨˜æ†¶å„²å­˜ç•°å¸¸ (AI é¡§å• - user):', error);
          }
        }
        
        // éš±è—å¿«é€ŸæŒ‰éˆ•
        if (quickButtons) {
          quickButtons.style.display = 'none';
        }
        
        // æ¸…ç©ºè¼¸å…¥æ¡†ä¸¦ç¦ç”¨
        messageInput.value = '';
        messageInput.disabled = true;
        sendBtn.disabled = true;
        autoResizeTextarea();
        
        // æ·»åŠ è¼‰å…¥å‹•ç•«
        const typingIndicator = createTypingIndicator();
        chatMessages.appendChild(typingIndicator);
        
        // æ»¾å‹•åˆ°åº•éƒ¨
        chatMessages.scrollTop = chatMessages.scrollHeight;
        
        try {
          // ä½¿ç”¨åŸæœ‰çš„å¾Œç«¯APIå’ŒLLMè¨­å®š
          const endpoint = `${API_URL}/api/chat/stream`;
          const headers = { 'Content-Type': 'application/json' };
          if (ipPlanningToken) {
            headers['Authorization'] = `Bearer ${ipPlanningToken}`;
          }
          
          const response = await fetch(endpoint, {
            method: 'POST',
            headers,
            body: JSON.stringify({
              message: message,
              platform: null,
              topic: null,
              duration: null,
              style: null,
              profile: null,
              history: [],
              user_id: ipPlanningUser?.user_id || null
            })
          });
          
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          
          // ç§»é™¤è¼‰å…¥å‹•ç•«
          chatMessages.removeChild(typingIndicator);
          
          // å‰µå»ºAIå›æ‡‰å®¹å™¨
          const aiMessage = createMessage('assistant', '');
          chatMessages.appendChild(aiMessage);
          
          const contentDiv = aiMessage.querySelector('.message-content');
          
          // è™•ç†ä¸²æµå›æ‡‰
          const reader = response.body.getReader();
          const decoder = new TextDecoder();
          let buffer = '';
          let fullContent = '';
          
          while (true) {
            const { done, value } = await reader.read();
            if (done) break;
            
            buffer += decoder.decode(value, { stream: true });
            const lines = buffer.split('\n');
            buffer = lines.pop();
            
            for (const line of lines) {
              if (line.startsWith('data: ')) {
                const data = line.slice(6);
                if (data === '[DONE]') {
                  // è¨˜éŒ„é•·æœŸè¨˜æ†¶ï¼ˆAI å›è¦†ï¼‰
                  if (window.recordConversationMessage) {
                    try { 
                      await window.recordConversationMessage('ai_advisor', 'assistant', fullContent); 
                    } catch (error) {
                      console.error('é•·æœŸè¨˜æ†¶å„²å­˜ç•°å¸¸ (AI é¡§å• - assistant):', error);
                    }
                  }
                  break;
                }
                
                try {
                  const parsed = JSON.parse(data);
                  if (parsed.content) {
                    fullContent += parsed.content;
                    if (window.safeRenderMarkdown) {
                      contentDiv.innerHTML = window.safeRenderMarkdown(fullContent);
                    } else if (typeof marked !== 'undefined') {
                      contentDiv.innerHTML = marked.parse(fullContent);
                    } else {
                      contentDiv.textContent = fullContent;
                    }
                    
                    // å°ä»£ç¢¼å¡Šé€²è¡Œèªæ³•é«˜äº®
                    if (typeof hljs !== 'undefined') {
                      contentDiv.querySelectorAll('pre code').forEach((block) => {
                        if (!block.classList.contains('hljs')) {
                          hljs.highlightElement(block);
                        }
                      });
                    }
                    
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                  }
                } catch (e) {
                  // å¿½ç•¥è§£æéŒ¯èª¤
                }
              }
            }
          }
          
        } catch (error) {
          console.error('ç™¼é€è¨Šæ¯éŒ¯èª¤:', error);
          
          // ç§»é™¤è¼‰å…¥å‹•ç•«
          if (chatMessages.contains(typingIndicator)) {
            chatMessages.removeChild(typingIndicator);
          }
          
          // é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
          const errorMessage = createMessage('assistant', `æŠ±æ­‰ï¼Œç™¼ç”Ÿäº†éŒ¯èª¤ï¼š${error.message}`);
          chatMessages.appendChild(errorMessage);
        }
        
        // æ¢å¾©è¼¸å…¥æ¡†å’ŒæŒ‰éˆ•
        if (messageInput) {
          messageInput.disabled = false;
          messageInput.value = '';
          messageInput.style.height = 'auto';
          autoResizeTextarea();
        }
        if (sendBtn) {
          sendBtn.disabled = false;
        }
        
        // é¡¯ç¤ºå¿«é€ŸæŒ‰éˆ•
        if (quickButtons) {
          quickButtons.style.display = 'flex';
        }
        
        // æ»¾å‹•åˆ°åº•éƒ¨
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }
    </script>
  </body>
</html>

