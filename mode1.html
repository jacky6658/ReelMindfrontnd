<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
    
    <!-- Primary SEO Meta Tags -->
    <title>IP人設規劃 - ReelMind AI 短影音智能體 | AI 個人品牌定位 × 14天規劃 × 短影音腳本</title>
    <meta name="title" content="IP人設規劃 - ReelMind AI 短影音智能體 | AI 個人品牌定位 × 14天規劃 × 短影音腳本" />
    <meta name="description" content="ReelMind AI IP人設規劃功能：透過深度對話建立個人品牌檔案、14天短影音規劃、今日腳本。支援 IG、TikTok、YouTube Shorts。" />
    <meta name="keywords" content="AI短影音,IP人設規劃,個人品牌定位,短影音規劃,AI短影音平台" />
    <meta name="author" content="ReelMind AI" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="zh-Hant" />
    <link rel="canonical" href="https://reelmind.aijob.com.tw/mode1.html" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://reelmind.aijob.com.tw/mode1.html" />
    <meta property="og:title" content="IP人設規劃 - ReelMind AI 短影音智能體" />
    <meta property="og:description" content="透過深度對話建立個人品牌檔案、14天短影音規劃、今日腳本。" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="IP人設規劃 - ReelMind AI 短影音智能體" />
    <meta name="twitter:description" content="透過深度對話建立個人品牌檔案、14天短影音規劃、今日腳本。" />
    
    <!-- HTTP 快取標頭 -->
    <meta http-equiv="Cache-Control" content="public, max-age=3600">
    <meta http-equiv="Expires" content="3600">
    
    <!-- Favicon: ReelMind Logo -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="assets/images/android-chrome-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="assets/images/android-chrome-512x512.png" />
    <link rel="shortcut icon" href="assets/images/favicon.ico" />
    
    <!-- Markdown 和語法高亮函式庫 -->
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    
    <!-- Font Awesome 圖標庫 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <!-- CSS 文件 -->
    <link rel="stylesheet" href="assets/css/variables.css" />
    <link rel="stylesheet" href="assets/css/animations.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    
    <!-- Mode1/Mode3 專用樣式（從 index.html 提取） -->
    <style>
      /* ===== 導航欄樣式（電腦版和手機版） ===== */
      .top-navbar {
        background: var(--navbar-bg);
        border-bottom: 1px solid var(--border-color);
        padding: 16px 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 1px 3px var(--shadow);
        padding-top: calc(16px + var(--safe-area-inset-top, 0px));
        min-height: 60px;
        position: sticky;
        top: 0;
        z-index: 100;
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }
      
      .navbar-left {
        display: flex;
        align-items: center;
        gap: 24px;
        justify-content: flex-start;
      }
      
      .navbar-title {
        font-size: 30px;
        font-weight: 600;
        color: var(--text-primary);
        text-align: center;
        transition: color 0.3s ease;
        justify-self: center;
      }
      
      .clickable-title {
        cursor: pointer;
        transition: color 0.2s ease;
      }
      
      .clickable-title:hover {
        color: #3b82f6;
      }
      
      .navbar-tabs {
        display: flex;
        gap: 8px;
      }
      
      .navbar-tab {
        padding: 8px 16px;
        border: none;
        background: transparent;
        color: var(--text-secondary);
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
        text-decoration: none;
      }
      
      .navbar-tab.active {
        background: var(--button-bg);
        color: var(--button-text);
      }
      
      .navbar-tab:hover:not(.active) {
        background: var(--bg-tertiary);
      }
      
      .navbar-right {
        display: flex;
        align-items: center;
        gap: 16px;
        justify-content: flex-end;
      }
      
      .user-info {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--text-secondary);
        font-size: 14px;
        transition: color 0.3s ease;
        cursor: pointer;
        padding: 8px 12px;
        border-radius: 8px;
        transition: background 0.2s;
      }
      
      .user-info:hover {
        background: #f3f4f6;
      }
      
      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        border: 2px solid #e5ecef;
        object-fit: cover;
        object-position: center;
      }
      
      .user-name {
        font-size: 14px;
        font-weight: 500;
        color: #374151;
      }
      
      .auth-buttons {
        display: flex;
        gap: 8px;
      }
      
      .login-btn, .logout-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .login-btn {
        background: #3b82f6;
        color: white;
      }
      
      .login-btn:hover {
        background: #2563eb;
      }
      
      .logout-btn {
        background: #ef4444;
        color: white;
      }
      
      .logout-btn:hover {
        background: #dc2626;
      }
      
      /* 手機版抽屜按鈕 */
      .mobile-drawer-toggle {
        display: none;
        background: none;
        border: none;
        font-size: 24px;
        color: var(--text-primary);
        cursor: pointer;
        padding: 8px;
        margin-right: 12px;
        border-radius: 4px;
        transition: background-color 0.2s;
      }
      
      .mobile-drawer-toggle:hover {
        background-color: #f3f4f6;
      }
      
      .hamburger-icon {
        display: block;
      }
      
      .mobile-drawer-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
      }
      
      .mobile-drawer {
        position: fixed;
        top: 0;
        left: -300px;
        width: 280px;
        height: 100%;
        background: white;
        z-index: 1000;
        transition: left 0.3s ease;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
      }
      
      .mobile-drawer.open {
        left: 0;
      }
      
      .mobile-drawer-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #e5e7eb;
        background: #f8fafc;
      }
      
      .mobile-drawer-header h3 {
        margin: 0;
        font-size: 18px;
        font-weight: 600;
        color: #1f2937;
      }
      
      .mobile-drawer-close {
        background: none;
        border: none;
        font-size: 20px;
        color: #6b7280;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: background-color 0.2s;
      }
      
      .mobile-drawer-close:hover {
        background-color: #e5e7eb;
      }
      
      .mobile-drawer-content {
        padding: 20px 0;
      }
      
      .mobile-drawer-item {
        display: flex;
        align-items: center;
        padding: 16px 20px;
        color: #374151;
        text-decoration: none;
        transition: background-color 0.2s;
        border-left: 3px solid transparent;
      }
      
      .mobile-drawer-item:hover {
        background-color: #f8fafc;
        color: #1f2937;
      }
      
      .mobile-drawer-item.active {
        background-color: #eff6ff;
        color: #3b82f6;
        border-left-color: #3b82f6;
      }
      
      .mobile-drawer-icon {
        font-size: 20px;
        margin-right: 12px;
        width: 24px;
        text-align: center;
      }
      
      .mobile-drawer-text {
        font-size: 16px;
        font-weight: 500;
      }
      
      /* 桌面版樣式 - 隱藏手機版抽屜 */
      @media (min-width: 769px) {
        .mobile-drawer-toggle {
          display: none !important;
        }
        
        .mobile-drawer {
          display: none !important;
        }
        
        .mobile-drawer-overlay {
          display: none !important;
        }
      }
      
      /* 響應式設計 - 手機版 */
      /* ===== 電腦版（桌面版）：固定頁面，只讓對話框可滾動 ===== */
      @media (min-width: 769px) {
        /* 固定頁面背景，不允許滾動 */
        html, body {
          height: 100vh !important;
          overflow: hidden !important;
          margin: 0 !important;
          padding: 0 !important;
        }
        
        /* 主內容區域固定高度，使用 flex 布局 */
        .mode1-page {
          position: fixed !important;
          top: 60px !important; /* 導航欄高度 */
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          height: calc(100vh - 60px) !important;
          overflow: hidden !important;
          display: flex !important;
          flex-direction: column !important;
          box-sizing: border-box !important;
          padding: 0 !important;
          padding-top: 40px !important; /* 在頁首下方留出空間 */
          padding-bottom: 0 !important; /* 移除底部 padding，讓輸入欄位固定在底部 */
          background: #ffffff !important;
        }
        
        /* 聊天訊息區域可滾動 - 擴大對話框 */
        .mode1-page #mode1-chatMessages {
          flex: 1 1 auto !important;
          overflow-y: auto !important;
          overflow-x: hidden !important;
          -webkit-overflow-scrolling: touch;
          overscroll-behavior-y: auto; /* 電腦版允許正常滾動到頂部 */
          overscroll-behavior-x: none;
          min-height: 0 !important;
          max-height: none !important;
          padding: 16px 12px !important; /* 手機版減少左右內邊距，讓對話框更居中 */
          margin: 0 !important;
          /* 動態計算底部 padding，為輸入欄位和底部導航欄留出更多空間（考慮 safe-area-inset-bottom） */
          padding-bottom: calc(280px + env(safe-area-inset-bottom, 0px)) !important;
          margin-bottom: 0 !important;
          scroll-behavior: smooth; /* 平滑滾動 */
        }
        
        /* 確保可以滾動到最頂部 */
        .mode1-page #mode1-chatMessages::before {
          content: '';
          display: block;
          height: 1px;
          margin-top: -1px;
        }
        
        /* 輸入區域固定在底部，使用 safe-area-inset-bottom 避免被 iOS Safari 網址欄擋到 */
        .mode1-page .input-row {
          display: flex !important;
          flex-direction: column !important;
          flex-shrink: 0 !important;
          flex-grow: 0 !important;
          padding: 12px 16px !important; /* 手機版減少左右 padding */
          margin: 0 !important;
          visibility: visible !important;
          opacity: 1 !important;
          height: auto !important;
          min-height: auto !important;
          max-height: none !important;
          z-index: 100 !important;
          position: fixed !important; /* 使用 fixed 定位固定在底部 */
          bottom: env(safe-area-inset-bottom, 0px) !important; /* 使用 safe-area-inset-bottom 避免被網址欄擋到 */
          left: 0 !important;
          right: 0 !important;
          background: #ffffff !important; /* 添加背景色，避免被遮擋 */
          width: 100% !important;
          box-sizing: border-box !important;
          /* iOS Safari 優化 */
          -webkit-transform: translateZ(0);
          transform: translateZ(0);
          /* 添加底部邊框，視覺上更清晰 */
          border-top: 1px solid #e5e7eb;
          box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
          /* 添加額外的底部 padding，為 iOS Safari 網址欄留出空間（約 34px） */
          padding-bottom: calc(12px + env(safe-area-inset-bottom, 0px) + 34px) !important;
        }
        
        /* 當輸入框獲得焦點時（鍵盤彈出），網址欄會隱藏，減少 padding 並調整位置 */
        .mode1-page .input-row:focus-within {
          bottom: 0px !important; /* 鍵盤彈出時網址欄隱藏，可以貼底 */
          padding-bottom: calc(12px + env(safe-area-inset-bottom, 0px)) !important; /* 鍵盤彈出時網址欄隱藏，減少 padding */
        }
        
        /* 確保快速按鈕在輸入欄位內顯示 */
        .mode1-page .input-wrapper .quick-buttons {
          display: flex !important;
          visibility: visible !important;
          opacity: 1 !important;
          width: 100% !important;
          margin-bottom: 8px !important;
          order: -1 !important;
        }
        
      }
      
      @media (max-width: 768px) {
        /* 固定頁面背景，不允許滾動 */
        html, body {
          height: 100vh !important;
          height: 100dvh !important; /* 使用動態視窗高度（支援 iOS Safari） */
          overflow: hidden !important;
          position: fixed !important;
          width: 100% !important;
          /* iOS Safari 安全區域 */
          padding: 0 !important; /* 移除 padding，避免下方空白 */
          margin: 0 !important;
        }
        
        /* 當輸入框獲得焦點時，移除 body 的固定定位，避免下方空白 */
        body:has(.mode1-page .input-row:focus-within) {
          position: relative !important;
          height: auto !important;
          overflow: visible !important;
        }
        
        /* 頂部導航欄手機版 */
        .top-navbar {
          padding: 12px 16px;
          padding-top: calc(12px + var(--safe-area-inset-top, 0px));
          flex-wrap: wrap;
          gap: 12px;
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          z-index: 1000;
        }
        
        .navbar-left {
          gap: 16px;
          flex: 1;
          min-width: 0;
        }
        
        .navbar-title {
          font-size: 25px;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          text-align: center;
          position: absolute;
          left: 50%;
          transform: translateX(-50%);
          width: auto;
          max-width: 200px;
        }
        
        .navbar-tabs {
          display: none; /* 手機版隱藏標籤，改用底部導航 */
        }
        
        .navbar-right {
          gap: 8px;
        }
        
        .user-info {
          padding: 6px 12px;
          font-size: 14px;
        }
        
        .user-avatar {
          width: 28px !important;
          height: 28px !important;
        }
        
        .user-name {
          display: none; /* 在手機版隱藏使用者暱稱 */
        }
        
        .login-btn, .logout-btn {
          padding: 8px 16px;
          font-size: 14px;
        }
        
        /* 手機版抽屜按鈕顯示 */
        .mobile-drawer-toggle {
          display: block !important;
        }
        
        /* 主內容區域為固定頁首留出空間，固定高度 */
        .mode1-page {
          padding-top: 80px;
          padding-top: calc(80px + env(safe-area-inset-top, 0px)); /* iOS 安全區域 */
          height: 100vh !important;
          height: 100dvh !important; /* 使用動態視窗高度（支援 iOS Safari） */
          overflow: hidden !important;
          display: flex !important;
          flex-direction: column !important;
        }
        
        /* 聊天容器固定高度，只讓訊息區域可滾動 */
        .mode1-chat-container {
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        }
        
        /* 聊天訊息區域可滾動 */
        #mode1-chatMessages {
          flex: 1;
          overflow-y: auto !important;
          overflow-y: overlay !important; /* iOS Safari 優化 */
          overflow-x: hidden !important;
          -webkit-overflow-scrolling: touch; /* iOS 平滑滾動 */
          overscroll-behavior-y: contain; /* 防止滾動穿透，但允許向上滾動到頂部 */
          overscroll-behavior-x: none; /* 禁止橫向滾動穿透 */
          padding-top: 16px !important; /* 為頁首留出空間，避免對話泡泡被擋到 */
          padding-bottom: calc(280px + env(safe-area-inset-bottom, 0px)) !important; /* 為輸入欄位和底部導航欄留出更多空間 */
          scroll-behavior: smooth; /* 平滑滾動 */
        }
        
        /* 確保可以滾動到最頂部 */
        #mode1-chatMessages::before {
          content: '';
          display: block;
          height: 1px;
          margin-top: -1px;
        }
        
        /* 用戶對話泡泡樣式，確保不被頁首擋到 */
        #mode1-chatMessages .message.user {
          margin-top: 8px !important;
          margin-bottom: 8px !important;
        }
        
        #mode1-chatMessages .message.user .message-content {
          margin-right: 8px !important;
          padding: 16px 20px !important;
          padding-left: 24px !important;
          max-width: 100% !important;
        }
      }
      
      /* ===== 模式3：IP人設規劃模式樣式 ===== */
      .mode1-page {
        min-height: 100vh;
        background: transparent;
        padding: 0;
        position: relative;
        width: 100%;
        /* 電腦版和手機版的高度和布局由媒體查詢控制 */
        display: flex;
        flex-direction: column;
      }
      
      .mode1-fixed {
        position: relative;
        width: 100%;
        min-height: calc(100vh - 60px);
        background: transparent;
      }
      
      /* IP人設規劃使用說明按鈕和抽屜樣式 */
      .mode1-instructions-btn-container {
        position: fixed;
        top: 100px; /* 調整位置，配合 padding-top: 40px */
        left: 20px;
        z-index: 1002;
      }
      
      .mode1-results-btn-container {
        position: fixed;
        top: 100px; /* 調整位置，配合 padding-top: 40px */
        left: 120px;
        z-index: 1002;
      }
      
      /* 手機版：按鈕應該在導航列之下 */
      @media (max-width: 768px) {
        .mode1-instructions-btn-container,
        .mode1-results-btn-container {
          top: calc(80px + env(safe-area-inset-top, 0px)) !important; /* 在導航列下方 */
          z-index: 999 !important; /* 低於導航列的 z-index: 1000 */
        }
      }
      
      .mode1-instructions-btn, .mode1-results-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px 16px;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        white-space: nowrap; /* 防止文字換行 */
        overflow: visible; /* 確保文字不被裁切 */
      }
      
      .mode1-instructions-btn {
        background: #4f46e5;
      }
      
      .mode1-instructions-btn:hover {
        background: #4338ca;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(79, 70, 229, 0.4);
      }
      
      .mode1-results-btn {
        background: #10b981;
      }
      
      .mode1-results-btn:hover {
        background: #059669;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(16, 185, 129, 0.4);
      }
      
      /* 抽屜樣式（手機版） */
      .mode1-instructions-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 9998;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }
      
      .mode1-instructions-overlay.open {
        opacity: 1;
        visibility: visible;
      }
      
      /* 使用說明 Modal 彈跳視窗樣式（桌面版和手機版都使用居中彈出） */
      .mode1-instructions-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        width: 90%;
        max-width: 600px;
        height: auto;
        max-height: 85vh;
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        z-index: 10001;
        transition: transform 0.3s ease, opacity 0.3s ease;
        opacity: 0;
        visibility: hidden;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      
      .mode1-instructions-modal.open {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
        visibility: visible;
      }
      
      /* 手機版：調整 Modal 大小 */
      @media (max-width: 768px) {
        .mode1-instructions-modal {
          width: 95%;
          max-width: none;
          max-height: 90vh;
          border-radius: 12px;
        }
      }
      
      /* 確保內容區域可以滾動 */
      .mode1-instructions-modal-content {
        flex: 1;
        overflow-y: auto;
        overflow-x: hidden;
      }
      
      /* 一鍵生成 Modal 彈出視窗樣式 */
      .mode1-oneclick-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s, visibility 0.3s;
        z-index: 100000; /* 設置一個比 toast message 略低的 z-index */
      }
      
      .mode1-oneclick-modal-overlay.open {
        opacity: 1;
        visibility: visible;
      }
      
      .mode1-oneclick-modal {
        background: white;
        border-radius: 16px;
        width: 100%;
        max-width: 1600px; /* 電腦版增加寬度 */
        max-height: 95vh; /* 電腦版增加高度 */
        max-height: 95dvh; /* 使用動態視窗高度（支援 iOS Safari） */
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        transform: scale(0.9);
        transition: transform 0.3s ease;
        /* iOS Safari 安全區域支援 */
        border-radius: 16px 16px 0 0; /* 手機版底部圓角移除 */
        position: relative; /* 確保定位正確 */
        margin: auto; /* 確保居中 */
      }
      
      /* 電腦版（大螢幕）優化 */
      @media (min-width: 1400px) {
        .mode1-oneclick-modal {
          max-width: 1800px;
          max-height: 96vh;
          max-height: 96dvh;
        }
      }
      
      .mode1-oneclick-modal-overlay.open .mode1-oneclick-modal {
        transform: scale(1);
      }
      
      /* 防止儲存時觸發縮放動畫 */
      .mode1-oneclick-modal-overlay.open .mode1-oneclick-modal.saving {
        transform: scale(1) !important;
        transition: none !important;
      }
      
      /* 手機版：防止儲存時視窗變化 */
      @media (max-width: 768px) {
        .mode1-oneclick-modal-overlay.open .mode1-oneclick-modal.saving {
          transform: translateY(0) !important; /* 手機版保持位置不變 */
          transition: none !important;
        }
        
        /* 防止所有按鈕點擊時觸發視窗動態調整 */
        .mode1-oneclick-modal-overlay.open .mode1-oneclick-modal {
          transform: translateY(0) !important; /* 固定位置，不允許動態調整 */
          transition: transform 0.3s ease !important; /* 保持平滑過渡 */
        }
      }
      
      /* 電腦版：防止按鈕點擊時視窗移動 */
      @media (min-width: 769px) {
        .mode1-oneclick-modal-overlay.open .mode1-oneclick-modal {
          transform: scale(1) !important; /* 固定縮放，不允許動態調整 */
          transition: transform 0.3s ease !important; /* 保持平滑過渡 */
        }
      }
      
      .mode1-oneclick-modal-header {
        padding: 24px 32px;
        border-bottom: 1px solid #e5e7eb;
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .mode1-oneclick-modal-header h2 {
        margin: 0;
        font-size: 24px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      
      /* 切換標籤樣式 */
      .mode1-oneclick-tabs {
        display: flex;
        background: #f8fafc;
        border-bottom: 1px solid #e5e7eb;
        padding: 0 32px;
      }
      
      .mode1-oneclick-tab {
        flex: 1;
        padding: 16px 24px;
        background: none;
        border: none;
        border-bottom: 3px solid transparent;
        color: #6b7280;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        min-height: 44px; /* iOS 最小觸控目標 */
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      .mode1-oneclick-tab:hover {
        color: #3b82f6;
        background: rgba(59, 130, 246, 0.05);
      }
      
      .mode1-oneclick-tab.active {
        color: #3b82f6;
        border-bottom-color: #3b82f6;
        background: white;
      }
      
      /* 標籤內容區域 */
      .mode1-oneclick-tab-content {
        display: none;
      }
      
      .mode1-oneclick-tab-content.active {
        display: block;
      }
      
      /* 過往紀錄容器 */
      .mode1-oneclick-history-container {
        padding: 24px;
        max-height: calc(95vh - 200px);
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }
      
      .mode1-oneclick-history-section {
        margin-bottom: 32px;
      }
      
      .mode1-oneclick-history-section-title {
        font-size: 18px;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 16px;
        padding-bottom: 8px;
        border-bottom: 2px solid #e5e7eb;
      }
      
      .mode1-oneclick-history-item {
        background: white;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 16px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        border: 1px solid #e5e7eb;
        transition: all 0.2s ease;
      }
      
      .mode1-oneclick-history-item:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }
      
      .mode1-oneclick-history-item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }
      
      .mode1-oneclick-history-item-title-wrapper {
        display: flex;
        align-items: center;
        gap: 8px;
        flex: 1;
        min-width: 0;
        position: relative;
      }
      
      .mode1-oneclick-history-item-title {
        font-size: 16px;
        font-weight: 600;
        color: #1f2937;
        flex: 1;
        min-width: 0;
        word-break: break-word;
        padding: 2px 0;
      }
      
      .mode1-oneclick-history-item-title-input {
        font-size: 16px;
        font-weight: 600;
        color: #1f2937;
        background: #ffffff;
        border: 2px solid #3b82f6;
        border-radius: 6px;
        padding: 4px 8px;
        position: absolute;
        left: 0;
        top: 0;
        width: calc(100% - 100px);
        min-width: 200px;
        max-width: 400px;
        outline: none;
        transition: border-color 0.2s, box-shadow 0.2s;
        z-index: 10;
      }
      
      .mode1-oneclick-history-item-title-input:focus {
        border-color: #2563eb;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }
      
      .edit-title-icon,
      .save-title-icon,
      .cancel-title-icon {
        font-size: 14px;
        color: #6b7280;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: color 0.2s, background-color 0.2s;
        flex-shrink: 0;
      }
      
      .edit-title-icon:hover {
        color: #3b82f6;
        background-color: #eff6ff;
      }
      
      .save-title-icon {
        color: #10b981;
      }
      
      .save-title-icon:hover {
        color: #059669;
        background-color: #d1fae5;
      }
      
      .cancel-title-icon {
        color: #ef4444;
      }
      
      .cancel-title-icon:hover {
        color: #dc2626;
        background-color: #fee2e2;
      }
      
      .mode1-oneclick-history-item-date {
        font-size: 12px;
        color: #9ca3af;
      }
      
      .mode1-oneclick-history-item-content {
        color: #4b5563;
        line-height: 1.6;
        max-height: 200px;
        overflow: hidden;
        position: relative;
      }
      
      .mode1-oneclick-history-item-content.expanded {
        max-height: none;
      }
      
      .mode1-oneclick-history-item-actions {
        display: flex;
        gap: 8px;
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid #e5e7eb;
        justify-content: flex-start; /* 確保按鈕從左對齊，不會因為內容變化而移動 */
        width: 100%; /* 固定寬度，防止觸發視窗調整 */
        box-sizing: border-box; /* 包含 padding 和 border */
        flex-wrap: wrap; /* 手機版允許換行 */
      }
      
      .mode1-oneclick-history-item-btn {
        flex: 1 1 0; /* 平均分配空間，允許縮小和放大 */
        min-width: 0; /* 允許縮小到0，配合 flex: 1 使用 */
        max-width: none; /* 移除最大寬度限制 */
        padding: 8px 12px; /* 減少 padding，讓按鈕更緊湊 */
        border: 1px solid #d1d5db;
        border-radius: 6px;
        background: white;
        color: #374151;
        font-size: 14px;
        cursor: pointer;
        transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease; /* 只過渡顏色，不包含 transform */
        min-height: 36px;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
        white-space: nowrap; /* 防止文字換行 */
        overflow: hidden; /* 隱藏溢出文字 */
        text-overflow: ellipsis; /* 溢出顯示省略號 */
        box-sizing: border-box; /* 包含 padding 和 border */
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      /* 手機版：調整按鈕大小和間距 */
      @media (max-width: 768px) {
        .mode1-oneclick-history-item-actions {
          gap: 6px; /* 減少間距 */
          padding-top: 10px;
          margin-top: 10px;
        }
        
        .mode1-oneclick-history-item-btn {
          flex: 1 1 calc(50% - 3px); /* 每行兩個按鈕，考慮 gap */
          min-width: calc(50% - 3px); /* 確保每行兩個按鈕 */
          max-width: calc(50% - 3px); /* 確保每行兩個按鈕 */
          padding: 10px 8px; /* 增加垂直 padding，減少水平 padding */
          font-size: 13px; /* 稍微減小字體 */
          min-height: 40px; /* 增加最小高度，確保觸控目標足夠大 */
        }
        
        /* 刪除按鈕特殊處理 */
        .mode1-oneclick-history-item-btn.danger {
          flex: 1 1 calc(50% - 3px);
          min-width: calc(50% - 3px);
          max-width: calc(50% - 3px);
        }
      }
      
      .mode1-oneclick-history-item-btn:hover {
        background: #f9fafb;
        border-color: #9ca3af;
      }
      
      .mode1-oneclick-history-item-btn.primary {
        background: #3b82f6;
        color: white;
        border-color: #3b82f6;
      }
      
      .mode1-oneclick-history-item-btn.primary:hover {
        background: #2563eb;
        border-color: #2563eb;
      }
      
      /* 選擇按鈕樣式 */
      .mode1-oneclick-history-item-btn.select {
        background: #3b82f6;
        color: white;
        border-color: #3b82f6;
      }
      
      .mode1-oneclick-history-item-btn.select:hover {
        background: #2563eb;
        border-color: #2563eb;
      }
      
      .mode1-oneclick-history-item-btn.select.selected {
        background: #10b981;
        border-color: #10b981;
      }
      
      .mode1-oneclick-history-item-btn.select.selected:hover {
        background: #059669;
        border-color: #059669;
      }
      
      /* 選擇設定區域樣式 */
      .mode1-selected-settings {
        background: #f8fafc;
        border-bottom: 1px solid #e5e7eb;
        padding: 20px 24px;
        margin-bottom: 0;
      }
      
      .mode1-selected-settings-header h3 {
        margin: 0 0 16px 0;
        font-size: 16px;
        font-weight: 600;
        color: #1f2937;
      }
      
      .mode1-selected-settings-content {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 16px;
      }
      
      .mode1-selected-setting-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        background: white;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
      }
      
      .mode1-selected-label {
        font-size: 14px;
        font-weight: 500;
        color: #6b7280;
        min-width: 80px;
      }
      
      .mode1-selected-value {
        flex: 1;
        font-size: 14px;
        color: #1f2937;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      
      .mode1-selected-remove {
        width: 24px;
        height: 24px;
        border: none;
        background: #ef4444;
        color: white;
        border-radius: 50%;
        cursor: pointer;
        font-size: 18px;
        line-height: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s ease;
        flex-shrink: 0;
      }
      
      .mode1-selected-remove:hover {
        background: #dc2626;
      }
      
      .mode1-use-settings-btn {
        width: 100%;
        padding: 14px 24px;
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        min-height: 44px;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      .mode1-use-settings-btn:hover {
        background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      }
      
      .mode1-use-settings-btn:active {
        transform: translateY(0);
      }
      
      .mode1-oneclick-modal-close {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        font-size: 24px;
        width: 44px; /* iOS 最小觸控目標 44x44px */
        height: 44px;
        min-width: 44px; /* 確保最小尺寸 */
        min-height: 44px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        -webkit-tap-highlight-color: transparent; /* 移除 iOS 點擊高亮 */
        touch-action: manipulation; /* 優化觸控響應 */
      }
      
      .mode1-oneclick-modal-close:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: rotate(90deg);
      }
      
      .mode1-oneclick-modal-content {
        flex: 1;
        overflow-y: auto;
        overflow-y: overlay; /* iOS Safari 優化 */
        -webkit-overflow-scrolling: touch; /* iOS 平滑滾動 */
        overscroll-behavior: contain; /* 防止滾動穿透 */
        padding: 32px;
        padding: calc(32px + env(safe-area-inset-top, 0px)) calc(32px + env(safe-area-inset-right, 0px)) calc(32px + env(safe-area-inset-bottom, 0px)) calc(32px + env(safe-area-inset-left, 0px));
        background: #f8fafc;
      }
      
      .mode1-oneclick-generate-all-btn {
        width: 100%;
        padding: 16px 24px;
        min-height: 48px; /* iOS 最小觸控目標 */
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        -webkit-tap-highlight-color: transparent; /* 移除 iOS 點擊高亮 */
        touch-action: manipulation; /* 優化觸控響應 */
      }
      
      .mode1-oneclick-generate-all-btn:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
      }
      
      .mode1-oneclick-generate-all-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }
      
      .mode1-oneclick-results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 24px;
      }
      
      @media (max-width: 768px) {
        .mode1-oneclick-results-grid {
          grid-template-columns: 1fr;
          gap: 12px;
        }
        
        .mode1-oneclick-modal-overlay {
          padding: 0;
          align-items: flex-end; /* 手機版從底部彈出 */
          -webkit-overflow-scrolling: touch; /* iOS 平滑滾動 */
        }
        
        .mode1-oneclick-modal {
          max-width: 100%;
          max-height: 85vh;
          max-height: 85dvh; /* iOS Safari 動態視窗高度，降低高度以適配手機 */
          border-radius: 20px 20px 0 0;
          padding-bottom: env(safe-area-inset-bottom, 0px); /* iOS 安全區域 */
          width: 100%;
          transform: translateY(100%); /* 初始位置在底部 */
          transition: transform 0.3s ease;
        }
        
        .mode1-oneclick-modal-overlay.open .mode1-oneclick-modal {
          transform: translateY(0); /* 打開時滑上來 */
        }
        
        .mode1-oneclick-modal-header {
          padding: 16px;
          padding-top: calc(16px + env(safe-area-inset-top, 0px)); /* 安全區域 */
          border-radius: 20px 20px 0 0;
        }
        
        .mode1-oneclick-modal-header h2 {
          font-size: 18px; /* 手機版標題字體縮小 */
        }
        
        .mode1-oneclick-tabs {
          padding: 0 16px;
        }
        
        .mode1-oneclick-tab {
          padding: 12px 16px;
          font-size: 14px; /* 手機版標籤字體縮小 */
        }
        
        .mode1-oneclick-modal-content {
          padding: 12px;
          padding-bottom: calc(12px + env(safe-area-inset-bottom, 0px)); /* 安全區域 */
          max-height: calc(85vh - 120px); /* 減去標題和標籤高度 */
          max-height: calc(85dvh - 120px);
        }
        
        .mode1-oneclick-generate-all-btn {
          padding: 12px 16px;
          font-size: 14px; /* 手機版按鈕字體縮小 */
          margin-bottom: 16px;
          min-height: 44px;
        }
        
        .mode1-oneclick-result-card {
          padding: 12px;
          border-radius: 8px;
          width: 100% !important;
          max-width: 100% !important;
          box-sizing: border-box !important;
          overflow-x: hidden !important;
        }
        
        .mode1-oneclick-result-card-header {
          margin-bottom: 12px;
          padding-bottom: 8px;
        }
        
        .mode1-oneclick-result-card-title {
          font-size: 16px; /* 手機版卡片標題縮小 */
        }
        
        .mode1-oneclick-result-content {
          font-size: 13px; /* 手機版內容字體縮小 */
          line-height: 1.5;
          min-height: 150px;
          width: 100% !important;
          max-width: 100% !important;
          box-sizing: border-box !important;
          word-wrap: break-word !important;
          word-break: break-word !important;
          overflow-wrap: break-word !important;
          overflow-x: hidden !important;
        }
        
        .mode1-oneclick-result-content p {
          font-size: 13px;
          margin-bottom: 8px;
          max-width: 100% !important;
          word-wrap: break-word !important;
          word-break: break-word !important;
          overflow-wrap: break-word !important;
        }
        
        .mode1-oneclick-result-content ul,
        .mode1-oneclick-result-content ol {
          font-size: 13px;
          padding-left: 20px;
          margin-bottom: 8px;
          max-width: 100% !important;
          box-sizing: border-box !important;
        }
        
        .mode1-oneclick-result-content li {
          font-size: 13px;
          margin-bottom: 6px;
          max-width: 100% !important;
          word-wrap: break-word !important;
          word-break: break-word !important;
          overflow-wrap: break-word !important;
        }
        
        .mode1-oneclick-result-content h1,
        .mode1-oneclick-result-content h2,
        .mode1-oneclick-result-content h3,
        .mode1-oneclick-result-content h4 {
          font-size: 15px; /* 手機版標題字體縮小 */
          margin-top: 12px;
          margin-bottom: 8px;
          max-width: 100% !important;
          word-wrap: break-word !important;
          word-break: break-word !important;
          overflow-wrap: break-word !important;
        }
        
        .mode1-oneclick-action-btn {
          min-height: 44px; /* iOS 最小觸控目標 */
          padding: 10px 14px;
          font-size: 13px; /* 手機版按鈕字體縮小 */
        }
        
        /* 手機版表格優化 */
        .mode1-oneclick-result-content table {
          font-size: 12px;
        }
        
        .mode1-oneclick-result-content table th,
        .mode1-oneclick-result-content table td {
          padding: 6px 8px;
          font-size: 12px;
        }
      }
      
      /* 小手機進一步優化（小於 480px） */
      @media (max-width: 480px) {
        .mode1-oneclick-modal {
          max-height: 80vh;
          max-height: 80dvh;
        }
        
        .mode1-oneclick-modal-header {
          padding: 12px;
          padding-top: calc(12px + env(safe-area-inset-top, 0px));
        }
        
        .mode1-oneclick-modal-header h2 {
          font-size: 16px;
        }
        
        .mode1-oneclick-tabs {
          padding: 0 12px;
        }
        
        .mode1-oneclick-tab {
          padding: 10px 12px;
          font-size: 13px;
        }
        
        .mode1-oneclick-modal-content {
          padding: 10px;
          padding-bottom: calc(10px + env(safe-area-inset-bottom, 0px));
          max-height: calc(80vh - 100px);
          max-height: calc(80dvh - 100px);
        }
        
        .mode1-oneclick-generate-all-btn {
          padding: 10px 14px;
          font-size: 13px;
          margin-bottom: 12px;
        }
        
        .mode1-oneclick-result-card {
          padding: 10px;
        }
        
        .mode1-oneclick-result-card-title {
          font-size: 14px;
        }
        
        .mode1-oneclick-result-content {
          font-size: 12px;
          min-height: 120px;
        }
        
        .mode1-oneclick-result-content p,
        .mode1-oneclick-result-content ul,
        .mode1-oneclick-result-content ol,
        .mode1-oneclick-result-content li {
          font-size: 12px;
        }
        
        .mode1-oneclick-result-content h1,
        .mode1-oneclick-result-content h2,
        .mode1-oneclick-result-content h3,
        .mode1-oneclick-result-content h4 {
          font-size: 14px;
        }
        
        .mode1-oneclick-action-btn {
          padding: 8px 12px;
          font-size: 12px;
        }
        
        .mode1-oneclick-result-content table {
          font-size: 11px;
        }
        
        .mode1-oneclick-result-content table th,
        .mode1-oneclick-result-content table td {
          padding: 4px 6px;
          font-size: 11px;
        }
      }
      
      .mode1-oneclick-result-card {
        background: white;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        border: 2px solid #e5e7eb;
        transition: all 0.3s ease;
      }
      
      .mode1-oneclick-result-card.generating {
        border-color: #3b82f6;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
      }
      
      .mode1-oneclick-result-card.completed {
        border-color: #10b981;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
      }
      
      .mode1-oneclick-result-card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 2px solid #f3f4f6;
      }
      
      .mode1-oneclick-result-card-title {
        font-size: 18px;
        font-weight: 600;
        color: #1f2937;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .mode1-oneclick-result-status {
        font-size: 12px;
        padding: 4px 12px;
        border-radius: 12px;
        font-weight: 500;
      }
      
      .mode1-oneclick-result-status.pending {
        background: #f3f4f6;
        color: #6b7280;
      }
      
      .mode1-oneclick-result-status.generating {
        background: #dbeafe;
        color: #1e40af;
      }
      
      .mode1-oneclick-result-status.completed {
        background: #d1fae5;
        color: #059669;
      }
      
      .mode1-oneclick-result-status.error {
        background: #fee2e2;
        color: #dc2626;
      }
      
      .mode1-oneclick-result-content {
        min-height: 200px;
        color: #6b7280;
        line-height: 1.6;
        overflow-x: visible; /* 手機版改為可見，避免橫向滾動 */
        overflow-y: auto; /* 允許縱向滾動 */
        -webkit-overflow-scrolling: touch; /* iOS 平滑滾動 */
      }
      
      /* 電腦版保持橫向滾動（如果需要） */
      @media (min-width: 769px) {
        .mode1-oneclick-result-content {
          overflow-x: auto;
        }
      }
      
      .mode1-oneclick-result-content.has-content {
        color: #1f2937;
      }
      
      /* 生成結果模態框內的表格樣式 */
      .mode1-oneclick-result-content table {
        width: 100%;
        max-width: 100%; /* 限制最大寬度，防止超出容器 */
        border-collapse: collapse;
        margin: 16px 0;
        font-size: 14px;
        background: #ffffff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #e5e7eb; /* 外框 */
        table-layout: auto; /* 自動調整列寬 */
        box-sizing: border-box; /* 包含邊框和內距 */
      }
      
      .mode1-oneclick-result-content table thead {
        background: #f8fafc;
        border-bottom: 2px solid #e5e7eb;
      }
      
      .mode1-oneclick-result-content table th {
        padding: 14px 18px; /* 增加內距 */
        text-align: left;
        font-weight: 600;
        color: #374151;
        white-space: nowrap;
        border-right: 1px solid #e5e7eb; /* 垂直分隔線 */
        border-bottom: 1px solid #e5e7eb; /* 水平分隔線 */
      }
      
      .mode1-oneclick-result-content table th:last-child {
        border-right: none;
      }
      
      .mode1-oneclick-result-content table tbody tr {
        border-bottom: 1px solid #e5e7eb; /* 行分隔線 */
        transition: background-color 0.2s ease;
      }
      
      .mode1-oneclick-result-content table tbody tr:hover {
        background-color: #f9fafb;
      }
      
      .mode1-oneclick-result-content table tbody tr:last-child {
        border-bottom: none;
      }
      
      .mode1-oneclick-result-content table td {
        padding: 14px 18px; /* 增加內距 */
        color: #4b5563;
        border-right: 1px solid #e5e7eb; /* 垂直分隔線 */
        vertical-align: top;
      }
      
      /* 短影音腳本表格特殊處理：手機版改為自動換行，避免橫向滾動 */
      .mode1-oneclick-result-content-wrapper:has(table) {
        overflow-x: visible; /* 手機版改為可見，允許內容自動換行 */
        -webkit-overflow-scrolling: touch;
        overscroll-behavior-x: contain;
      }
      
      /* 電腦版保持橫向滾動 */
      @media (min-width: 769px) {
        .mode1-oneclick-result-content-wrapper:has(table) {
          overflow-x: auto;
          max-width: 100%; /* 限制最大寬度 */
        }
        
        .mode1-oneclick-result-content-wrapper table {
          min-width: 800px; /* 確保表格有足夠寬度，觸發橫向滾動 */
          max-width: none; /* 允許表格超出容器，觸發橫向滾動 */
        }
        
        .mode1-oneclick-result-content-wrapper table td {
          white-space: nowrap; /* 防止文字換行，強制使用橫向滾動 */
          max-width: 200px; /* 限制單個單元格最大寬度 */
          overflow: hidden;
          text-overflow: ellipsis; /* 超出部分顯示省略號 */
        }
      }
      
      /* 手機版表格自動換行 */
      @media (max-width: 768px) {
        /* 一般內容不允許橫向滾動 */
        .mode1-oneclick-result-content-wrapper {
          overflow-x: hidden !important; /* 禁止橫向滾動 */
          width: 100% !important;
          max-width: 100% !important;
        }
        
        /* 內容文字自動換行 */
        .mode1-oneclick-result-content {
          word-wrap: break-word !important;
          word-break: break-word !important;
          overflow-wrap: break-word !important;
          overflow-x: hidden !important;
          width: 100% !important;
          max-width: 100% !important;
          box-sizing: border-box !important;
        }
        
        .mode1-oneclick-result-content p,
        .mode1-oneclick-result-content li,
        .mode1-oneclick-result-content div {
          word-wrap: break-word !important;
          word-break: break-word !important;
          overflow-wrap: break-word !important;
          max-width: 100% !important;
        }
        
        /* 表格：只有在展開的模態框中才允許橫向滾動 */
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table {
          min-width: 100% !important; /* 手機版表格寬度為 100% */
          width: 100% !important;
          max-width: 100% !important;
          table-layout: fixed !important; /* 固定表格佈局，確保列寬對齊 */
          box-sizing: border-box !important;
        }
        
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table th,
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table td {
          white-space: normal !important; /* 允許文字換行 */
          word-wrap: break-word !important; /* 長文字自動換行 */
          word-break: break-word !important; /* 強制換行 */
          overflow-wrap: break-word !important;
          padding: 8px 6px !important; /* 手機版減少內距 */
          font-size: 12px !important; /* 手機版字體縮小 */
          vertical-align: top !important; /* 頂部對齊 */
        }
        
        /* 確保表格列寬均勻分配 */
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table colgroup,
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table col {
          width: auto !important;
        }
        
        /* 為表格添加列寬分配（如果表格有8列，每列約12.5%） */
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table thead th:nth-child(1),
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table tbody td:nth-child(1) {
          width: 10% !important;
        }
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table thead th:nth-child(2),
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table tbody td:nth-child(2) {
          width: 15% !important;
        }
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table thead th:nth-child(3),
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table tbody td:nth-child(3) {
          width: 10% !important;
        }
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table thead th:nth-child(4),
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table tbody td:nth-child(4) {
          width: 20% !important;
        }
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table thead th:nth-child(5),
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table tbody td:nth-child(5) {
          width: 20% !important;
        }
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table thead th:nth-child(6),
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table tbody td:nth-child(6) {
          width: 15% !important;
        }
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table thead th:nth-child(7),
        .mode1-oneclick-result-content-wrapper:not(.in-expand-modal) table tbody td:nth-child(7) {
          width: 10% !important;
        }
        
        /* 展開模態框中的表格允許橫向滾動 */
        .mode1-expand-modal-content .mode1-oneclick-result-content-wrapper {
          overflow-x: auto !important; /* 展開後允許橫向滾動 */
          -webkit-overflow-scrolling: touch !important;
        }
        
        .mode1-expand-modal-content .mode1-oneclick-result-content-wrapper table {
          min-width: 600px !important; /* 展開後表格最小寬度 */
          width: auto !important;
        }
        
        .mode1-expand-modal-content .mode1-oneclick-result-content-wrapper table td {
          white-space: nowrap !important; /* 展開後表格不換行 */
        }
      }
      
      /* 內容容器 */
      .mode1-oneclick-result-content {
        position: relative;
      }
      
      /* 為表格添加滾動容器 */
      .mode1-oneclick-result-content-wrapper {
        margin: 16px 0;
      }
      
      .mode1-oneclick-result-content-wrapper table {
        margin: 0;
      }
      
      .mode1-oneclick-result-content table td:last-child {
        border-right: none;
      }
      
      /* 展開內容模態視窗樣式 */
      .mode1-expand-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100001; /* 高於生成結果彈跳視窗的 z-index: 100000 */
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
        padding: 20px;
      }
      
      .mode1-expand-modal-overlay.open {
        opacity: 1;
        visibility: visible;
      }
      
      .mode1-expand-modal {
        background: white;
        border-radius: 12px;
        width: 100%;
        max-width: 1200px;
        max-height: 90vh;
        display: flex;
        flex-direction: column;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        transform: scale(0.9);
        transition: transform 0.3s ease;
      }
      
      .mode1-expand-modal-overlay.open .mode1-expand-modal {
        transform: scale(1);
      }
      
      .mode1-expand-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 24px;
        border-bottom: 1px solid #e5e7eb;
        background: #f8fafc;
        border-radius: 12px 12px 0 0;
      }
      
      .mode1-expand-modal-header h3 {
        margin: 0;
        font-size: 20px;
        font-weight: 600;
        color: #1f2937;
      }
      
      .mode1-expand-modal-close {
        background: none;
        border: none;
        font-size: 24px;
        color: #6b7280;
        cursor: pointer;
        padding: 4px 8px;
        border-radius: 6px;
        transition: all 0.2s ease;
        line-height: 1;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .mode1-expand-modal-close:hover {
        background: #e5e7eb;
        color: #374151;
      }
      
      .mode1-expand-modal-content {
        padding: 24px;
        overflow-y: auto;
        overflow-x: hidden; /* 防止橫向滾動 */
        flex: 1;
        color: #374151;
        line-height: 1.6;
        font-size: 16px; /* 電腦版預設字體大小 */
        -webkit-overflow-scrolling: touch; /* iOS 平滑滾動 */
      }
      
      /* 手機版展開模態視窗內容區域 */
      @media (max-width: 768px) {
        .mode1-expand-modal-content {
          padding: 16px;
          overflow-x: hidden !important; /* 手機版強制隱藏橫向滾動 */
        }
      }
      
      .mode1-expand-modal-content p {
        margin: 12px 0;
        font-size: 16px;
      }
      
      .mode1-expand-modal-content h1,
      .mode1-expand-modal-content h2,
      .mode1-expand-modal-content h3,
      .mode1-expand-modal-content h4,
      .mode1-expand-modal-content h5,
      .mode1-expand-modal-content h6 {
        margin: 16px 0 12px 0;
        font-weight: 600;
        color: #1f2937;
      }
      
      .mode1-expand-modal-content h1 {
        font-size: 24px;
      }
      
      .mode1-expand-modal-content h2 {
        font-size: 22px;
      }
      
      .mode1-expand-modal-content h3 {
        font-size: 20px;
      }
      
      .mode1-expand-modal-content h4 {
        font-size: 18px;
      }
      
      .mode1-expand-modal-content ul,
      .mode1-expand-modal-content ol {
        margin: 12px 0;
        padding-left: 24px;
      }
      
      .mode1-expand-modal-content li {
        margin: 6px 0;
        font-size: 16px;
      }
      
      .mode1-expand-modal-content table {
        width: 100%;
        min-width: 800px;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 15px; /* 電腦版表格字體 */
        background: #ffffff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #e5e7eb;
        table-layout: fixed; /* 固定表格布局，確保列對齊 */
      }
      
      /* 手機版展開模態框表格對齊修復 */
      @media (max-width: 768px) {
        .mode1-expand-modal-content table {
          min-width: 100% !important;
          width: 100% !important;
          table-layout: fixed !important; /* 固定表格布局 */
          display: table !important; /* 確保表格顯示 */
        }
        
        .mode1-expand-modal-content table th,
        .mode1-expand-modal-content table td {
          width: auto !important;
          min-width: 0 !important;
          word-wrap: break-word !important;
          overflow-wrap: break-word !important;
          white-space: normal !important; /* 允許換行 */
          padding: 8px 12px !important;
          vertical-align: top !important; /* 頂部對齊 */
        }
        
        /* 確保表格列寬度一致 */
        .mode1-expand-modal-content table colgroup,
        .mode1-expand-modal-content table col {
          display: table-column !important;
        }
      }
      
      .mode1-expand-modal-content table thead {
        background: #f8fafc;
        border-bottom: 2px solid #e5e7eb;
      }
      
      .mode1-expand-modal-content table th {
        padding: 16px 20px; /* 電腦版較大內距 */
        text-align: left;
        font-weight: 600;
        color: #374151;
        white-space: nowrap;
        border-right: 1px solid #e5e7eb;
        border-bottom: 1px solid #e5e7eb;
        font-size: 15px;
      }
      
      .mode1-expand-modal-content table th:last-child {
        border-right: none;
      }
      
      .mode1-expand-modal-content table tbody tr {
        border-bottom: 1px solid #e5e7eb;
      }
      
      .mode1-expand-modal-content table tbody tr:last-child {
        border-bottom: none;
      }
      
      .mode1-expand-modal-content table td {
        padding: 16px 20px; /* 電腦版較大內距 */
        color: #4b5563;
        border-right: 1px solid #e5e7eb;
        vertical-align: top;
        font-size: 15px;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }
      
      .mode1-expand-modal-content table td:last-child {
        border-right: none;
      }
      
      .mode1-expand-modal-content table tbody tr:nth-child(even) {
        background-color: #f9fafb;
      }
      
      /* 平板版（768px - 1024px） */
      @media (min-width: 769px) and (max-width: 1024px) {
        .mode1-expand-modal {
          max-width: 90%;
        }
        
        .mode1-expand-modal-content {
          padding: 20px;
          font-size: 15px;
        }
        
        .mode1-expand-modal-content p {
          font-size: 15px;
        }
        
        .mode1-expand-modal-content h1 {
          font-size: 22px;
        }
        
        .mode1-expand-modal-content h2 {
          font-size: 20px;
        }
        
        .mode1-expand-modal-content h3 {
          font-size: 18px;
        }
        
        .mode1-expand-modal-content h4 {
          font-size: 16px;
        }
        
        .mode1-expand-modal-content li {
          font-size: 15px;
        }
        
        .mode1-expand-modal-content table {
          font-size: 14px;
          min-width: 700px;
        }
        
        .mode1-expand-modal-content table th,
        .mode1-expand-modal-content table td {
          padding: 14px 16px;
          font-size: 14px;
        }
      }
      
      /* 手機版展開模態視窗 */
      @media (max-width: 768px) {
        .mode1-expand-modal-overlay {
          padding: 0;
          align-items: flex-end;
          -webkit-overflow-scrolling: touch;
        }
        
        .mode1-expand-modal {
          max-width: 100%;
          max-height: 90vh;
          max-height: 90dvh; /* iOS Safari 動態視窗高度 */
          border-radius: 20px 20px 0 0;
          padding-bottom: env(safe-area-inset-bottom, 0px);
          transform: translateY(100%);
        }
        
        .mode1-expand-modal-overlay.open .mode1-expand-modal {
          transform: translateY(0);
        }
        
        .mode1-expand-modal-header {
          padding: 16px 20px;
        }
        
        .mode1-expand-modal-header h3 {
          font-size: 18px;
        }
        
        .mode1-expand-modal-close {
          width: 36px;
          height: 36px;
          font-size: 20px;
          min-width: 44px; /* iOS 最小觸控目標 */
          min-height: 44px;
        }
        
        .mode1-expand-modal-content {
          padding: 16px;
          font-size: 14px; /* 手機版較小字體 */
        }
        
        .mode1-expand-modal-content p {
          margin: 10px 0;
          font-size: 14px;
        }
        
        .mode1-expand-modal-content h1 {
          font-size: 20px;
        }
        
        .mode1-expand-modal-content h2 {
          font-size: 18px;
        }
        
        .mode1-expand-modal-content h3 {
          font-size: 16px;
        }
        
        .mode1-expand-modal-content h4 {
          font-size: 15px;
        }
        
        .mode1-expand-modal-content ul,
        .mode1-expand-modal-content ol {
          margin: 10px 0;
          padding-left: 20px;
        }
        
        .mode1-expand-modal-content li {
          margin: 5px 0;
          font-size: 14px;
        }
        
        .mode1-expand-modal-content table {
          font-size: 12px; /* 手機版表格字體 */
          width: 100% !important; /* 強制表格寬度為 100% */
          min-width: 100% !important; /* 移除最小寬度限制 */
          max-width: 100% !important; /* 確保不超出容器 */
          display: table !important; /* 保持表格顯示 */
          overflow-x: visible !important; /* 手機版改為可見，允許內容自動換行 */
          -webkit-overflow-scrolling: touch;
          overscroll-behavior-x: contain;
          margin: 16px 0;
          table-layout: auto !important; /* 自動調整列寬 */
        }
        
        .mode1-expand-modal-content table thead,
        .mode1-expand-modal-content table tbody,
        .mode1-expand-modal-content table tr {
          display: table;
          width: 100%;
          table-layout: auto; /* 自動調整列寬 */
        }
        
        .mode1-expand-modal-content table th {
          padding: 12px 10px; /* 手機版減少內距 */
          font-size: 13px;
          white-space: normal !important; /* 允許標題換行 */
          word-wrap: break-word !important;
          word-break: break-word !important;
        }
        
        .mode1-expand-modal-content table td {
          padding: 12px 10px; /* 手機版減少內距 */
          font-size: 12px;
          white-space: normal !important; /* 允許文字換行 */
          word-wrap: break-word !important;
          word-break: break-word !important;
          overflow-wrap: break-word !important;
        }
      }
      
      /* 小手機版（小於 375px） */
      @media (max-width: 374px) {
        .mode1-expand-modal-content {
          padding: 12px;
          font-size: 13px;
        }
        
        .mode1-expand-modal-content p {
          font-size: 13px;
        }
        
        .mode1-expand-modal-content h1 {
          font-size: 18px;
        }
        
        .mode1-expand-modal-content h2 {
          font-size: 16px;
        }
        
        .mode1-expand-modal-content h3 {
          font-size: 15px;
        }
        
        .mode1-expand-modal-content h4 {
          font-size: 14px;
        }
        
        .mode1-expand-modal-content li {
          font-size: 13px;
        }
        
        .mode1-expand-modal-content table {
          font-size: 11px;
          min-width: 550px;
        }
        
        .mode1-expand-modal-content table th,
        .mode1-expand-modal-content table td {
          padding: 8px 10px;
          font-size: 11px;
        }
      }
      
      .mode1-oneclick-result-content table tbody tr:nth-child(even) {
        background-color: #f9fafb; /* 斑馬紋 */
      }
      
      .mode1-oneclick-result-content table tbody tr:nth-child(even):hover {
        background-color: #f3f4f6;
      }
      
      /* 響應式表格（手機版） */
      @media (max-width: 768px) {
        .mode1-oneclick-result-content table {
          font-size: 12px;
          min-width: 500px;
        }
        
        .mode1-oneclick-result-content table th,
        .mode1-oneclick-result-content table td {
          padding: 10px 12px;
        }
      }
      
      .mode1-oneclick-result-actions {
        display: flex;
        gap: 8px;
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid #e5e7eb;
        justify-content: flex-start; /* 確保按鈕從左對齊，不會因為內容變化而移動 */
        width: 100%; /* 固定寬度，防止觸發視窗調整 */
        box-sizing: border-box; /* 包含 padding 和 border */
      }
      
      .mode1-oneclick-action-btn {
        flex: 1 1 0; /* 平均分配空間，允許縮小和放大 */
        min-width: 80px; /* 設定最小寬度，確保按鈕不會太小 */
        max-width: 150px; /* 設定最大寬度，防止按鈕過大 */
        padding: 10px 16px;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        background: white;
        color: #374151;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease; /* 只過渡顏色，不包含 transform */
        box-sizing: border-box; /* 包含 padding 和 border */
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        white-space: nowrap; /* 防止文字換行 */
        overflow: hidden; /* 隱藏溢出文字 */
        text-overflow: ellipsis; /* 溢出顯示省略號 */
      }
      
      .mode1-oneclick-action-btn:hover {
        background: #f9fafb;
        border-color: #9ca3af;
      }
      
      .mode1-oneclick-action-btn.save {
        background: #10b981;
        color: white;
        border-color: #10b981;
      }
      
      .mode1-oneclick-action-btn.save:hover {
        background: #059669;
        border-color: #059669;
      }
      
      .mode1-instructions-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #e5e7eb;
        background: #f8fafc;
        border-radius: 16px 16px 0 0;
        flex-shrink: 0;
      }
      
      .mode1-instructions-modal-header h3 {
        margin: 0;
        color: #1f2937;
        font-size: 18px;
        font-weight: 600;
      }
      
      .mode1-instructions-modal-close {
        background: none;
        border: none;
        font-size: 24px;
        color: #6b7280;
        cursor: pointer;
        padding: 4px 8px;
        border-radius: 4px;
        transition: all 0.2s ease;
        line-height: 1;
      }
      
      .mode1-instructions-modal-close:hover {
        background: #e5e7eb;
        color: #374151;
      }
      
      .mode1-instructions-modal-content {
        padding: 20px;
        color: #374151;
        line-height: 1.6;
      }
      
      /* 使用說明步驟指南樣式 */
      .mode1-step-guide {
        margin: 16px 0;
      }
      
      .mode1-step {
        display: flex;
        align-items: flex-start;
        margin-bottom: 20px;
        padding: 16px;
        background: #f8fafc;
        border-radius: 12px;
        border-left: 4px solid #3b82f6;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
      }
      
      .mode1-step:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }
      
      .mode1-step-number {
        padding: 6px 14px;
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        border-radius: 6px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 13px;
        margin-right: 12px;
        flex-shrink: 0;
        white-space: nowrap;
        box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
      }
      
      /* 兩種生成方式的專用樣式 */
      .mode1-method-guide {
        margin: 16px 0;
      }
      
      .mode1-method-item {
        display: flex;
        align-items: flex-start;
        margin-bottom: 20px;
        padding: 20px;
        background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        border-radius: 12px;
        border: 2px solid #e5e7eb;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
      }
      
      .mode1-method-item:hover {
        border-color: #3b82f6;
        box-shadow: 0 4px 16px rgba(59, 130, 246, 0.2);
        transform: translateY(-2px);
      }
      
      .mode1-method-badge {
        padding: 8px 16px;
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        border-radius: 8px;
        font-weight: 600;
        font-size: 14px;
        margin-right: 16px;
        flex-shrink: 0;
        white-space: nowrap;
        box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
        letter-spacing: 0.5px;
      }
      
      .mode1-method-content {
        flex: 1;
      }
      
      .mode1-method-content strong {
        color: #1f2937;
        font-size: 16px;
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
      }
      
      .mode1-method-content p {
        color: #4b5563;
        font-size: 14px;
        margin: 0;
        line-height: 1.6;
      }
      
      .mode1-step-content {
        flex: 1;
      }
      
      .mode1-step-content strong {
        color: #1f2937;
        font-size: 14px;
        display: block;
        margin-bottom: 4px;
      }
      
      .mode1-step-content p {
        color: #6b7280;
        font-size: 13px;
        margin: 0;
        line-height: 1.4;
      }
      
      /* 生成內容類型樣式 */
      .mode1-result-types {
        margin: 12px 0;
      }
      
      .mode1-result-type {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
        padding: 10px 12px;
        margin-bottom: 8px;
        border-left: 3px solid #10b981;
      }
      
      .mode1-result-type strong {
        color: #1f2937;
        font-size: 13px;
        display: block;
        margin-bottom: 4px;
      }
      
      .mode1-result-type p {
        color: #6b7280;
        font-size: 12px;
        margin: 0;
        line-height: 1.3;
      }
      
      /* 生成結果標籤和內容 */
      /* 舊的抽屜相關樣式已刪除 */
      
      /* Markdown 表格樣式 */
      .mode1-result-content table {
        width: 100%;
        border-collapse: collapse;
        margin: 16px 0;
        font-size: 14px;
        background: #ffffff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
      }
      
      .mode1-result-content table thead {
        background: #f8fafc;
        border-bottom: 2px solid #e5e7eb;
      }
      
      .mode1-result-content table th {
        padding: 12px 16px;
        text-align: left;
        font-weight: 600;
        color: #374151;
        white-space: nowrap;
        border-right: 1px solid #e5e7eb;
      }
      
      .mode1-result-content table th:last-child {
        border-right: none;
      }
      
      .mode1-result-content table tbody tr {
        border-bottom: 1px solid #e5e7eb;
        transition: background-color 0.2s ease;
      }
      
      .mode3-result-content table tbody tr:hover {
        background-color: #f9fafb;
      }
      
      .mode3-result-content table tbody tr:last-child {
        border-bottom: none;
      }
      
      .mode1-result-content table td {
        padding: 12px 16px;
        color: #4b5563;
        border-right: 1px solid #e5e7eb;
        vertical-align: top;
      }
      
      .mode3-result-content table td:last-child {
        border-right: none;
      }
      
      .mode3-result-content table tbody tr:nth-child(even) {
        background-color: #f9fafb;
      }
      
      .mode3-result-content table tbody tr:nth-child(even):hover {
        background-color: #f3f4f6;
      }
      
      /* 響應式表格 */
      @media (max-width: 768px) {
        .mode1-result-content table {
          font-size: 12px;
        }
        
        .mode3-result-content table th,
        .mode1-result-content table td {
          padding: 8px 12px;
        }
        
        .mode1-result-content table {
          display: block;
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }
      }
      
      /* 舊的抽屜相關樣式已刪除 */
      
      /* 生成中動畫樣式（類似 mode3） */
      .generating-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 20px;
        padding: 40px 20px;
        min-height: 200px;
      }
      
      .generating-spinner {
        width: 48px;
        height: 48px;
        border: 4px solid #e5e7eb;
        border-top-color: #3b82f6;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      
      .generating-text {
        font-size: 16px;
        font-weight: 500;
        color: #3b82f6;
        text-align: center;
        animation: pulse 2s ease-in-out infinite;
      }
      
      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.6;
        }
      }
      
      .generating-dots {
        display: inline-block;
        width: 1em;
        text-align: left;
      }
      
      .generating-dots::after {
        content: '...';
        animation: dots 1.5s steps(4, end) infinite;
      }
      
      @keyframes dots {
        0%, 20% {
          content: '.';
        }
        40% {
          content: '..';
        }
        60%, 100% {
          content: '...';
        }
      }
      
      /* 聊天訊息區域 */
      #mode1-chatMessages {
        flex: 1;
        overflow-y: auto;
        padding: 16px 24px;
        margin: 0;
        background: transparent;
        border: none;
        border-radius: 0;
        min-height: 0;
        height: auto;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
      }
      
      /* Mode3 訊息框樣式 */
      #mode1-chatMessages .message.user {
        display: flex !important;
        flex-direction: row !important;
        align-items: flex-start !important;
        justify-content: flex-end !important;
        margin-bottom: 16px !important;
        background: transparent !important;
        margin-left: auto !important;
      }
      
      #mode1-chatMessages .message.user .message-content {
        flex: 1 !important;
        background: #dbeafe !important;
        padding: 20px 40px !important;
        padding-left: 50px !important;
        border-radius: 12px !important;
        border: 1px solid #3b82f6 !important;
        color: #1e40af !important;
        line-height: 1.6 !important;
        text-align: right !important;
        margin-right: 12px !important;
        margin-left: 0 !important;
        order: 1 !important;
        font-size: 16px !important;
        box-sizing: border-box !important;
        max-width: 100% !important; /* 確保不會超出容器 */
      }
      
      /* 手機版對話框調整 - 減少右邊距 */
      @media (max-width: 768px) {
        #mode1-chatMessages .message.user .message-content {
          margin-right: 8px !important; /* 減少右邊距 */
          padding: 16px 20px !important; /* 減少內邊距 */
          padding-left: 24px !important;
        }
        
        #mode1-chatMessages {
          padding-left: 12px !important; /* 減少左邊距，讓對話框更居中 */
          padding-right: 12px !important; /* 減少右邊距 */
        }
      }
      
      #mode1-chatMessages .message.user .message-avatar {
        width: 32px !important;
        height: 32px !important;
        border-radius: 50% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        flex-shrink: 0 !important;
        margin-right: 0 !important;
        margin-left: 0 !important;
        background: #3b82f6 !important;
        color: white !important;
        overflow: hidden !important;
        order: 2 !important;
      }
      
      #mode1-chatMessages .message.user .message-avatar img {
        width: 100% !important;
        height: 100% !important;
        border-radius: 50% !important;
        object-fit: cover !important;
        display: block !important;
      }
      
      #mode1-chatMessages .message.user .message-avatar:has(img) {
        background: transparent !important;
      }
      
      /* Mode3 AI 訊息容器樣式 */
      #mode1-chatMessages .message.ai,
      #mode1-chatMessages .message.assistant {
        display: flex !important;
        margin-bottom: 16px !important;
        align-items: flex-start !important;
        background: transparent !important;
      }
      
      /* Mode3 AI 對話泡泡內容樣式 */
      #mode1-chatMessages .message.ai .message-content,
      #mode1-chatMessages .message.assistant .message-content {
        flex: 1 !important;
        background: #f8fafc !important;
        padding: 20px 40px !important;
        border-radius: 12px !important;
        border: 1px solid #e5e7eb !important;
        color: #1f2937 !important;
        margin-left: 12px !important;
        font-size: 16px !important;
        line-height: 1.6 !important;
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji" !important;
        text-align: left !important;
        box-sizing: border-box !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
      }
      
      /* Mode3 AI 頭像樣式 */
      #mode1-chatMessages .message.ai .message-avatar,
      #mode1-chatMessages .message.assistant .message-avatar {
        width: 32px !important;
        height: 32px !important;
        border-radius: 50% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-size: 16px !important;
        margin-right: 12px !important;
        flex-shrink: 0 !important;
        background: #10a37f !important;
        color: white !important;
      }
      
      /* Mode3 AI 對話泡泡段落樣式 */
      #mode1-chatMessages .message.ai .message-content p,
      #mode1-chatMessages .message.assistant .message-content p {
        margin: 0 0 6px 0 !important;
        line-height: 1.4 !important;
      }
      
      #mode1-chatMessages .message.ai .message-content p:first-child,
      #mode1-chatMessages .message.assistant .message-content p:first-child {
        margin-top: 0 !important;
      }
      
      #mode1-chatMessages .message.ai .message-content p:last-child,
      #mode1-chatMessages .message.assistant .message-content p:last-child {
        margin-bottom: 0 !important;
      }
      
      /* Mode3 AI 對話泡泡列表樣式 */
      #mode1-chatMessages .message.ai .message-content ul,
      #mode1-chatMessages .message.assistant .message-content ul {
        margin: 8px 0 !important;
        padding-left: 20px !important;
      }
      
      #mode1-chatMessages .message.ai .message-content li,
      #mode1-chatMessages .message.assistant .message-content li {
        margin: 4px 0 !important;
      }
      
      /* 對話框中的表格樣式 */
      #mode1-chatMessages .message-content table {
        width: 100%;
        border-collapse: collapse;
        margin: 16px 0;
        font-size: 14px;
        background: #ffffff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #e5e7eb;
        table-layout: auto;
      }
      
      #mode1-chatMessages .message-content table thead {
        background: #f8fafc;
        border-bottom: 2px solid #e5e7eb;
      }
      
      #mode1-chatMessages .message-content table th {
        padding: 12px 16px;
        text-align: left;
        font-weight: 600;
        color: #374151;
        white-space: nowrap;
        border-right: 1px solid #e5e7eb;
        border-bottom: 1px solid #e5e7eb;
      }
      
      #mode1-chatMessages .message-content table th:last-child {
        border-right: none;
      }
      
      #mode1-chatMessages .message-content table tbody tr {
        border-bottom: 1px solid #e5e7eb;
        transition: background-color 0.2s ease;
      }
      
      #mode1-chatMessages .message-content table tbody tr:hover {
        background-color: #f9fafb;
      }
      
      #mode1-chatMessages .message-content table tbody tr:last-child {
        border-bottom: none;
      }
      
      #mode1-chatMessages .message-content table td {
        padding: 12px 16px;
        color: #4b5563;
        border-right: 1px solid #e5e7eb;
        vertical-align: top;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }
      
      #mode1-chatMessages .message-content table td:last-child {
        border-right: none;
      }
      
      #mode1-chatMessages .message-content table tbody tr:nth-child(even) {
        background-color: #f9fafb;
      }
      
      #mode1-chatMessages .message-content table tbody tr:nth-child(even):hover {
        background-color: #f3f4f6;
      }
      
      /* 手機版對話框表格樣式 */
      @media (max-width: 768px) {
        #mode1-chatMessages .message-content table {
          font-size: 12px;
          display: block;
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          overscroll-behavior-x: contain;
        }
        
        #mode1-chatMessages .message-content table thead,
        #mode1-chatMessages .message-content table tbody,
        #mode1-chatMessages .message-content table tr {
          display: table;
          width: 100%;
          table-layout: fixed;
        }
        
        #mode1-chatMessages .message-content table {
          min-width: 600px;
        }
        
        #mode1-chatMessages .message-content table th,
        #mode1-chatMessages .message-content table td {
          padding: 10px 12px;
        }
      }
      
      /* Mode3 typing-indicator 樣式 */
      #mode1-chatMessages .typing-indicator {
        display: flex !important;
        align-items: center !important;
        font-style: italic !important;
        color: #6b7280 !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      #mode1-chatMessages .typing-dots {
        display: flex !important;
        margin-left: 10px !important;
      }
      
      #mode1-chatMessages .typing-dot {
        width: 6px !important;
        height: 6px !important;
        margin: 0 2px !important;
        background-color: #3b82f6 !important;
        border-radius: 50% !important;
        animation: dot-flashing 1s infinite alternate !important;
      }
      
      #mode1-chatMessages .typing-dot:nth-child(2) {
        animation-delay: 0.2s !important;
      }
      
      #mode1-chatMessages .typing-dot:nth-child(3) {
        animation-delay: 0.4s !important;
      }
      
      @keyframes dot-flashing {
        0% {
          opacity: 0.3;
        }
        100% {
          opacity: 1;
        }
      }
      
      /* Mode1 訊息操作按鈕樣式 */
      .message-actions {
        display: flex;
        gap: 8px;
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid #e5e7eb;
      }
      
      .mode1-message-save-btn {
        padding: 8px 16px;
        background: #10b981;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: background 0.2s;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
        min-height: 36px;
      }
      
      .mode1-message-save-btn:hover:not(:disabled) {
        background: #059669;
      }
      
      .mode1-message-save-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      
      .mode1-message-regenerate-btn {
        padding: 8px 16px;
        background: #3b82f6;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: background 0.2s;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
        min-height: 36px;
      }
      
      .mode1-message-regenerate-btn:hover:not(:disabled) {
        background: #2563eb;
      }
      
      .mode1-message-regenerate-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      
      .mode1-message-save-btn:active:not(:disabled),
      .mode1-message-regenerate-btn:active:not(:disabled) {
        transform: scale(0.98);
      }
      
      /* 手機版聊天訊息樣式 */
      @media (max-width: 768px) {
        #mode1-chatMessages {
          padding: 16px 12px;
          padding-top: 80px;
          padding-top: calc(80px + env(safe-area-inset-top, 0px)); /* iOS 安全區域 */
          padding-left: calc(12px + env(safe-area-inset-left, 0px)); /* iOS 安全區域 */
          padding-right: calc(12px + env(safe-area-inset-right, 0px)); /* iOS 安全區域 */
          padding-bottom: calc(16px + env(safe-area-inset-bottom, 0px)); /* iOS 安全區域 */
        }
        
        .message-actions {
          flex-direction: column;
        }
        
        .mode1-message-save-btn,
        .mode1-message-regenerate-btn {
          width: 100%;
          justify-content: center;
          min-height: 44px; /* iOS 最小觸控目標 */
        }
        
        #mode1-chatMessages .message.user .message-content {
          padding: 15px 20px !important;
          padding-left: 30px !important;
          font-size: 14px !important;
          max-width: 85%; /* 確保在小螢幕上不會太寬 */
          word-wrap: break-word !important;
          overflow-wrap: break-word !important;
        }
        
        #mode1-chatMessages .message.ai .message-content,
        #mode1-chatMessages .message.assistant .message-content {
          padding: 15px 20px !important;
          font-size: 14px !important;
          max-width: 85%; /* 確保在小螢幕上不會太寬 */
          word-wrap: break-word !important;
          overflow-wrap: break-word !important;
        }
        
        #mode1-chatMessages .message.user .message-avatar,
        #mode1-chatMessages .message.ai .message-avatar,
        #mode1-chatMessages .message.assistant .message-avatar {
          width: 32px !important; /* 稍微增大以符合觸控目標 */
          height: 32px !important;
          min-width: 32px !important;
          min-height: 32px !important;
          font-size: 14px !important;
        }
        
        /* 優化對話框在 iOS Safari 的顯示 */
        #mode1-chatMessages .message {
          margin-bottom: 20px !important; /* 增加間距，提升可讀性 */
        }
        
        /* 優化表格在手機版的顯示 */
        #mode1-chatMessages table {
          font-size: 12px !important;
          display: block !important;
          overflow-x: auto !important;
          -webkit-overflow-scrolling: touch !important;
          width: 100% !important;
        }
      }
      
      /* 輸入區域 */
      .input-row {
        background: transparent;
        border: none;
        padding: 8px 24px 8px 24px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        position: static !important;
        bottom: auto !important;
        left: auto !important;
        right: auto !important;
        z-index: auto !important;
        min-height: auto !important;
        box-shadow: none !important;
        margin: 0 !important;
        margin-top: 0 !important;
        height: auto !important;
        border-radius: 0 !important;
        max-height: none !important;
        flex-shrink: 0 !important;
        width: 100% !important;
        box-sizing: border-box !important;
      }
      
      .input-container {
        display: flex;
        gap: 12px;
        align-items: flex-end;
        width: 100%;
        flex-direction: row !important;
      }
      
      .input-wrapper {
        position: relative;
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 120px;
        background: #ffffff;
        border: 1px solid #d1d5db;
        border-radius: 12px;
        padding: 12px;
        gap: 8px;
        transition: background-color 0.3s ease, border-color 0.3s ease;
        /* iOS Safari 優化 */
        -webkit-appearance: none;
        appearance: none;
      }
      
      .input-wrapper:focus-within {
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }
      
      .input-row-inner {
        display: flex;
        gap: 12px;
        align-items: flex-end;
        flex: 1;
      }
      
      .chat-input {
        flex: 1;
        min-height: 44px;
        max-height: 200px;
        border: none;
        border-radius: 0;
        padding: 0;
        font-size: 16px; /* iOS Safari 建議至少 16px 避免自動縮放 */
        background: transparent;
        resize: none;
        overflow-y: auto;
        line-height: 1.5;
        outline: none;
        /* iOS Safari 優化 */
        -webkit-appearance: none;
        appearance: none;
        -webkit-tap-highlight-color: transparent;
      }
      
      .chat-input:focus {
        outline: none;
      }
      
      .send-btn {
        height: 44px;
        min-width: 44px;
        min-height: 44px; /* iOS 最小觸控目標 */
        border-radius: 10px;
        background: #3b82f6;
        color: #ffffff;
        border: none;
        padding: 0 18px;
        cursor: pointer;
        transition: background-color 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        -webkit-tap-highlight-color: transparent; /* 移除 iOS 點擊高亮 */
        touch-action: manipulation; /* 優化觸控響應 */
      }
      
      .send-btn:hover:not(:disabled) {
        background: #2563eb;
      }
      
      .send-btn:disabled {
        background: #9ca3af;
        cursor: not-allowed;
      }
      
      /* 快速按鈕 */
      .quick-buttons {
        gap: 8px;
        padding: 0;
        margin: 0;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        width: 100%;
        background: transparent;
        box-sizing: border-box;
      }
      
      .quick-btn {
        background: transparent;
        border: 1px solid #d1d5db;
        color: #374151;
        padding: 8px 16px;
        border-radius: 16px;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;
        font-weight: 400;
        box-shadow: none;
        width: auto;
        min-width: fit-content;
        flex-shrink: 0;
        display: inline-flex;
        justify-content: center;
        align-items: center;
      }
      
      .quick-btn:hover {
        background: #3b82f6;
        border-color: #3b82f6;
        color: white;
      }
      
      /* 手機版適配 */
      @media (max-width: 768px) {
        /* 輸入區域手機版 */
        .input-row {
          padding: 8px 12px 16px 12px !important;
          padding-bottom: calc(16px + env(safe-area-inset-bottom, 0px)) !important; /* iOS 安全區域 */
        }
        
        .mode1-page .input-row {
          padding: 12px 16px !important;
          padding-left: 16px !important; /* 確保左邊有足夠 padding */
          padding-right: 16px !important; /* 確保右邊有足夠 padding */
          /* 確保輸入欄位在 iOS Safari 網址欄上方 */
          bottom: 0px !important; /* 改為 0，完全貼底 */
          /* 添加額外的安全邊距，確保不被網址欄遮擋 */
          padding-bottom: calc(12px + env(safe-area-inset-bottom, 0px) + 34px) !important; /* 34px 為 iOS Safari 網址欄高度 */
          width: 100% !important; /* 確保寬度為 100% */
          box-sizing: border-box !important; /* 包含 padding 在寬度內 */
        }
        
        /* 輸入容器和包裝器調整 */
        .mode1-page .input-container {
          width: 100% !important;
          max-width: 100% !important;
          padding: 0 !important;
          margin: 0 !important;
        }
        
        .mode1-page .input-wrapper {
          width: 100% !important;
          max-width: 100% !important;
          margin: 0 !important;
          padding: 12px !important;
          box-sizing: border-box !important;
        }
        
        /* 輸入行內部調整 */
        .mode1-page .input-row-inner {
          display: flex !important;
          flex-direction: row !important;
          align-items: flex-end !important;
          gap: 8px !important;
          width: 100% !important;
          box-sizing: border-box !important;
        }
        
        /* 輸入框調整 */
        .mode1-page .chat-input {
          flex: 1 1 auto !important;
          min-width: 0 !important; /* 允許縮小 */
          max-width: 100% !important;
          width: auto !important;
        }
        
        /* 送出按鈕調整 */
        .mode1-page .send-btn {
          flex-shrink: 0 !important; /* 防止按鈕被壓縮 */
          min-width: 44px !important; /* 確保最小寬度 */
          width: auto !important;
          padding: 0 16px !important; /* 適當的左右 padding */
        }
        
        /* iOS Safari 鍵盤彈出時調整 - 使用 JavaScript 動態處理 */
        .input-row:focus-within,
        .mode1-page .input-row:focus-within {
          /* 鍵盤彈出時，輸入欄位保持位置，由 JavaScript 處理滾動 */
          bottom: 0px !important;
          padding-bottom: calc(12px + env(safe-area-inset-bottom, 0px)) !important; /* 鍵盤彈出時網址欄會隱藏 */
        }
        
        /* 快速按鈕手機版：並排不換行，節省空間 */
        .quick-buttons {
          flex-wrap: nowrap !important; /* 不換行 */
          gap: 6px !important; /* 減少間距 */
          overflow-x: auto !important; /* 如果內容太寬，允許橫向滾動 */
          -webkit-overflow-scrolling: touch; /* iOS 平滑滾動 */
        }
        
        .quick-btn {
          flex: 1 1 auto !important; /* 平均分配空間 */
          min-width: 0 !important; /* 允許縮小 */
          min-height: 44px !important; /* iOS 最小觸控目標 */
          padding: 8px 12px !important; /* 增加 padding 確保觸控目標 */
          font-size: 13px !important; /* 稍微減小字體 */
          white-space: nowrap !important; /* 文字不換行 */
          overflow: hidden !important; /* 隱藏溢出文字 */
          text-overflow: ellipsis !important; /* 溢出顯示省略號 */
          -webkit-tap-highlight-color: transparent; /* 移除 iOS 點擊高亮 */
          touch-action: manipulation; /* 優化觸控響應 */
        }
        .mode1-results-drawer {
          width: 100%;
          right: -100%;
          padding-top: env(safe-area-inset-top, 0px); /* iOS 安全區域 */
          padding-bottom: env(safe-area-inset-bottom, 0px); /* iOS 安全區域 */
        }
        
        /* Modal 在手機版也是居中顯示，不需要 right 屬性 */
        .mode1-instructions-modal {
          padding-top: env(safe-area-inset-top, 0px); /* iOS 安全區域 */
          padding-bottom: env(safe-area-inset-bottom, 0px); /* iOS 安全區域 */
        }
        
        .mode1-instructions-btn-container {
          top: 80px;
          top: calc(80px + env(safe-area-inset-top, 0px)); /* iOS 安全區域 */
          left: 15px;
          left: calc(15px + env(safe-area-inset-left, 0px)); /* iOS 安全區域 */
        }
        
        .mode1-results-btn-container {
          top: 80px;
          top: calc(80px + env(safe-area-inset-top, 0px)); /* iOS 安全區域 */
          left: 80px;
          left: calc(80px + env(safe-area-inset-left, 0px)); /* iOS 安全區域 */
        }
        
        .mode1-instructions-btn, .mode1-results-btn {
          padding: 10px 14px; /* 調整 padding */
          min-height: 44px; /* iOS 最小觸控目標 */
          font-size: 12px; /* 縮小字體 */
          -webkit-tap-highlight-color: transparent; /* 移除 iOS 點擊高亮 */
          touch-action: manipulation; /* 優化觸控響應 */
        }
        
        /* 手機版：隱藏 emoji，顯示文字 */
        .mode1-instructions-icon, .mode1-results-icon {
          display: none;
        }
        
        .mode1-instructions-text, .mode1-results-text {
          display: inline-block; /* 顯示文字 */
        }
      }
    </style>
    
    <!-- 共享 JavaScript（必須按順序載入） -->
    <script src="assets/js/config.js?v=20251120"></script>
    <script src="assets/js/security.js?v=20251120"></script>
    <script src="assets/js/auth.js?v=20251120"></script>
    <script src="assets/js/api.js?v=20251120"></script>
    <script src="assets/js/common.js?v=20251124"></script>
  </head>
  <body class="mode1-fixed mode1 fig1">
    <!-- 導航欄 -->
    <div class="top-navbar">
      <div class="navbar-left">
        <!-- 手機版抽屜按鈕 -->
        <button class="mobile-drawer-toggle" onclick="toggleMobileDrawer()">
          <span class="hamburger-icon">☰</span>
        </button>
        <div class="navbar-title clickable-title" onclick="window.location.href='index.html'">ReelMind</div>
        <div class="navbar-tabs">
          <a href="index.html" class="navbar-tab">首頁</a>
          <a href="mode1.html" class="navbar-tab active">IP人設規劃</a>
          <a href="mode3.html" class="navbar-tab" onclick="handleModeNavigation(event, 'mode3')">一鍵生成</a>
          <a href="index.html#forum" class="navbar-tab" onclick="event.preventDefault(); window.location.href='index.html#forum'; return false;">論壇介紹</a>
          <a href="guide.html" class="navbar-tab">實戰指南</a>
          <a href="userDB.html" id="userDBTab" class="navbar-tab" style="display:none;">創作者資料庫</a>
        </div>
      </div>
      <div class="navbar-right">
        <div class="user-info" id="userInfo" style="display: none;" onclick="window.location.href='userDB.html'">
          <img id="userAvatar" class="user-avatar" src="" alt="用戶頭像" style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover; object-position: center;">
          <span id="userName" class="user-name"></span>
        </div>
        <div class="auth-buttons" id="authButtons" style="display: none;">
          <button id="loginBtn" class="login-btn" onclick="goToLogin()" style="padding: 8px 16px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer;">🔐 登入</button>
        </div>
      </div>
    </div>

    <!-- 手機版抽屜 -->
    <div class="mobile-drawer-overlay" id="mobileDrawerOverlay" onclick="closeMobileDrawer()"></div>
    <div class="mobile-drawer" id="mobileDrawer">
      <div class="mobile-drawer-header">
        <h3>選單</h3>
        <button class="mobile-drawer-close" onclick="closeMobileDrawer()">✕</button>
      </div>
      <div class="mobile-drawer-content">
        <a href="index.html" class="mobile-drawer-item">
          <span class="mobile-drawer-icon"><i class="fas fa-home"></i></span>
          <span class="mobile-drawer-text">首頁</span>
        </a>
        <a href="mode1.html" class="mobile-drawer-item active">
          <span class="mobile-drawer-icon"><i class="fas fa-user-tie"></i></span>
          <span class="mobile-drawer-text">IP人設規劃</span>
        </a>
        <a href="mode3.html" class="mobile-drawer-item" onclick="handleModeNavigation(event, 'mode3'); closeMobileDrawer(); return false;">
          <span class="mobile-drawer-icon"><i class="fas fa-magic"></i></span>
          <span class="mobile-drawer-text">一鍵生成</span>
        </a>
        <a href="index.html#forum" class="mobile-drawer-item" onclick="window.location.href='index.html#forum'; closeMobileDrawer(); return false;">
          <span class="mobile-drawer-icon"><i class="fas fa-comments"></i></span>
          <span class="mobile-drawer-text">論壇介紹</span>
        </a>
        <a href="guide.html" class="mobile-drawer-item" onclick="window.location.href='guide.html'; closeMobileDrawer(); return false;">
          <span class="mobile-drawer-icon"><i class="fas fa-book-open"></i></span>
          <span class="mobile-drawer-text">實戰指南</span>
        </a>
        <a href="userDB.html" id="userDBMobileTab" class="mobile-drawer-item" style="display:none;">
          <span class="mobile-drawer-icon"><i class="fas fa-database"></i></span>
          <span class="mobile-drawer-text">創作者資料庫</span>
        </a>
      </div>
    </div>

    <!-- Mode1 頁面內容（IP人設規劃） -->
    <div class="mode1-page">
      <!-- 使用說明按鈕 -->
      <div class="mode1-instructions-btn-container">
        <button class="mode1-instructions-btn" onclick="toggleMode1InstructionsDrawer()">
          <span class="mode1-instructions-icon">📋</span>
          <span class="mode1-instructions-text">使用說明</span>
        </button>
      </div>
      
      <!-- 一鍵生成按鈕 -->
      <div class="mode1-results-btn-container">
        <button class="mode1-results-btn" id="mode1ResultsBtn">
          <span class="mode1-results-text">生成結果</span>
        </button>
      </div>

      <!-- 聊天訊息區域 -->
      <div id="mode1-chatMessages" class="chat-messages"></div>

      <!-- 輸入區域 -->
      <div class="input-row">
        <div class="input-container">
          <div class="input-wrapper">
            <!-- 快速按鈕區域（移到輸入欄位上方） -->
            <div class="quick-buttons" id="mode1-quickButtons">
              <button class="quick-btn" onclick="handleQuickButton('ip-profile')">IP Profile</button>
              <button class="quick-btn" onclick="handleQuickButton('14day-plan')">14天規劃</button>
              <button class="quick-btn" onclick="handleQuickButton('today-script')">今日腳本</button>
              <button class="quick-btn" onclick="handleQuickButton('change-script-structure')">換腳本結構</button>
              <button class="quick-btn" onclick="handleQuickButton('reposition')">重新定位</button>
            </div>
            <div class="input-row-inner">
              <textarea id="mode1-messageInput" class="chat-input" placeholder="向AI提問..." rows="1"></textarea>
              <button id="mode1-sendBtn" class="send-btn" disabled>
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- IP人設規劃使用說明 Modal 彈跳視窗 -->
    <div class="mode1-instructions-overlay" id="mode1InstructionsOverlay" onclick="if(event.target === this) closeMode1InstructionsDrawer()"></div>
    <div class="mode1-instructions-modal" id="mode1InstructionsModal" onclick="event.stopPropagation()">
      <div class="mode1-instructions-modal-header">
        <h3>IP人設規劃使用說明</h3>
        <button class="mode1-instructions-modal-close" onclick="closeMode1InstructionsDrawer()">✕</button>
      </div>
      <div class="mode1-instructions-modal-content">
        <!-- 第一部分：模式簡介（讓用戶知道這是什麼） -->
        <p><strong>IP人設規劃模式</strong></p>
        <p>透過與AI深度對話，記錄您的人生曲線和個人特色，讓AI協助您建立完整的IP人設，並生成帳號定位、選題方向和短影音腳本。</p>
        
        <!-- 第二部分：操作流程（第一次使用的步驟） -->
        <p><strong>第一次使用流程</strong></p>
        <div class="mode1-step-guide">
          <div class="mode1-step">
            <div class="mode1-step-number">1</div>
            <div class="mode1-step-content">
              <strong>開始對話</strong>
              <p>使用快速按鈕（IP Profile、14天規劃、今日腳本、重新定位）或直接輸入，與AI分享您的背景、專長、價值觀和目標</p>
            </div>
          </div>
          <div class="mode1-step">
            <div class="mode1-step-number">2</div>
            <div class="mode1-step-content">
              <strong>深度交流</strong>
              <p>建議進行5-10輪對話，讓AI充分了解您的個人特色、專業領域、內容方向和目標受眾。您可以分享：</p>
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li>您的專業經驗、成就和獨特見解</li>
                <li>您的價值觀、人生目標和想傳達的訊息</li>
                <li>您的個性、溝通風格和內容調性</li>
                <li>您的目標受眾和想解決的問題</li>
                <li>您想分享的內容方向和主題領域</li>
              </ul>
            </div>
          </div>
          <div class="mode1-step">
            <div class="mode1-step-number">3</div>
            <div class="mode1-step-content">
              <strong>AI 生成內容</strong>
              <p>透過對話，AI會根據您的背景和需求生成以下內容：</p>
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li><strong>帳號定位</strong>：包含目標受眾、傳達目標、帳號定位、內容方向、風格調性、差異化優勢等完整分析</li>
                <li><strong>選題方向（影片類型配比）</strong>：根據帳號定位生成適合的影片類型、佔比、目的和內容方向建議，以表格形式呈現</li>
                <li><strong>短影音腳本</strong>：生成短影音腳本，包含主題、開場鉤子、核心內容、行動呼籲、畫面描述和發佈文案</li>
              </ul>
            </div>
          </div>
          <div class="mode1-step">
            <div class="mode1-step-number">4</div>
            <div class="mode1-step-content">
              <strong>儲存生成內容</strong>
              <p>生成內容後，點擊訊息下方的「儲存」按鈕，系統會自動將生成的內容儲存。您也可以點擊「生成結果」按鈕，在「帳號定位」、「選題方向」或「短影音腳本」標籤中，點擊「儲存到創作者資料庫」按鈕來儲存特定記錄。所有已保存的記錄都可以在「生成結果」中查看。</p>
            </div>
          </div>
        </div>
        
        <!-- 第三部分：查看和管理生成結果（告訴用戶如何使用已生成的結果） -->
        <p><strong>查看和管理生成結果</strong></p>
        <div class="mode1-method-guide">
          <div class="mode1-method-item">
            <div class="mode1-method-badge">生成結果</div>
            <div class="mode1-method-content">
              <strong>查看歷史生成結果</strong>
              <p>點擊右上角「生成結果」按鈕，開啟彈出視窗，您可以透過頂部的標籤頁切換查看不同類型的生成結果：</p>
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li><strong>帳號定位</strong>：查看所有已保存的帳號定位記錄</li>
                <li><strong>選題方向</strong>：查看所有已保存的選題方向記錄</li>
                <li><strong>短影音腳本</strong>：查看所有已保存的短影音腳本記錄</li>
              </ul>
              <p style="margin-top: 8px;">每個結果都可以：</p>
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li><strong>選擇</strong>：選擇要使用的設定（可同時選擇帳號定位、選題方向、短影音腳本各一個）</li>
                <li><strong>展開</strong>：查看完整內容</li>
                <li><strong>儲存到創作者資料庫</strong>：將記錄儲存到創作者資料庫中</li>
                <li><strong>刪除</strong>：刪除不需要的記錄</li>
              </ul>
            </div>
          </div>
          <div class="mode1-method-item">
            <div class="mode1-method-badge">使用此設定與AI對話</div>
            <div class="mode1-method-content">
              <strong>選擇已保存的設定進行討論</strong>
              <p>在「生成結果」中選擇您想要使用的帳號定位、選題方向或短影音腳本後，上方會顯示「已選擇的設定」區域。請注意：</p>
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li><strong>可以同時選擇不同類型的設定</strong>（帳號定位、選題方向、短影音腳本各可選擇一個）</li>
                <li>點擊「使用此設定與AI對話」按鈕，系統會自動將所有選擇的設定內容填入對話框</li>
                <li>AI會根據您選擇的設定，協助您討論和優化短影音內容</li>
                <li>可以隨時移除已選擇的設定，重新選擇其他記錄</li>
              </ul>
              <p style="margin-top: 8px;"><strong>使用場景</strong>：當您想要基於之前的生成結果進行調整、優化或討論時，可以使用此功能快速載入相關設定，讓AI更精準地協助您。</p>
            </div>
          </div>
        </div>
        
        <!-- 第四部分：功能特色（告訴用戶有哪些特色功能） -->
        <p><strong>功能特色</strong></p>
        <ul>
          <li><strong>智能對話生成</strong>：透過與AI深度對話，讓AI根據您的背景和需求生成帳號定位、選題方向和短影音腳本</li>
          <li><strong>長期記憶</strong>：AI會記住您之前說過的內容，生成結果會越來越精準</li>
          <li><strong>自動儲存</strong>：在對話中說「儲存」即可自動保存生成內容，無需手動操作</li>
          <li><strong>快速按鈕</strong>：使用快速按鈕（IP Profile、14天規劃、今日腳本、換腳本結構、重新定位）可快速詢問特定主題，加速對話流程</li>
          <li><strong>自由搭配設定</strong>：可以從生成結果中選擇不同類型的設定（帳號定位、選題方向、短影音腳本各一個），自由組合後與AI討論</li>
          <li><strong>標籤頁分類瀏覽</strong>：生成結果按類型分類顯示，方便快速找到需要的記錄</li>
          <li><strong>儲存到創作者資料庫</strong>：生成結果可儲存到創作者資料庫中，方便後續查看和管理</li>
          <li><strong>歷史記錄管理</strong>：可以查看、選擇、匯出或刪除所有歷史生成記錄</li>
        </ul>
        
        <!-- 第五部分：使用技巧（進階技巧） -->
        <p><strong>使用技巧</strong></p>
        <ul>
          <li>首次使用建議先進行5-10輪對話，讓AI充分了解您的背景、專長和目標</li>
          <li>生成後可繼續對話調整，AI會根據新對話更新理解，並在後續生成中應用</li>
          <li>在對話中說「儲存」或「幫我儲存」，系統會自動保存生成的內容</li>
          <li>可以從「生成結果」中選擇之前保存的設定，與AI討論如何優化和調整</li>
          <li>所有生成內容都會自動記錄到長期記憶，後續對話會更精準</li>
          <li>可在「創作者資料庫」→「IP人設規劃結果」中查看所有歷史生成記錄</li>
          <li>使用「IP Profile」快速按鈕可快速查看最新的帳號定位</li>
          <li>使用「重新定位」快速按鈕可完全重新開始，生成全新的帳號定位</li>
        </ul>
        
        <!-- 第六部分：如何更新帳號定位（進階功能） -->
        <p><strong>如何更新帳號定位</strong></p>
        <div class="mode1-step-guide">
          <div class="mode1-step">
            <div class="mode1-step-number">方法一</div>
            <div class="mode1-step-content">
              <strong>使用「重新定位」快速按鈕</strong>
              <p>點擊對話框下方的「重新定位」按鈕，系統會完全忽略之前的對話內容和定位結果，從頭開始詢問您的需求，生成全新的帳號定位。這是最快速的方式。</p>
          </div>
          </div>
          <div class="mode1-step">
            <div class="mode1-step-number">方法二</div>
            <div class="mode1-step-content">
              <strong>繼續對話後生成新定位</strong>
              <p>繼續與AI對話，分享您的新想法、變化或需求調整。AI會根據最新的對話內容更新理解，然後您可以透過對話讓AI生成新的帳號定位。生成後記得說「儲存」來保存新定位。</p>
            </div>
          </div>
          <div class="mode1-step">
            <div class="mode1-step-number">方法三</div>
            <div class="mode1-step-content">
              <strong>選擇過往紀錄進行調整</strong>
              <p>在「生成結果」中，選擇「帳號定位」、「選題方向」或「短影音腳本」任一標籤，找到您想要調整的記錄，點擊「選擇」按鈕。選擇後，您可以點擊「使用此設定與AI對話」來與AI討論如何調整和優化該設定，或直接在聊天中繼續對話，AI會基於您選擇的設定進行後續的對話和生成。</p>
            </div>
          </div>
        </div>
        
        <!-- 第七部分：重要提示（重要資訊） -->
        <p><strong>重要提示</strong></p>
        <ul>
          <li>系統會自動使用<strong>最新生成並保存的帳號定位</strong>，當您點擊「IP Profile」快速按鈕時，會顯示最新的定位結果</li>
          <li>如果您想要使用最新的定位，請確保在對話中生成後說「儲存」來保存</li>
          <li>如果系統顯示的是舊的定位，請使用上述方法重新生成並儲存新的定位</li>
          <li>所有保存的定位記錄都可以在「生成結果」→「帳號定位」標籤中查看和管理</li>
        </ul>
      </div>
    </div>
    
    <!-- 生成結果 Modal 彈出視窗 -->
    <div class="mode1-oneclick-modal-overlay" id="mode1OneClickModalOverlay" onclick="if(event.target === this) closeMode1OneClickModal()">
      <div class="mode1-oneclick-modal" onclick="event.stopPropagation()">
        <div class="mode1-oneclick-modal-header">
          <h2>
            <span>生成結果</span>
          </h2>
          <button class="mode1-oneclick-modal-close" onclick="closeMode1OneClickModal()">✕</button>
        </div>

        <!-- 過往紀錄類型切換標籤 -->
        <div class="mode1-oneclick-tabs">
          <button class="mode1-oneclick-tab active" id="mode1HistoryTabProfile" onclick="switchMode1HistoryType('profile')">
            <span>帳號定位</span>
          </button>
          <button class="mode1-oneclick-tab" id="mode1HistoryTabPlan" onclick="switchMode1HistoryType('plan')">
            <span>選題方向</span>
          </button>
          <button class="mode1-oneclick-tab" id="mode1HistoryTabScripts" onclick="switchMode1HistoryType('scripts')">
            <span>短影音腳本</span>
              </button>
          </div>

        <div class="mode1-oneclick-modal-content">
          <!-- 過往紀錄區域 -->
          <div class="mode1-oneclick-tab-content active" id="mode1OneClickHistoryContent">
            <!-- 選擇設定區域 -->
            <div class="mode1-selected-settings" id="mode1SelectedSettings" style="display: none;">
              <div class="mode1-selected-settings-header">
                <h3>已選擇的設定</h3>
            </div>
              <div class="mode1-selected-settings-content">
                <div class="mode1-selected-setting-item" id="mode1SelectedProfile" style="display: none;">
                  <span class="mode1-selected-label">帳號定位：</span>
                  <span class="mode1-selected-value" id="mode1SelectedProfileValue"></span>
                  <button class="mode1-selected-remove" onclick="removeSelectedSetting('profile')">×</button>
          </div>
                <div class="mode1-selected-setting-item" id="mode1SelectedPlan" style="display: none;">
                  <span class="mode1-selected-label">選題方向：</span>
                  <span class="mode1-selected-value" id="mode1SelectedPlanValue"></span>
                  <button class="mode1-selected-remove" onclick="removeSelectedSetting('plan')">×</button>
                </div>
                <div class="mode1-selected-setting-item" id="mode1SelectedScripts" style="display: none;">
                  <span class="mode1-selected-label">短影音腳本：</span>
                  <span class="mode1-selected-value" id="mode1SelectedScriptsValue"></span>
                  <button class="mode1-selected-remove" onclick="removeSelectedSetting('scripts')">×</button>
                </div>
              </div>
              <button class="mode1-use-settings-btn" id="mode1UseSettingsBtn" onclick="useSelectedSettingsToChat()">
                <span>使用此設定與AI對話</span>
              </button>
            </div>
            
            <!-- 過往紀錄列表 -->
            <div class="mode1-oneclick-history-container" id="mode1OneClickHistoryContainer">
              <div style="text-align: center; padding: 40px 20px; color: #9ca3af;">
                <p>載入中...</p>
              </div>
            </div>
          </div>
            </div>
          </div>
        </div>
        
    <!-- 展開內容模態視窗 -->
    <div class="mode1-expand-modal-overlay" id="mode1ExpandModalOverlay" onclick="closeMode1ExpandModal()">
      <div class="mode1-expand-modal" id="mode1ExpandModal" onclick="event.stopPropagation()">
        <div class="mode1-expand-modal-header">
          <h3 id="mode1ExpandModalTitle">查看完整內容</h3>
          <button class="mode1-expand-modal-close" onclick="closeMode1ExpandModal()">✕</button>
        </div>
        <div class="mode1-expand-modal-content" id="mode1ExpandModalContent">
          <!-- 內容將在這裡動態載入 -->
        </div>
      </div>
    </div>

    <!-- 彈出提示框 -->
    <div id="toast" class="toast" style="display: none;"></div>

    <!-- Mode1 專用 JavaScript（IP人設規劃） -->
    <!-- 載入共用 JavaScript 檔案 -->
    <!-- config.js、auth.js、api.js 和 common.js 已在前面載入，這裡不需要重複載入 -->
    <script src="assets/js/mode1.js?v=20251124-4"></script>
  </body>
</html>
